//===== Cronus Script ========================================
//= Quest de Kiel
//===== By: ================================================== 
//= L0ne_W0lf (Script), DZeroX (Timer)
//===== Versão Atual: ========================================
//= 4.0b
//===== Compatível com: ====================================== 
//= Cronus SVN
//===== Descrição: ===========================================
//=  Quest para abrir a fábrica de rôbos level 1 e 2
//= Créditos da tradução á Murkalael.
//=  Correções no texto por Cardoso.
//===== Comentários Adicionais: ==============================
//=	- 3.8a Traduzido o NPC [Murkalael] Correção por [Cardoso]
//=	- 3.9 Corrigido erro do cutin. [SoulBlaker]
//=	- 4.0 Merge do script "Quest de Kiel" do Venus. [Lord]
//=	- 4.0b Trocado efeitos numéricos por nomes. [Lord]
//= 	- 4.1 Corrigido os VÁRIOS bugs que existiam nessa versão. [Mr. Tet]
//=	- 4.2 Adaptado para inputs do bRO. [Mr. Tet]
//=	- 4.3 Corrigido erros da fala de premiação do Kiehl ( original ) [Mr. Tet]
//============================================================ 
//============================================================================
// Kiel Hyre Quest/Robotic Lab Dungeon
//
// Script Dialog Obtained and Copied Down by L0ne_W0lf
// Timer work and some variable dances by DZeroX
// Based on [iRO Sakray] as of [03/29/2007]
//============================================================================
//----------------------------------------------------------------------------
// [Notes]
//  - Let it be noted that ALL DIALOG IS OFFICIAL TO IRO UNLESS SPECIFIED.
//  - I've fixed a few of iRO's mistakes, but I'm sure I made some of my own. 
//  - Will probably require a major optimizing.
//  - Accidentally progressed Elly's dialog while reading 'Letter to Elly'. Improvising.
//  - Possible missing dialog for some getitem weight checks.
//  - Possible missing dialog for "Test Tube" if you haven't read the second poem.
//  - Possible missing dialog for Elly in Dromitory if you don't have "Steel Box"
//  - Possible missing dialog for "Grave" if you don't have "Yellow Keycard"
//  - Not going to list ALL of the more usless NPCs. (Doors + Empty "Beautiful Ladies")
//  - Accidently progressed Kiel Hyre's dialog. Improvising.
//  - Improvising for getting back in to see Mitchell if you butterfly wing and need to get back in.
//  - Possible missing dialog for "Odd Grandma"
//  - Possible missing dialog for "Shelf"
//  - Near the end I finshed the quest with some people. Used packet logging to get dialog.
//    Because of the above mentioned, NPC placement and dialog is a little sloppier.
//  - Possible missing dialog for "Kiel Hyre" (Accept and Okay responses)
//  - Parties are *NOT REQUIRED* as per Doddler's Wiki information.
//  - Possible missing dialog for "Kiel Hyre" if you don't have Allysia's Ring.
//
//----------------------------------------------------------------------------
// [Maps]                [Use]
//  yuno_in01 ........... Start quest in pub
//  kh_school ........... Deliver Wine here, Meet Elly
//  yuno ................ Get Delivery for/from "Little Kid"
//  lighthalzen ......... Get Delivery package for "Little Kid"
//  kh_vila ............. Kiel Hyre cottage.
//  kh_dun01 ............ Robot Factory; Save Kiel Hyre
//  kh_mansion .......... Kiel Hyre's Mansion in Lighthalzen
//  kh_kiehl01 .......... Kiehl's room/Cave
//  kh_kiehl02 .......... Kiehl's room/Boss Room
//
//----------------------------------------------------------------------------
// [Variables in Use]
//  KielHyreQuest 	- Main quest tracking variable (Quest finished at 106)
//
//  KHPubMasterEnd	- Finished with Pun Master if set to 1
//			- Deleted once no longer needed.
//
//  KHToastGirlEnd	- Pick up delivery if set to 1, 
//			- picked up delivery if set to 2
//			- finished if set to 3 
//			- Deleted once no longer needed.
//
//  KHCottagePoem1	- Tracks Poem 1 quest in cottage. (finished = 5)
//			- Deleted once no longer needed.
//
//  KHCottagePoem2	- Tracks Poem 2 quest in cottage. (finished = 3)
//			- Deleted once no longer needed.
//
//  @KHInput$		- Used with "Security Guard"
//  			- Used with "Test Tube"
//  			- Used when "Elly" (inputing string in attempt to wake her)
//  			- Used with "Grave", (twice)
//  			- Used with "Heavy Door"
//  			- Used with "Mechanical Device"
//  			- Used for opening various doors in Kiehl's area.
//
//  @KHFirstKeyhole	- Holds 1 (green keycard) or 2 (cottage key)
//  @KHSecondKeyhole	- Holds 1 (green keycard) or 2 (cottage key)
//
//  @KHPotionColor$	- Holds 'red', 'green', or 'yellow' depending on what wrong potion is selected.
//
//  @KHFirstSword 	- holds 1, 2, 3 or 4. Used to keep track of swords and snakes.
//  @KHSecondSword 	- holds 1, 2, 3 or 4. Used to keep track of swords and snakes.
//  @KHThirdSword	- holds 1, 2, 3 or 4. Used to keep track of swords and snakes.
//  @KHFourthSword	- holds 1, 2, 3 or 4. Used to keep track of swords and snakes.
//
//  @KHClimbAttempt	- Set to random (1-5) to determine if you fail at climbing the water pipe.
//
//  @KHQ1Read		- Make sure player has asked question 1 to Kiel Hyre
//  @KHQ2Read		- Make sure player has asked question 2 to Kiel Hyre
//  @KHQ3Read		- Make sure player has asked question 3 to Kiel Hyre
//
//  @KHTitle$		- Holds "Mr", "Mrs", or "Miss"
//
//  @KHDoorPushAttempt	- Keeps track of how many times a person has attmepted pushed the door open.
//
//  @KHPryingItem$	- Used for incorrect options when prying open last door.
//
//  .KHKilled		- Tracks how many monsters have been killed. Used with "Receiver", "Robots", and "Kiehl" NPCs
//
//  .KHDoor1Open	- 0/1 Depending on if the first door is opened.
//  .KHDoor2Open	- 0/1 Depending on if the second door is opened.
//  .KHDoor3Open	- 0/1 Depending on if the third door is opened.
//  .KHDoor4Open	- 0/1 Depending on if the fourth door is opened.
//  .KHDoor5Open	- 0/1 Depending on if the fifth door is opened.
//
//  .KHKilledBoss	- 0/1 depending on if the boss has been killed.
//
//  $@KHQuestBusy	- 0/1 depending on if the boss room has been set in motion.
//
//----------------------------------------------------------------------------
// [NPCs]			 [Location]
//  Pub Master .................. yuno_in01	[ 35,178]
//  Hanie ....................... yuno_fild08	[196,196]
//  Security Guard .............. yuno_fild08	[158,194]
//  Security Guard .............. yuno_fild08	[158,183]
//  Student ..................... kh_school	[ 57,142]
//  Student ..................... kh_school	[ 57,139]
//  Lady ........................ kh_school	[176, 60]
//  Cute Student ................ kh_school	[179, 39]
//  Little Kid .................. yuno		[217,114]
//  Windmill Owner .............. lighthalzen	[365,300]
//  Cottage Keeper .............. yuno_fild02	[ 93,210]
//  Door ........................ yuno_fild02	[ 75,218]
//  Door ........................ yuno_fild02	[109,218]
//  Wall ........................ kh_vila	[191, 14]
//  Book ........................ kh_vila	[184, 20]
//  Book ........................ kh_vila	[181, 20]
//  Book ........................ kh_vila	[178, 20]
//  Book ........................ kh_vila	[175, 19]
//  KH_Letter_Trigger ........... kh_vila	[179, 11]
//  Box ......................... kh_vila	[ 16,175]
//  Apple Box ................... kh_vila	[ 30,184]
//  Map ......................... kh_vila	[ 44,125]
//  Pot ......................... kh_vila	[ 33,148]
//  Calabash .................... kh_vila	[ 14, 55]
//  Pool ........................ kh_vila	[ 39, 39]
//  Vicious Dog ................. kh_vila 	[180,178]
//  Drawer ...................... kh_vila 	[115,186]
//  Box ......................... kh_vila 	[107,126]
//  Bookshelf ................... kh_vila 	[181,138]
//  Sword Hilt .................. kh_vila 	[136, 69]
//  Test Tube ................... kh_vila	[179, 69]
//  Test Tube ................... kh_vila	[185, 69]
//  Window ...................... yuno_fild08	[ 69,185]
//  Elly ........................ kh_school	[178,180]
//  Cookie Basket ............... kh_school	[175,175]
//  Window ...................... kh_school	[188,185]
//  Grave ....................... yuno_fild08	[ 72,170]
//  Heavy Door .................. kh_dun01	[236, 48]
//  Beautiful lady .............. kh_school	[119,149]
//  Beautiful lady .............. kh_school	[122,186]
//  Signboard ................... kh_dun01	[163,223]
//  Mechanical Device ........... kh_dun01	[166,223]
//  Mechanical Device ........... kh_dun01	[162,206]
//  Kiel_Hyre_Door .............. kh_dun01	[224,232]
//  Steward ..................... kh_mansion	[ 78, 55]
//  Kiel Hyre ................... kh_mansion	[ 22, 27]
//  Allysia ..................... kh_mansion	[ 22, 27]
//  Abduction_trigger ........... lighthalzen	[188,200]
//  Mysterious Woman ............ kh_mansion	[ 25, 79]
//  Odd Granma .................. yuno		[250,132]
//  Old Lady .................... yuno 		[250,132]
//  Rosimmir_Entrance ........... yuno		[273,141]
//  Table ....................... kh_rossi	[ 23, 23]
//  Shelf ....................... kh_rossi	[ 92, 40]
//  Desk ........................ kh_rossi	[144,146]
//  Bookshelf ................... kh_rossi	[144,146]
//  Old Fisherman ............... yuno_fild12	[232,222]
//  Wooden Board ................ yuno_fild09	[158,217]
//  Kiehl_Room_Warp ............. kh_mansion	[ 29, 27]
//  Entrance Device#KHEntry1 .... kh_dun01	[ 44, 20]
//  Entrance Device#KHEntry2 .... kh_dun01	[ 44,203]
//  Security Guard .............. yuno_fild08	[158,194]
//  Receiver .................... kh_kiehl01	[ 17, 39]
//  Flower Vase ................. kh_kiehl01	[ 13, 40]
//  Box ......................... kh_kiehl01	[ 19, 25]
//  Big Door .................... kh_kiehl01	[ 44, 33]
//  Big_Door_1_Warp ............. kh_kiehl01	[ 43, 33]
//  Big Door .................... kh_kiehl01	[174, 40]
//  Big_Door_2_Warp ............. kh_kiehl01	[174, 39]
//  Big Door .................... kh_kiehl01	[ 77,108]
//  Big_Door_3_Warp ............. kh_kiehl01	[ 68,108]
//  Big Door .................... kh_kiehl01	[ 41,177]
//  Big_Door_4_Warp ............. kh_kiehl01	[ 78,177]
//  Robots ...................... kh_kiehl01	[ 15,181]
//  Big Door .................... kh_kiehl01	[166,187]
//  Big_Door_5_Warp ............. kh_kiehl01	[166,186]
//  Kiehl_Room_Trap ............. kh_kiehl02	[ 49, 15]
//  Kiehl#Original .............. kh_kiehl02	[ 50, 52]
//  KiehlRoom ................... kh_kiehl02	[  1,  1]
//  Floating NPC (Agent#KHAgent0::KHAgent)
//  Mitchell#KiehlRoom .......... kh_kiehl02	[ 49, 55]
//  Agent#KHAgent1 ....   ....... kh_kiehl02	[ 53, 52]
//  Agent#KHAgent2 .............. kh_kiehl02	[ 51, 49]
//  Agent#KHAgent3 .............. kh_kiehl02	[ 47, 50]
//  Agent#KHAgent4 .............. kh_kiehl02	[ 46, 53]
//  Kiehl#Copy .................. kh_kiehl02	[ 48, 53]
//  Kiehl_Roomn_Exit ............ kh_kiehl01	[ 50, 59]
//
//----------------------------------------------------------------------------
// [Functions]
//  None
//
//----------------------------------------------------------------------------
// [Conflicts]
//   Resolved
//
//============================================================================


//============================================================================
// Affiliated NPCs
//============================================================================

//----------------------------------------------------------------------------
// Juno Pub Master/Starting point.
//----------------------------------------------------------------------------
yuno_in01,35,179,1	script	Dono de Bar	46,4,4,{
	if (checkweight(7487,1) == 0) {
		mes "[Vandt]";
		mes "Só um segundo! Você está";
		mes "carregando muitos itens";
		mes "no momento. É melhor você";
		mes "colocar suas coisas no armazen da";
		mes "Kafra ou você não será";
		mes "capaz de pegar nada novo...";
		close;
	}

	if (KielHyreQuest == 1) {
		mes "[Vandt]";
		mes "Olá, bem vindo";
		mes "ao meu bar. Então, o que";
		mes "gostaria de tomar?";
		next;

		switch(select("Cerveja, por favor","Um coquetel, por favor","Soju, por favor.","Você parece preocupado, o que houve?","Cancelar")) {
 
		case 1:
			mes "[Vandt]";
			mes "Certo, deixe-me pegar";
			mes "um copo de cerveja para você";
			mes "Aqui está, esta é";
			mes "a cerveja espacial Schwaltz.";
			next;
			mes "^3355FF*Gulp gulp gulp*^000000";
			percentheal 5,-5;
			next;
			mes "["+strcharinfo(0)+"]";
			mes "Ahhh, isso é realmente";
			mes "bom! Realmente acerta";
			mes "lá embaixo!!";
			close;

		case 2:
			mes "[Vandt]";
			mes "Me desculpe, mas tenho de";
			mes "entregar todos os ingredientes do";
			mes "nosso coquetel à outros fregueses.";
			mes "Talvez eu tenha o suficiente para fazer-lhe";
			mes "algo na próxima vez, okay?";
			close;

		case 3:
			mes "[Vandt]";
			mes "S-soju? Desculpe,";
			mes "mas não servimos isso";
			mes "aqui. É um muita coisa de machão";
			mes "num drink para mim...";
			close;

		case 4:
			mes "[Vandt]";
			mes "Oh, você por acaso ouviu?";
			mes "Desculpe, é que um dos meus";
			mes "empregados sofreu um";
			mes "acidente e se machucou muito,";
			mes "então não tenho ninguém que possa";
			mes "entregar essa mercadoria.";
			next;
			mes "[Vandt]";
			mes "Eu tenho um pedido urgente";
			mes "que preciso enviar para";
			mes "a Academia de Kiel Hyre,";
			mes "mas não consigo encontrar alguém";
			mes "disponível para esse";
			mes "tipo de trabalho temporário.";
			next;

			switch(select("Sinto por saber disso","Quer que eu te ajude?")) {

			case 1:
				mes "[Vandt]";
				mes "Bem, com certeza irei";
				mes "pensar em alguma coisa.";
				mes "Você conhece alguém";
				mes "que esteja interessado em";
				mes "algum trabalho meio período?";
				close;

			case 2:
				mes "[Vandt]";
				mes "Mesmo? Que ótimo!";
				mes "Mas antes, acho que é justo lhe";
				mes "dizer que esse serviço pode não";
				mes "ser tão simples quanto você pensa.";
				mes "Espero que você complete a";
				mes "entrega não importa o que aconteça.";
				next;

				switch(select("Claro, eu farei", "Espere, deixe-me pensar...")) {

				case 1:
					mes "[Vandt]";
					mes "Estou contente de ouvir isso.";
					mes "Bem, então, por favor leve essa";
					mes "garrafa de Vinho Para Culinária para";
					mes "Senhora. ^ff0000Lecollane^000000 na academia";
					mes "de Kiel Hyre. Lhe pagarei";
					mes "assim que você termine o serviço, okay?";
					getitem 7487,1; //Culinary_Wine
					set KielHyreQuest,2;
					close;

				case 2:
					mes "[Vandt]";
					mes "Certamente. Eu preciso";
					mes "fazer isso logo, então se você";
					mes "não pode fazer, mas conhece alguém";
					mes "capaz, responsável que possa";
					mes "então por favor";
					mes "avise-o sobre minha situação.";
					close;

				}

			}

		case 5:
			mes "[Vandt]";
			mes "Certamente, leve o";
			mes "tempo que quiser, relaxa,";
			mes "e peça algo";
			mes "quando estiver pronto.";
			close;
		}

	}

	else if ((KielHyreQuest >= 2) && (KielHyreQuest < 6)) {
		mes "[Vandt]";
		mes "Por favor entreque aquela garrafa";
		mes "de vilho que lhe dei para Senhora.";
		mes "^ff0000Lecollane^000000, que deve estar";
		mes "dentro da Academia de Kiel Hyre.";
		mes "Rápido e leve a ela antes que ela";
		mes "possa reclamar sobre a entrega.";
		close;
	}

	else if ((KielHyreQuest == 6) && (KHPubMasterEnd != 1)) {
		mes "[Vandt]";
		mes "Oh, você voltou.";
		mes "Obrigado por fazer aquela";
		mes "entrega. Só me dá um";
		mes "um instante ,então eu posso";
		mes "pagar seu zeny, okay?";
		next;
		switch(select("Eu preciso de mais vinho...")) {

		case 1:
			mes "[Vandt]";
			mes "Oh, você precisa entregar";
			mes "outra garrafa? Certo,";
			mes "deixe-me olhar por aqui, e";
			mes "lhe darei o vinho";
			mes "e seu pagamento.";
			next;
			mes "^3355FFRummage Rummage^000000";
			mes "^3355FFRummage Rummage^000000";
			next;
			mes "[Vandt]";
			mes "Aqui está!";
			mes "Muitíssimo obrigado";
			mes "por me ajudar~";
			getitem 7487,1; //Culinary_Wine
			set zeny,zeny+1000;
			set KHPubMasterEnd,1;
			close;
		}
	}

	else if ((KielHyreQuest > 6) || (KHPubMasterEnd == 1)) {
		mes "[Vandt]";		
		mes "Ei, muitíssimo obrigado";
		mes "por ter me ajudado de";
		mes "última hora. Eu sabia que tinha pedido";
		mes "bem em cima da hora, mas";
		mes "você acabou enviar um salvador";
		mes "de vida! Eu realmente apreciei isso!";
		close;
	}

OnTouch:
	if (KielHyreQuest < 1) {
		mes "[Vandt]";
		mes "Arrrggghhh...";
		mes "Isso não pode ser bom...";
		mes "Isso não é nada bom!";
		mes "O que eu posso fazer?";
		set KielHyreQuest,1;
		close;
	} 
}

//----------------------------------------------------------------------------
// Juno Toast Sales Girl.
//----------------------------------------------------------------------------
yuno,217,114,4	script	Criancinha	96,{
	if (KielHyreQuest < 6) {
		mes "[Cezu]"; 
		mes "Torrada Crocante, Fresca!";
		mes "Se você quiser alguma, venha";
		mes "e compre algumas torradaaaaasss~";
		close;
	}

	else if ((KielHyreQuest == 6) && (KHToastGirlEnd != 3)) {
		if (KHToastGirlEnd < 1) {
			mes "[Cezu]"; 
			mes "Torrada Crocante, Fresca!";
			mes "Se você quiser alguma, venha";
			mes "e compre algumas torradaaaaasss~";
			mes "Oh! Hi hi~ Você quer";
			mes "comprar algumas torradas deliciosas?";
			next;

			switch(select("Estou aqui por Elly","Não, obrigado")) {

			case 1:
				mes "[Cezu]"; 
				mes "Oh, Entendo. Elly deve ter";
				mes "desperdiçado outro lote de";
				mes "ingredientes novamente. bem,";
				mes "ela é uma freguesa regular,";
				mes "então eu realmente quero ajudar, mas";
				mes "não posso fazer nada mesmo.";
				next;
				mes "[Cezu]"; 
				mes "Veja, eu simplesmente fiquei";
				mes "sem ingredientes também!";
				mes "Mas eu não posso mesmo sair";
				mes "para buscar mais. E se";
				mes "pessoas precisarem comprar torradas?";
				mes "Ei, você pode me ajudar?";
				next;
				mes "[Cezu]"; 
				mes "você poderia pegar por favor";
				mes "alguma farinha e ovos para mim";
				mes "no ^3355FFMoinho de Lighthalzen^000000";
				mes "Quando você voltar eu posso";
				mes "dividir os ingredientes e você";
				mes "pode entregar algum para Elly.";
				next;
				mes "[Cezu]"; 
				mes "Eu sei que estou basicamente";
				mes "fazendo você fazer tudo";
				mes "por sua conta, mas por favor tente";
				mes "entender que minhas mãos";
				mes "estão atadas. N-Não me pergunte";
				mes "porque, elas simplesmente estão!";
				set KHToastGirlEnd,1;
				close;

			case 2:
				mes "[Cezu]";
				mes "Okay okay~";
				mes "Por favor volte novamente!";
				close;
			}
		}

		else if (KHToastGirlEnd == 1) {
			mes "[Cezu]";
			mes "Você poderia ir por favor";
			mes "ao Moinho de Lighthalzen";
			mes "e dizer-lhes que Cezu precisa";
			mes "de muita farinha e muitos ovos!";
			mes "Então, traga tudo";
			mes "prá mim o mais rápido que puder~";
			close;
		}

		else if (KHToastGirlEnd == 2) {
			mes "[Cezu]";
			mes "Hey, você voltou com os";
			mes "ingredientes! Muitíssimo obrigada";
			mes "eu realmente precisava deles!";
			mes "Agora por favor leve essa farinha";
			mes "e esses ovos para Elly, e";
			mes "envie lembranças. Até mais~";
			delitem 7488,1; //Delivery_Package
			getitem 7488,1; //Delivery_Package
			set KHToastGirlEnd,3;
			close;
		}

	}

	else if ((KielHyreQuest >= 6) || (KHToastGirlEnd == 3)) {
		//KHToastGirlEnd no longer needed-- deleting.
		set KHToastGirlEnd,0;
		mes "[Cezu]";
		mes "Quente , fresca e";
		mes "crocaaaaannnnteeee torrada!";
		mes "Venham peguem alguma!";
		close;
	}

}

//----------------------------------------------------------------------------
// Lighthalzen WindMill Owner.
//----------------------------------------------------------------------------
lighthalzen,365,300,2	script	Dono do Moinho	46,{
	if (checkweight(7488,1) == 0) {
		mes "[Mills]";
		mes "Hey, você está carregando muitas";
		mes "coisas com você agora. ";
		mes "Ponha sua tralha no Armazen da Kafra";
		mes "se estiver esperando que eu lhe dê";
		mes "alguma coisa. É por isso que você veio";
		mes "aqui ao moinho, não foi?";
		close;
	}

	if (KHToastGirlEnd < 1) {
		mes "[Mills]";
		mes "Ei, que você que?";
		mes "Estou muito ocupado agora";
		mes "então, se importa de voltar";
		mes "mais tarde? Então conversaremos.";
		close;
	}

	else if (KHToastGirlEnd == 1) {
		mes "[Mills]";
		mes "Ei, que cê qué?";
		mes "Você simplesmente me pegou";
		mes "em boa hora,";
		mes "mas se você precisa de algo,";
		mes "é melhor cuspir rápido, antes";
		mes "que as coisas fiquem agitadas de novo.";
		next;

		switch(select("Estou aqui por  Cezu","......")) {

		case 1:
			mes "[Mills]";
			mes "Oh, Cezu da barraca";
			mes "de torradas? Okay,";
			mes "Tenho tudo que";
			mes "aquela garota precisa";
			mes "bem aqui. Tem ovos dentro,";
			mes "então tenha muito cuidado com isso.";
			mes "está pronto prá você...";
			next;
			mes "[Mills]";
			mes "A garota é uma dos meus";
			mes "clientes regulares então você não";
			mes "tem de me pagar ou fazer nenhuma";
			mes "missão extra prá mim. Yeah,";
			mes "Eu sei como outras pessoas tratam";
			mes "vocês aventureiros. Bem até mais.";
			getitem 7488,1; //Delivery_Package
			set KHToastGirlEnd,2;
			close;

		case 2:
			mes "[Mills]";
			mes "......";
			mes "Hm, okay, bem se";
			mes "você precisa de algo,";
			mes "simplesmente faça, eu acho.";
			mes "Cutz, Cutz onde você está?";
			mes "É melhor você não estar enrolando!";
			close;

		}

	}

	else if (KHToastGirlEnd >= 2) {
		mes "[Mills]";
		mes "Aquele Cutz é um pirralho";
		mes "tão preguiçoso. O cara";
		mes "pensa que pode perambular por aí";
		mes "quando ele está em cima da hora...!";
		mes "Ah bem, ele sabe que eu posso achar";
		mes "um assistente melhor. Ele vai aprender...";
		close;
	}

}

//============================================================================
//Kiel Hyre Academy NPCs
//============================================================================

//----------------------------------------------------------------------------
// Girl (Talks about the academy)
//----------------------------------------------------------------------------
yuno_fild08,196,196,5	script	Hanie	102,{
	mes "[Hanie]";
	mes "Oh, eu gostaria de poder estudar";
	mes "na Academia de Kiel Hyre...";
	mes "Todos os formandos conseguem";
	mes "excelentes empregos! Estou quase";
	mes "com ciúmes dos estudantes!";
	next;

	switch(select("Academia Kiel Hyre?")) {

	case 1:
		mes "[Hanie]";
		mes "Oh, a Academia de Kiel Hyre";
		mes "é uma escola fundada por Kiel";
		mes "Hyre, um inventor que se tornou";
		mes "rico por suas estranhas máquinas.";
		mes "Ele decidiu devolver à sociedade";
		mes "construindo essa Academia particular.";
		next;
		mes "[Hanie]";
		mes "De qualquer forma, a escola somente";
		mes "aceitará órfãos que são tão";
		mes "pobres para entrar em qualquer outra";
		mes "escola. Algumas vezes me faz";
		mes "desejar que eu fosse um órfão também!";
		mes "Bem, nem tanto, mas sabe...";
		close;
	}
}


//----------------------------------------------------------------------------
// Academy Security Guards
//----------------------------------------------------------------------------
yuno_fild08,158,194,5	script	Segurança#1::KHAGuard	852,{
	if ((KielHyreQuest < 2) || (KielHyreQuest > 31)) { 
		mes "[Segurança]";
		mes "Desculpe, mas você não está";
		mes "associado à essa instituição,";
		mes "portanto você não está autorizado a";
		mes "entrar na ^FF0000Academia Kiel Hyre^000000.";
		mes "Por favor vá embora se você não tiver";
		mes "horário marcado com a Staff.";
		close;
	}


	else if (KielHyreQuest == 2) { 
		mes "[Segurança]";
	mes "Desculpe, mas você não está";
		mes "associado à essa instituição,";
		mes "portanto você não está autorizado a";
		mes "entrar na ^FF0000Academia Kiel Hyre^000000.";
		mes "Por favor vá embora se você não tiver";
		mes "horário marcado com a Staff.";
		next;
		switch(select("Estou aqui para uma entrega.","......")) {
		case 1:
			mes "[Segurança]";
			mes "Você está aqui para entregar";
			mes "algo? Okay, simplesmente me dê";
			mes "o ^FF0000nome^000000 do recipiente,";
			mes "seguido pelo ^FF0000item^000000 a ser";
			mes "entregue, e eu irei verificar";
			mes "antes de lhe deixar entrar.";
			next;

			input @KHDelivery$;
			if (@KHDelivery$ != "Lecollane") {
				mes "[Segurança]";
				mes "Você veio entregar algum";
				mes "vinho para...para quem? Qual era";
				mes "o nome? Eu...Eu não acho";
				mes "que tenhamos alguém na";
				mes "academia chamado "+@KHDelivery$+"";
				close;
			}

			input @KHDelivery$ ;
			if (@KHDelivery$ != "Vinho de Culinária") {
				mes "[Segurança]";
				mes "Então você está aqui para fazer";
				mes "uma entrega à Sra. Lecollane?";
				mes "O que você trouxe para";
				mes "ela? Algum ^3355FF"+@KHDelivery$+"^000000?";
				next;
				mes "[Segurança]";
				mes "Deixe-me bipá-la antes,";
				mes "e checar para ter certeza";
				mes "de que ela está esperando";
				mes "você. Deixe-me ver agora...";
				next;
				mes "......";
				mes ".........";
				mes "............";
				next;
				mes "[Segurança]";
				mes "Huh. Mrs Lecollane";
				mes "está esperando uma entrega,";
				mes "mas não o item que você";
				mes "disse que trouxe para";
				mes "ela. você deveria checar";

				mes "para ver se não houve alguma confusão...";
				close;
			}

			mes "[Segurança]";
			mes "Muito bem....";
			mes "Então você está aqui para";
			mes "entregar uma garrafa de";
			mes "Vinho para a Sra. Lecollane?";
			mes "Deixe-me bipá-la e";
			mes "confirmar isso rapidamente.";
			next;
			mes "......";
			mes ".........";
			mes "............";
			next;
			mes "[Segurança]";
			mes "Okay, tudo parece";
			mes "certo. Sra. Lecollane";
			mes "está esperando você.";
			mes "Acho que você pode entrar.";
			close2;
			warp "kh_school",71,155;
			end;

		case 2:
			mes "[Segurança]";
			mes "Se você não tiver";
			mes "um agendamento, então";
			mes "não fique vadiando em";
			mes "frente da academia!";
			close;

		}

	}

	else if (KielHyreQuest >= 4) { 
		mes "[Segurança]";
		mes "Oh, você tinha";
		mes "outros negócios dentro";
		mes "da academia? Eu lembro de";
		mes "você de antes, então não";
		mes "deve haver nenhum problema em";
		mes "deixar você voltar lá dentro...";
		close2;
		warp "kh_school",71,155;
		end;
	}

}

yuno_fild08,158,183,7	duplicate(KHAGuard)	Segurança#2	852

//----------------------------------------------------------------------------
// Gossiping Teenagers/Story NPCs
//----------------------------------------------------------------------------
kh_school,57,142,7	script	Estudante::StudentKHQ1	893,3,3,{
	mes "[Laci]";
	mes "Oh, wow! nós normalmente";
	mes "não temos muitos visitantes no";
	mes "campus! Um, você não é";
	mes "um novo membro da faculdade, é?";
	close;

OnTouch:
	mes "[Laci]";
	mes "Hey, Nesha...!";
	mes "você ouviu por quê";
	mes "Aaci não tem vindo";
	mes "para aula por enquanto?";
	next;
	mes "[Gui Nesha]";
	mes "Isso mesmo eu não tenho";
	mes "visto Aaci faz um tempo.";
	mes "Algo aconteceu?";
	next;
	mes "[Laci]";
	mes "É porque....";
	mes "Aaci viu um fantasma assustador!";
	mes "É cem por cento verdade";
	mes "Ouvi sobre isso de,";
	mes "bem, você conhece minhas fontes.";
	next;
	mes "[Gui Nesha]";
	mes "...Quê...?";
	mes "Ah, vai!!!";
	mes "Cai fora da cidade.";
	close;
}

kh_school,57,139,1	script	Estudante::StudentKHQ2	893,{
	mes "[Gui Nesha]";
	mes "Não estamos um pouquinho";
	mes "velhos para ficar falando";
	mes "desse tipo de coisa? Você";
	mes "sabe, rumores e fantasmas";
	mes "estórias que não fazem sentido?";
	mes "Qualé, Laci, sai dessa!";
	emotion e_swt2;
	close;
}

//----------------------------------------------------------------------------
// Mrs. Lecollane
//----------------------------------------------------------------------------
kh_school,176,60,4	script	Senhora::LadyKHQ	101,{
	if (KielHyreQuest < 2) {
		mes "[Srs. Lecollane]";
		mes "Algum problema?";
		mes "Pessoas de fora não são permitidas";
		mes "a vir aqui, por favor saia.";
		close;
	}

	else if (KielHyreQuest == 2) { 
		mes "[Sra. Lecollane]";
		mes "Oh, Olá. Ah!";
		mes "você veio para";
		mes "trazer meu vinho? O";
		mes "segurança chamou e";
		mes "mencionou que você estava vindo.";
		next;

		switch(select("Sim, é isso mesmo!","Er, d-desculpe!")) {

		case 1:
			mes "[Sra. Lecollane]";
			mes "Bem, você veio um pouquinho";
			mes "mais tarde do que eu imaginava, mas";
			mes "acho que não adianta nada.";
			mes "Acho que a espera simplesmente";
			mes "alegrou minha antecipação";
			mes "por essa garrafa de vi--";
			next;
			mes "^3355FF*Cling! Crrrack!*^000000";
			next;
			mes "[Sra. Lecollane]";
			mes "Elly? Elly você";
			mes "quebrou algo novamente?!";
			mes "Você tem de ter mais cuidado!";
			mes "Se você não terminar de cozinhar aqueles";
			mes "biscoitos até o fim do dia, suas";
			mes "notas semestrais irão sofrer!";
			next;
			mes "[Elly]";
			mes "M-Mas eu só...";
			next;
			mes "[Mrs. Lecollane]";
			mes "^FF0000Elly^000000!!";
			next;
			mes "[Elly]";
			mes "......";
			mes "Sim, Sra. Lecollane.";
			next;
			mes "[Sra. Lecollane]";
			mes "*Ahem* Com licença.";
			mes "Você poderia deixar";
			mes "o vinho ali? você";
			mes "pode ir agora, e por favor";
			mes "não fique vagando desnecessáriamente";
			mes "pela academia.";
			delitem 7487,1; //Culinary_Wine
			set KielHyreQuest,4;
			close;

		case 2:
			mes "[Sra. Lecollane]";
			mes "Hm...?";
			mes "Acho que devo";
			mes "estar enganada. Me";
			mes "desculpe, Achei que você";
			mes "fosse outra pessoa.";
			close;
		}
		return;
	}

	else if (KielHyreQuest == 4) {
		mes "[Mrs Lecollane]";
		mes "Bem, nosso negócios está";
		mes "completo, então você poderia";
		mes "por favor deixar o campus";
		mes "assim que puder? *Sigh*";
		mes "Não acredito que nosso futuro";
		mes "está nas mãos dessas garotas...";
		close;
	}
}

//----------------------------------------------------------------------------
// Elly (In school)
//----------------------------------------------------------------------------
kh_school,179,39,1	script	Estudante Bonita	895,{
	set @now_weight,MaxWeight-Weight;
	if (@now_weight < 2000) {
		mes "[Elly]";
		mes "Desculpe, mas você poderia";
		mes "colocar algumas das suas coisas no";
		mes "seu Armazen da kafra antes ou";
		mes "algo assim? Eu não posso mesmo";
		mes "te ajudar enquanto você estiver";
		mes "carregando tanta coisa.";
		close;
	}

	cutin "kh_elly01",2;
	if (KielHyreQuest < 4) { 
		cutin "kh_elly03",2;
		mes "[Elly]";
		mes "W-wah! Oh...!";
		mes "*Phew* Essa foi por pouco,";
		mes "eu quase os derrubei";
		mes "novamente! Por quê eu tenho tanta";
		mes "dificuldade em manusear ingredientes?";
		goto KH_Elly_end;
	}

	else if (KielHyreQuest == 4) { 
		cutin "kh_elly03",2;
		mes "[Elly]";
		mes "Oh não, o que eu devo";
		mes "fazer? *Sob* O-o quê";
		mes "eu vou fazer? *sniff*";
		next;
		switch(select("O que aconteceu?","......")) {

		case 1:
			mes "[Elly]";
			mes "Eu...Eu tenho de terminar de assar";
			mes "essa leva de biscoitos até";
			mes "o fim do dia, mas então eu derrubei";
			mes "todos os ingredientes no";
			mes "chão. Eu não sei como eu posso";
			mes "assar aqueles biscoitos agora...";
			next;
			switch(select("O que posso fazer para ajudar-lhe?","Oh, Sinto muito.")) {

			case 1: 
				cutin "kh_elly02",2;
				mes "[Elly]";
				mes "O que foi...?";
				mes "Você realmente me ajudará?";
				mes "Isso é maravilhoso!";
				mes "Obrigada! Muitíssimo obrigada!";
				next;
				L_Accept:
				cutin "kh_elly04",2;
				mes  "[Elly]";
				mes "Bem, acho que a única maneira";
				mes "de eu assar esses biscoitos é";
				mes "conseguir alguns ingredientes novos.";
				mes "Desculpe eu ser um peso,";
				mes "mas se você não se oferecesse para me";
				mes "ajudar, então eu não teria a quem pedir!";
				next;
				mes "[Elly]";
				mes "Você não entende o quão";
				mes "importante é de eu assar";
				mes "esses biscoitos... Se eu não";
				mes "terminar essa tarefa, então";
				mes "a Sra. Crank vai me reprovar por";
				mes "todo o semestre!";
				next;
				cutin "kh_elly03",2;
				mes "[Elly]";
				mes "Okay, eu preciso me acalmar";
				mes "Acho que posso fazer";
				mes "isso com sua ajuda.";
				mes "Você poderia me fazer";
				mes "esse enorme favor e me trazer";
				mes "todos esses ingredientes?";
				next;
				cutin "kh_elly01",2;
				mes "[Elly]";
				mes "^3355FF1 Vinho de Culinária^000000";
				mes "^3355FF7 Leites^000000";
				mes "^3355FF5 Cacaos^000000";
				mes "^3355FF2 Queijos^000000";
				mes "^3355FF1 Ovo^000000, e";
				mes "^3355FF1 Saco de Farinha^000000";
				next;
				mes "[Elly]";
				mes "Vejamos...Você pode";
				mes "conseguir o vinho no bar em";
				mes "Juno, Cacaos caçando";
				mes "Yoyos, e pode pegar a farinha";
				mes "e ovos da garota que tem uma";
				mes "barraca de torradas em Juno.";
				next;
				mes "[Elly]";
				mes "boa sorte em pegar";
				mes "tudo, e espero que";
				mes "você volte logo com esses";
				mes "ingredientes de biscoitos";
				mes "o mais rápido que puder, okay?";
				set KielHyreQuest,6;
				goto KH_Elly_end;

			Case 2:
				mes "[Elly]";
				mes "O que, você não vai";
				mes "para essa escola, você";
				mes "vai? V-Você é um";
				mes "daqueles aventureiros, certo?";
				next;
				switch(select("Sim, está correto.")) {

					mes "Escuta, eu acredito que você";
					mes "provavelmente tem seus próprios";
					mes "planos, mas não acha que";
					mes "você pode me ajudar com esse";
					mes "enorme problema que eu tenho?";
					next;
					switch(select("Aceito","Recuso")) {
		
					case 1:
						//bigsmile
						mes "Que maravilhoso!";
						mes "Obrigada! Obrigada";
						mes "mesmo! Era para eu";
						mes "terminar de assar esse lote de";
						mes "biscoitos logo, mas eu derrubei";
						mes "todos os ingredientes...";
						next;
						goto L_Accept;

					case 2:
						mes "["+strcharinfo(0)+"]";
						mes "Vou cair fora daqui.";
						next;
						emotion e_sob;
						mes "E-Espere...!";
						mes "volte, você";
						mes "n-não...! Eu realmente";
						mes "preciso de uma ajuda!";
						goto KH_Elly_end;

					}

				}

			}

		case 2:
			mes "*Sob*...";
			goto KH_Elly_end;
		}

	}

	else if (KielHyreQuest == 6) {
		//519 - Milk; 548 - Cheese; 7182 - Cacao; 7487 - Culinary_Wine; 7488 - Delivery_Package
		if ((countitem(519) < 7) || (countitem(548) < 2) || (countitem(7182) < 5) || (countitem(7487) < 1) || (countitem(7488) < 1)) {
			mes "[Elly]";
			mes "Deixe-me ver, você gostaria";
			mes "que eu lhe lembrasse";
			mes "quais ingredientes eu preciso?";
			mes "Por favor traga essas coisas o";
			mes "mais rápido que puder para eu";
			mes "assar rapidamente esses biscoitos~";
			next;
			mes "[Elly]";
			mes "^3355FF1 vinho de Culinária^000000";
			mes "^3355FF7 Leites^000000";
			mes "^3355FF5 Cacaos^000000";
			mes "^3355FF2 Queijos^000000";
			mes "^3355FF1 Ovo^000000, and";
			mes "^3355FF1 Saco de Farinha^000000";
			next;
			mes "[Elly]";
			mes "Vejamos...Você pode";
			mes "pegar o vinho no bar em";
			mes "Juno, Cacaos caçando";
			mes "Yoyos, e vocÊ pode pegar farinha";
			mes "e ovos da garota que tem";
			mes "uma barraca de torradas em Juno.";
			goto KH_Elly_end;
		}
		else {
			emotion e_ho;
			cutin "kh_elly02",2;
			mes "[Elly]";
			mes "Hooray! Finalmente eu tenho";
			mes "tudo que eu preciso! Isso é";
			mes "ótimo! Oh, você poderia por favor";
			mes "aguardar um instante enquanto eu asso";
			mes "esses biscoitos?  Não deve demorar";
			mes "muito, então aguenta mais um pouco.";
			set KielHyreQuest,8;
			//KHPubMasterEnd no longer needed-- deleting.
			set KHPubMasterEnd,0;
			delitem 519,7; //Milk
			delitem 548,2; //Cheese
			delitem 7182,5; //Cacao
			delitem 7487,1; //Culinary_Wine
			delitem 7488,1; //Delivery_Package
			goto KH_Elly_end;

		}

	}

	else if (KielHyreQuest == 8) {
		cutin "kh_elly01",2;
		mes "[Elly]";
		mes "Tadanh! Consegui!";
		mes "Estão finalmente prontos!";
		mes "''Biscoitos Especiais da Elly~''";
		mes "Eu gostaria que você pegasse alguns";
		mes "como agradecimento por ter me ajudado";
		next;
		mes "[Elly]";
		mes "Desculpe, mas eu estava tão";
		mes "preocupada em assar";
		mes "esses biscoitos que eu nem";
		mes "perguntei pelo seu nome. Eu sou";
		mes "^FF0000Ellyja^000000, mas todos me chamam,";
		mes "''Elly.'' Qual o seu nome?";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "^3355FF"+strcharinfo(0)+"^000000.";
		mes "É ^3355FF"+strcharinfo(0)+"^000000.";
		next;
		cutin "kh_elly02",2;
		mes "[Elly]";
		mes ""+strcharinfo(0)+"?";
		mes "...que nome! É maravilhoso!";
		set KielHyreQuest,10;
		getitem 538,5; //Well_Baked_Cookie
		goto KH_Elly_end;
	}

	else if (KielHyreQuest == 10) {
		cutin "kh_elly01",2;
		mes "[Elly]";
		mes "Desculpe, mas eu tenho";
		mes "outro favor para lhe pedir";
		mes "se você não se importar em me ajudar";
		mes "novamente. Não se preocupe,";
		mes "você não precisa se apressar";
		mes "tanto como fez da outra vez.";
		next;

		switch(select("O que você precisa?","Desculpe, mas estou muito ocupado...")) {

		case 1:
			mes "[Elly]";
			mes "Sabe como você me ajudou";
			mes "a assar esses biscoitos?";
			mes "É a primeira vez que fui capaz";
			mes "de fazer sem queimá-los!";
			mes "Sei que meu avô ficaria";
			mes "orgulhoso de mim!";
			next;
			mes "[Elly]";
			mes "Eu realmente quero que meu avô";
			mes "experimente esses biscoitos que eu assei,";
			mes "mas os biscoitos já estarão estragados";
			mes "na hora que eu puder sair do";
			mes "campus. você entregaria esses";
			mes "biscoitos pro meu avô prá mim?";
			next;

			switch(select("Claro","Estou ocupado.")) {

			case 1:
				cutin "kh_elly02",2;
				mes "[Elly]";
				mes "Oh, "+strcharinfo(0)+"!";
				mes "Muitíssimo obrigada, eu sabia";
				mes "que você entenderia! Voce poderia";
				mes "por favor levar esses biscoitos para";
				mes "ele na ^FF0000Cabana de Kiel Hyre^000000?";
				next;
				mes "[Elly]";
				mes "Ah, sim! Eles são realmente";
				mes "cuidadosos sobre visitantes e";
				mes "mantendo estranhos fora da";
				mes "propriedade, mas se você mencionar";
				mes "meu nome, eles lhe deixarão entrar.";
				mes "Certo então, até mais~";
				set KielHyreQuest,12;
				goto KH_Elly_end;

			case 2:
				cutin "kh_elly03",2;
				mes "[Elly]";
				mes "Oh, um...";
				mes "okay, Desculpe se";
				mes "lhe aborreci...";
				goto KH_Elly_end;
			}


		case 2:
			cutin "kh_elly03",2;
			mes "[Elly]";
			mes "Oh, um...";
			mes "okay, Desculpe se";
			mes "lhe aborreci...";
			goto KH_Elly_end;
		}
	}

	else if (KielHyreQuest == 12) {
		mes "[Elly]";
		mes "Oh, você não sabe onde";
		mes "encontrar a cabana de Kiel Hyre?";
		mes "É bem ao norte dessa";
		mes "academia. Por favor entregue meus";
		mes "biscoitos para meu avô, e";
		mes "diga a ele que tenho muitas saudades.";
		goto KH_Elly_end;

	}

	else if (KielHyreQuest == 14) {
		mes "[Elly]";
		mes "Hm? avô não está em";
		mes "casa? Que estranho, ele";
		mes "não mencionou nada sobre";
		mes "nenhuma viagem de negócios.Achei";
		mes "que estaria em casa o dia todo...";
		next;
		cutin "kh_elly04",2;
		mes "[Elly]";
		mes "você voltaria na";
		mes "cabana dele mais uma vez? Aqui,";
		mes "você pode usar essa chave da cabana.";
		mes "Assim, você pode simplesmente";
		mes "entrar e falar com ele~";
		getitem 7489,1; //Cottage Key
		set KielHyreQuest,16;
		goto KH_Elly_end;
	}

	else if ((KielHyreQuest >= 14) && (KielHyreQuest < 20)) {
		mes "[Elly]";
		mes "Isso é tão estranho...";
		mes "Achei que meu avô";
		mes "disse que ficaria em";
		mes "casa o dia todo...";
		goto KH_Elly_end;
	}

	else if (KielHyreQuest == 20) {
		mes "[Elly]";
		mes "Hmmm...?";
		mes "O que é isso,";
		mes "uma carta para mim?";
		next;
		mes "^3355FFElly abriu o envelope^000000";
		mes "^3355FFe começou a ler a carta^000000";
		next;
		mes "Querida Elly";
		mes "^FFFFFF_^000000";
		mes "Tenho algo a conversar";
		mes "com meu filho Kiehl, então estou";
		mes "partindo para encontrá-lo.";
		mes "Se não ouvir falar de mim";
		mes "em 7 dias após eu lhe ter escrito";
		mes "é possível que eu esteja";
		mes "em perigo. Não confie em ninguém";
		mes "na Academia, Elly.";
		mes "Deixei algo para você";
		mes "no Escritório.";
		next;
		cutin "kh_elly03",2;
		mes "[Elly]";
		mes "O quê? Oh não, fazem";
		mes "dez dias desde que ele escreveu";
		mes "essa carta! Ah, então isso";
		mes "quer dizer que ele está em perigo?!";
		mes "Oh não, o que devo fazer?";
		delitem 7490,1; //Letter_to_Elly
		set KielHyreQuest,22;
		goto KH_Elly_end;
	}

	else if (KielHyreQuest == 22) {
		mes "[Elly]";
		mes "......";
		mes ".........";
		mes "............";
		next;
		switch(select("Sobre seu Avô","Me fale sobre Kiehl","O que há com essa academia?")) {

		case 1:
			mes "[Elly]";
			mes "Oh! Meu avó é";
			mes "fundador de Kiel Hyre, e";
			mes "o Diretor Executivo da fundação";
			mes "Kiel Hyre. Ele parece";
			mes "fechado e de coração frio";
			mes "mas na verdade é muito bom!";
			next;
			mes "[Elly]";
			mes "Nós não temos relação de";
			mes "sangue, mas ele tem cuidado";
			mes "de mim desde que";
			mes "eu perdi meus pais. Oh,";
			mes "Vovô, onde você está?";
			mes "Estou ficando preocupada!";
			goto KH_Elly_end;

		case 2:
			mes "[Elly]";
			mes "Kiehl? É o filho";
			mes "do meu avô...";
			mes "Eu não o conheço muito";
			mes "bem, e somente o vi";
			mes "uma vez num evento da academia.";
			next;
			mes "[Elly]";
			mes "Mmm, ele é um rapaz";
			mes "bonitão, com pele clara, cabelos";
			mes "brancos, e seu frio, feroz olhar";
			mes "Muitas de minhas colegas de classe";
			mes "veneram Kiehl porque ele é";
			mes "também um gênio dos negócios~";
			next;
			mes "[Elly]";
			mes "É estranho pensar...";
			mes "Não tenho nem idéia porque meu";
			mes "avô e Kiehl não saem";
			mes "juntos. Ambos são realmente";
			mes "bons no que eles fazem.";
			goto KH_Elly_end;

		case 3:
			mes "[Elly]";
			mes "Bem, eu sei que a segurança";
			mes "aqui é bem rígida, mas";
			mes "é porque tudo aqui";
			mes "é tão luxuoso e";
			mes "caro, sabe~";
			next;
			mes "[Elly]";
			mes "Também temos um currículo";
			mes "bem especial onde";
			mes "você aprende mais sobre o que";
			mes "você quer. Pessoalmente, eu quero";
			mes "me tornar uma mulher de grande carreira,";
			mes "como ^3355FFSenhorita Allysia^000000. Heh heh~";
			next;
			mes "[Elly]";
			mes "Esse lugar certamente";
			mes "não é como outras escolas.";
			mes "Você já sabe disso";
			mes "Sim, tudo é feito para se";
			mes "encaixar às necessidades dos estudantes.";
			next;
			mes "[Elly]";
			mes "Recentemente, achava?";
			mes "Algo realmente estranho";
			mes "tem acontecido. Todas minhas colegas";
			mes "de classe têm medo de sair";
			mes "sozinhas por aí.";
			next;
			cutin "kh_elly02",2;
			mes "[Elly]";
			mes "Mas eu ficarei bem!";
			mes "Você estará lá para";
			mes "me resgatar do perigo";
			mes "certo, "+strcharinfo(0)+"?";
			next;
			switch(select("Quem é Senhorita Allysia?","Incidentes estranhos?")) {

			case 1:
				mes "[Elly]";
				mes "Oh, Senhorita Allysia é";
				mes "a secretária do vovô~";
				mes "Ela é tão linda e";
				mes "meu avô realmente";
				mes "confia tudo à ela!";
				goto KH_Elly_end;

			case 2:
				cutin "kh_elly04",2;
				mes "[Elly]";
				mes "Bem, "+strcharinfo(0)+"...";
				mes "Eu não deveria dizer";
				mes "à ninguém fora da escola,";
				mes "mas posso confiar em você! Sabe...";
				mes "Estamos assombrados por um fantasma!";
				next;
				mes "[Elly]";
				mes "Sei que parece doido,";
				mes "mas esse fantasma vaga pelo";
				mes "campus, e amaldiçoa suas vítimas,";
				mes "deixando-as tão fracas e sem vida.";
				mes "Aconteceu com minha colega de quarto,";
				mes "biquine. É como se ela fosse uma estátua.";
				next;
				mes "[Elly]";
				mes "Eu escapei para a enfermaria";
				mes "para vê-la e ela...";
				mes "Ela não podia fazer nada!";
				mes "O que aconteceria se o";
				mes "fantasma decidisse me amaldiçoar?!";
				next;
				cutin "kh_elly02",2;
				mes "[Elly]";
				mes "Sabe o quê...?";
				mes "Se eu for amaldiçoada";
				mes "por aquele fantasma, simplesmente grite";
				mes "''^FF0000ACORDE, ELLY!^000000''";
				mes "Que vai me acordar com certeza!";
				set KielHyreQuest,24;
				goto KH_Elly_end;

			}

		}

	}

	else if (KielHyreQuest == 24) {
		cutin "kh_elly04",2;
		mes "[Elly]";
		mes "Arg, Estou numa má situação!";
		mes "Tenho de terminar meu";
		mes "dever de casa antes do combinado!";
		mes "Sim, tenho de ir ver";
		mes "a Sra. Lecollane agora.";
		next;		
		goto KH_Step26;
	}

	else if (KielHyreQuest == 26) {
	KH_Step26:
		mes "[Elly]";
		mes "Diga, "+strcharinfo(0)+",";
		mes "se estiver tudo be, você poderia";
		mes "descobrir o que meu";
		mes "avô deixou para mim no";
		mes "^FF0000depósito da cabana^000000?";
		mes "Você é o único que posso confiar!";
		next;
		mes "[Elly]";
		mes "De qualquer forma, te vejo mais tarde";
		mes "ao anoitecer. Por favor venha";
		mes "ao meu ^FF0000dormitório^000000. Um, os";
		mes "dormitórios são na igreja bem";
		mes "atrás da academia, okay?";
		next;
		mes "[Elly]";
		mes "Meu quarto é nos fundos,";
		mes "e é no ^FF0000Segundo Andar^000000";
		mes "^FF0000no lado esquerdo^000000. Por favor use";
		mes "uma escada para subir, okay?";
		mes "Deixarei minha janela aberta";
		mes "para você, então venha, okay?";
		next;
		mes "[Elly]";
		mes "Rápido, rápido, a";
		mes "professora está vindo!";
		set KielHyreQuest,26;
		goto KH_Elly_end;
	}

	else if (KielHyreQuest > 26) {
		mes "[Elly]";
		mes "Diga, "+strcharinfo(0)+",";
		mes "se está tudo bem, você poderia";
		mes "por favor encontrar o que meu";
		mes "avô deixou para mim no";
		mes "^FF0000escritório da cabana^000000?";
		mes "você é o único que posso confiar!";
		next;
		mes "[Elly]";
		mes "De qualquer forma, te vejo mais tarde";
		mes "ao anoitecer. Por favor venha";
		mes "ao meu ^FF0000dormitório^000000. Um, os";
		mes "dormitórios são na igreja bem";
		mes "atrás da academia, okay?";
		next;
		mes "[Elly]";
		mes "Meu quarto é nos fundos,";
		mes "e é no ^FF0000Segundo Andar^000000";
		mes "^FF0000no lado esquerdo^000000. Por favor use";
		mes "uma escada para subir, okay?";
		mes "Deixarei minha janela aberta";
		mes "para você, então venha, okay?";
		next;
		mes "[Elly]";
		mes "Rápido, rápido, a";
		mes "professora está vindo!";
		goto KH_Elly_end;
	}

	KH_Elly_end:
		close2;
		cutin "",255;
		end;
}

//----------------------------------------------------------------------------
// Elly's Window 
//----------------------------------------------------------------------------
yuno_fild08,69,185,0	script	Janela::WindowKHQ1	111,{
	if ((KielHyreQuest <= 28) || (KielHyreQuest >= 46)){
		mes "^3355FFEsse deve ser o quarto de Elly.^000000";
		mes "^3355FFParece que não há ninguém^000000";
		mes "^3355FFlá dentro então provavelmente^000000";
		mes "^3355FFela ainda não voltou. Por enquanto^000000";
		mes "^3355FFvocê poderia tentar encontrar o que^000000";
		mes "^3355FFo avô dela deixou para ela^000000";
		mes "^3355FFno escritóro da cabana deles.^000000";
		close;
	}

	if (KielHyreQuest >= 30) {
		mes "^3355FFEssa janela um pouco aberta^000000";
		mes "^3355FFdeve levar ao quarto de Elly.^000000";
		mes "^3355FFAinda que ela tenha lhe pedido para^000000";
		mes "^3355FFencontrar uma escada e entrar pela^000000";
		mes "^3355FFjanela dela, você provavelmente não vai^000000";
		mes "^3355FFachar nenhuma. Você pode ser capaz^000000";
		mes "^3355FFde subir por aquele cano de água...^000000";
		next;
		switch(select("Subir pelo cano de água","Encontrar outra maneira")) {

		case 1:
			set @KHClimbAttempt,rand(1,5);
			if (@KHClimbAttempt == 1) {
				mes "^3355FFVocê subiu pelo^000000";
				mes "^3355FFcano de água e se esgueirou^000000";
				mes "^3355FFno quarto de Elly com sucesso.^000000";
				close2;
				warp "kh_school",185,185;
				end;
			}

			else {
				mes "^3355FFVocê tentou subir^000000";
				mes "^3355FFno cano de água, mas^000000";
				mes "^3355FFacabou falhando^000000";
				mes "^3355FFe batendo sua cabeça^000000";
				percentheal -10,0;
				close;
			}

		case 2:
			mes "^3355FFDeve haver alguma^000000";
			mes "^3355FFoutra maneira de entrar no^000000";
			mes "^3355FFQuarto de Elly, além de^000000";
			mes "^3355FFsubindo por esse cano de água...^000000";
			close;

		}

	}

}

//----------------------------------------------------------------------------
// Elly (In Dormitory)
//----------------------------------------------------------------------------
kh_school,178,180,5	script	Elly	895,{
	set @now_weight,MaxWeight-Weight;
	if (@now_weight < 2000) {
		mes "^3355FF- Espere!! -";
		mes "- Você está carregando muitos itens";
		mes "- e etá incapaz de aceitar mais nenhum. -";
		mes "- Por favor abra algum espaço";
		mes "- no seu inventario antes de retornar. -^000000";
		close;
	}

	if (KielHyreQuest < 30) {
		mes "[Elly]";
		mes "Oh~!";
		mes "Quem é você!";
		mes "como chegou aqui? Por favor saia";
		close2;
		percentheal -99,0;
		warp "yuno_fild08",100,100;
		end;
	}

	else if (KielHyreQuest == 32) {
		mes "[Elly]";
		mes "......";
		mes ".........";
		mes "............";
		next;
		mes "^3355FFElly parece ter sido^000000";
		mes "^3355FFamaldiçoada e está^000000";
		mes "^3355FFcompletamente imóvel e^000000";
		mes "^3355FFsem vida. Você tem de^000000";
		mes "^3355FFtentar algo, mas o quê?^000000";
		next;

		switch(select("Acordá-la sacodindo-a.","Acordá-la gritando.","Ignorar")) {

		case 1:
			mes "^3355FFVocê pega Elly pelos^000000";
			mes "^3355FFombros e tenta fazer com que^000000";
			mes "^3355FFela responda com uma sacodida^000000";
			mes "^3355FFviolenta de todo o corpo dela.^000000";
			next;
			mes "["+strcharinfo(0)+"]";
			mes "Elly? Elly? não!";
			mes "Volte para nós!";
			next;
			mes "^3355FFElly não está respondendo...^000000";
			close;

		case 2:
			input @KHInput$;
			if (@KHInput$ == "Acorde Elly!") {
				mes "[Elly]";
				mes ".........";
				mes "^3355FFAssim que você disse aquelas^000000";
				mes "^3355FFpalavras, uma ^000000Pequena Chave Dourada^000000";
				mes "^3355FFe um ^000000Broche^3355FF caíram das mãos de^000000";
				mes "^3355FFElly. Parece que ela acordou^000000";
				mes "^3355FFmas somente por um instante.^000000";
				getitem 7493,1; //Golden_Key
				getitem 7494,1; //Exquisite_Button
				set KielHyreQuest,34;
				close;
			}

			else {
				mes "[Elly]";
				mes "......";
				mes ".........";
				mes "............";
				next;
				mes "^3355FFElly não está respondendo...^000000";
				close;
			}

		case 3:
			mes "^3355FFTudo bem.^000000";
			mes "^3355FFMas cedo ou tarde,^000000";
			mes "^3355FFvocê deve tentar quebrar^000000";
			mes "^3355FFa maldição jogada em Elly.^000000";
			close;

		}

	}

	else if (KielHyreQuest == 34) {
		if (countitem(7491) < 1) {
			//Missing text, needs another run through.
			mes "^3355FFTalvez a chave dourada^000000";
			mes "destranque algo no^000000";
			mes "escritório. Vamos dar uma olhada.^000000";
			close;
		}
		else {
			mes "^3355FFParece que a chave dourada^000000";
			mes "^3355FFde Elly cabe na^000000";
			mes "^3355FFfechadura em uma^000000";
			mes "^3355FFCaixa Cinza que você achou dentro^000000";
			mes "^3355FFDa cabana em Kiel Hyre.^000000";
			next;
			mes "^3355FFVocê conseguiu abrir a^000000";
			mes "^3355FFCaixa cinza, com a Chave Dourada,^000000";
			mes "^3355FFe encontrou um Cartão de Acesso Azul,^000000";
			mes "^3355FFjunto com um bilhete dobrado dentro^000000";
			mes "^3355FFda Caixa Cinza. Você rapidamente lê^000000";
			mes "^3355FFo conteúdo do bilhete...^000000";
			next;
			mes "Querida Elly,";
			mes "Kiehl finalmente quebrou o tabu,";
			mes "e tentou transformar vocês";
			mes "em algo horrível.";
			mes "^FFFFFF_^000000";
			mes "Quando você ler isso,";
			mes "minha vida provavelmente está em perigo.";
			mes "Até onde viverei, dependerá de você.";
			mes "^FFFFFF_^000000";
			mes "Você já vai descobrir se você";
			mes "encontrar Puppet, mas quero lhe dizer";
			mes "eu mesmo: você não é humana.";
			mes "Você descobrirá os detalhes se você";
			mes "entrar na fábrica usando a";
			mes "entrada perto da sepultura próxima";
			mes "da igreja. Então quero";
			mes "que você encontre Allysia dentro";
			mes "da sala secreta da fábrica.";
			mes "Eu registrei seu nome no";
			mes "sistema de segurança dela, então não";
			mes "se preocupe. Felizmente, Allysia virá";
			mes "então me salvar...";
			mes "^FFFFFF_^000000";
			mes "Desculpe por isso,";
			mes "Vovô";
			getitem 7495,1; //Blue_Keycard
			delitem 7491,1; //Iron_Box
			set KielHyreQuest,36;
			close;
		}

	}

	else if (KielHyreQuest >= 36) {
		mes "^3355FFAqui é onde você^000000";
		mes "^3355FFdescobriu o bilhete^000000";
		mes "^3355FFtrancado dentro da Caixa Cinza.^000000";
		mes "^3355FFA seguinte mensagem estava^000000";
		mes "^3355FFescrita no bilhete pelo avô^000000";
		mes "^3355FFde Elly, Kiel Hyre.^000000";
		next;
		mes "Querida Elly,";
		mes "Kiehl finalmente quebrou o tabu,";
		mes "e tentou transformar vocês";
		mes "em algo horrível.";
		mes "^FFFFFF_^000000";
		mes "Quando você ler isso,";
		mes "minha vida provavelmente está em perigo.";
		mes "Até onde viverei, dependerá de você.";
		mes "^FFFFFF_^000000";
		mes "Você já vai descobrir se você";
		mes "encontrar Puppet, mas quero lhe dizer";
		mes "eu mesmo: você não é humana.";
		mes "Você descobrirá os detalhes se você";
		mes "entrar na fábrica usando a";
		mes "entrada perto da sepultura próxima";
		mes "da igreja. Então quero";
		mes "que você encontre Allysia dentro";
		mes "da sala secreta da fábrica.";
		mes "Eu registrei seu nome no";
		mes "sistema de segurança dela, então não";
		mes "se preocupe. Felizmente, Allysia virá";
		mes "então me salvar...";
		mes "^FFFFFF_^000000";
		mes "Desculpe por isso,";
		mes "Vovô";
		close;
	}

}

//----------------------------------------------------------------------------
// Cookie Basket
//----------------------------------------------------------------------------
kh_school,175,175,0	script	Cesta de Biscoitos	111,{
	if (KielHyreQuest == 30) {
		mes "^3355FFEssa deve ser^000000";
		mes "^3355FFa Cesta de Biscoitos de Elly.^000000";
		mes "^3355FFParece que há um^000000";
		mes "^3355FFbilhete dobrado dentro^000000";
		mes "^3355FFno meio dos biscoitos.^000000";
		next;

		switch(select("Ler o Bilhete","Ignorar")) {

		case 1:
			mes ""+strcharinfo(0)+", socorro!";
			mes "Tem esse cara vestido de";
			mes "preto que está andando por aí,";
			mes "e jogando essa magia estranha!";
			mes "É ele que tem feito as";
			mes "pessoas frias e sem vida como";
			mes "bonecos! Estou assustada!";
			mes "^FFFFFF_^000000";
			mes "Espero que você pegue esse bilhete...";
			mes "ele correu atrás de mim,mas me tranquei";
			mes "no meu quarto. Vou deixar";
			mes "minha janela aberta assim";
			mes "você ainda pode me encontrar. Espero que";
			mes "ele não jogue a maldição dele em mim!";
			set KielHyreQuest,32;
			close;

		case 2:
			mes "^3355FFAquele bilhete provavelmente^000000";
			mes "^3355FFnão foi escrito para^000000";
			mes "^3355FFvocê de qualquer forma.^000000";
			close;

		}
	}

	else if (KielHyreQuest >= 32) {
		mes "^3355FFEsses biscoitos não estão^000000";
		mes "^3355FFestragados ainda, mas eles não^000000";
		mes "^3355FFestão mais quentes. Se eles não^000000";
		mes "^3355FFestão na temperatura do quarto,^000000";
		mes "^3355FFentão estão um pouco frios.^000000";
		close;
	}
	end;
}

//----------------------------------------------------------------------------
// Elly's Window (In Dormitory)
//----------------------------------------------------------------------------
kh_school,188,185,0	script	Janela::WindowKHQ2	111,{
	warp "yuno_fild08",69,183;
	end;
}

//----------------------------------------------------------------------------
// Grave/Kiel Hyre dungeon entry
//----------------------------------------------------------------------------
yuno_fild08,72,170,0	script	Sepultura	111,{
	if (KielHyreQuest < 36) {
		//Missing text, needs another run through.
		mes "^3355FFÉ só uma sepultura.^000000";
		mes "^3355FFPode ser importante^000000";
		mes "^3355FFpara você mais tarde, mas agora^000000";
		mes "^3355FFnão é lá aquela^000000";
		mes "^3355FFajuda para você.^000000";
		close;
	}

	else if (KielHyreQuest == 36) {
		if (countitem(7492) < 1) {
			
			mes "^3355FFHá uma porta secreta^000000";
			mes "^3355FFpróxima à essa sepultura. Parece^000000";
			mes "^3355FFque há algum tipo de^000000";
			mes "^3355FFslot e um teclado numérico^000000";
			mes "^3355FFinstalado na porta.^000000";
			close;
		}

		else {
			mes "^3355FFHá uma porta secreta^000000";
			mes "^3355FFpróxima à essa sepultura. Parece^000000";
			mes "^3355FFque há algum tipo de^000000";
			mes "^3355FFslot e um teclado numérico^000000";
			mes "^3355FFinstalado na porta.^000000";
			next;
			mes "^3355FFO que você deveria^000000";
			mes "^3355FFinserir no slot?^000000";
			next;

			input @KHInput$;

			if (@KHInput$ == "Cartão de Acesso Amarelo") {
				mes "^3355FFUm barulho de confirmação eletrônica^000000";
				mes "^3355FFaciona-se assim que você insere^000000";
				mes "^3355FFo Cartão de Acesso Amarelo, seguido por^000000";
				mes "^3355FFuma voz anônima que pergunta:^000000";
				next;
				mes "[Sistema de Segurança]";
				mes "Por favor entre a senha.";
				next;

				input @KHInput$;

				next;

				if (@KHInput$ == "4772961") {
					mes "[Sistema de Segurança]";
					mes "Senha confirmada.";
					mes "Bem vindo(a), Kiel Hyre.";
					next;
					mes "^3355FFVocê ouve outro^000000";
					mes "^3355FFbeep agradável e^000000";
					mes "^3355FFum caminho secreto se abre.^000000";
					set KielHyreQuest,38;
					close;
				}

				else {
					mes "[Sistema de Segurança]";
					mes "Senha incorreta.";
					mes "Por favor tente novamente.";
					close;
				}
			}

			else {
				mes "^3355FFO que quer que você estiver^000000";
				mes "^3355FFtentando inserir no slot^000000";
				mes "^3355FFnão está funcionando...^000000";
				close;
			}

		}

	}

	else if ((KielHyreQuest >= 38) && (KielHyreQuest < 106)) {
		mes "^3355FFA porta para a^000000";
		mes "^3355FFfábrica está escancarada.^000000";
		next;

		switch(select("Entrar","Cancelar")) {

		case 1:
			warp "kh_dun01",3,230;
			end;
		case 2:
			mes "......";
			mes ".........";
			mes "............";
			close;
		}

	}

	else if (KielHyreQuest >= 106) {
		if (countitem(7509) < 1) {
			mes "^3355FFA entrada secreta";
			mes "agora está selada.^000000";
			close;
		}

		else {
			mes "Conforme você se aproxima da";
			mes "sepultura, ela começa a";
			mes "emitir flashes de luz.^000000";
			next;

			switch(select("Usar o ^0000FFCartão de Acesso Exuberante^000000","Ignorar")) {

			case 1:
				mes "Uma vez que você usou o";
				mes "Cartão de Acesso Exuberante,";
				mes "um caminho secreto se abre^000000";
				next;

				switch(select("Entrar","cancelar")) {

				case 1:
					warp "kh_dun01",3,230;
					end;

				case 2:
					mes "......";
					mes ".........";
					mes "............";
					close;

				}

			case 2:
				mes "......";
				mes ".........";
				mes "............";
				close;

			}

		}

	}

}

//============================================================================

//============================================================================
//Kiel Hyre Cottage NPCs
//============================================================================

//----------------------------------------------------------------------------
// Cottage Keeper
//----------------------------------------------------------------------------
yuno_fild02,93,210,3	script	Guarda da Cabana	85,{
	if ((KielHyreQuest < 12) || (KielHyreQuest > 12)) {
		mes "[Guarda da Cabana]";
		mes "Isso é uma propriedade particular,";
		mes "então por favor não entre nessa";
		mes "área a não ser que seja autorizado.";
		close;
	}

	else if (KielHyreQuest == 12) {
		mes "[Guarda da Cabana]";
		mes "Isso é uma propriedade particular,";
		mes "então por favor não entre nessa";
		mes "área a não ser que seja autorizado.";
		next;

		switch(select("Tenho horário marcado com Kiel Hyre.","Certo.")) {

		case 1:
			mes "[Guarda da Cabana]";
			mes "Você tem um";
			mes "horário marcado com";
			mes "o Senhor Kiel Hyre?";
			mes "Um, tem certeza?";
			next;
			switch(select("Sim","Não")) {

			case 1:
				mes "[Guarda da Cabana]";
				mes "Deve haver algum tipo";
				mes "de engano. Senhor Hyre";
				mes "não sairia se ele";
				mes "supostamente tivesse de ter";
				mes "um horário marcado...";
				set KielHyreQuest,14;
				close;

			case 2:
				mes "[Guarda da Cabana]";
				mes "Bem, a não ser que você tenha";
				mes "um horário marcado, não";
				mes "acho que você poderá";
				mes "encontrar-se com Senhor yre.";
				close;
			}

		case 2:
			mes "[Guarda da Cabana]";
			mes "Até Mais.";
			close;
		}
	}
}

//----------------------------------------------------------------------------
// Cottage Door (left)
//----------------------------------------------------------------------------
yuno_fild02,75,218,0	script	Porta::DoorKHQ1	111,{
	if (KielHyreQuest < 16) {
		mes "^3355FFEssa porta está trancada.^000000";
		mes "^3355FFSe alguém por dentro não^000000";
		mes "^3355FFabrir para você então você precisará^000000";
		mes "^3355FFda chave certa para destrancá-la.^000000";
		close;
	}

	if (KielHyreQuest == 16) {
		mes "^3355FFEssa porta está trancada.^000000";
		mes "^3355FFSe alguém por dentro não^000000";
		mes "^3355FFabrir para você então você precisará^000000";
		mes "^3355FFda chave certa para destrancá-la.^000000";
		next;

		switch(select("Destrancar","Cancelar")) {

		case 1:
			mes "^3355FFVocê destrancou a porta com a.^000000";
			mes "^3355FFchave que Elly lhe deu, e.^000000";
			mes "^3355FFassim que você a abre, um bilhete.^000000";
			mes "^3355FFdobrado cai do topo da.^000000";
			mes "^3355FFporta. As seguintes palavras.^000000";
			mes "^3355FFestão escritas nessa nota rudimentar.^000000";
			next;
			mes "6 Frente,";
			mes "3 Esquerda,";
			mes "3 Frente,";
			mes "4 Esquerda";
			close2;
			set KielHyreQuest,18;
			warp "kh_vila",188,18;
			end;

		case 2:
			mes "......";
			mes ".........";
			mes "............";
			close;
		}
	}

	if (KielHyreQuest >= 18) {
		mes "^3355FFA porta está aberta.^000000";
		next;

		switch(select("Entrar","Cancelar")) {

		case 1:
			warp "kh_vila",188,18;
			end;

		case 2:
			close;
		}
	}
}

//----------------------------------------------------------------------------
// Cottage Door (Right)
//----------------------------------------------------------------------------
yuno_fild02,109,218,0	script	Porta::DoorKHQ2	111,{
	if (KielHyreQuest < 16) {
		mes "^3355FFEssa porta está trancada.^000000";
		mes "^3355FFSe alguém por dentro não^000000";
		mes "^3355FFabrir para você então você precisará^000000";
		mes "^3355FFda chave certa para destrancá-la.^000000";
		close;
	}

	if (KielHyreQuest >= 16) {
		mes "^3355FFEssa porta está trancada.^000000";
		mes "^3355FFSe alguém por dentro não^000000";
		mes "^3355FFabrir para você então você precisará^000000";
		mes "^3355FFda chave certa para destrancá-la.^000000";
		next;

		switch(select("Abrir","Cancelar")) {

		case 1:
			mes "^3355FFVocê não tem^000000";
			mes "^3355FFa chave que pode^000000";
			mes "^3355FFdestrancar esta porta.^000000";
			close;

		case 2:
			mes "......";
			mes ".........";
			mes "............";
			close;
		}
	}
}


//----------------------------------------------------------------------------
// Store room interior; Wall
//----------------------------------------------------------------------------
kh_vila,191,14,0	script	Parede	111,{
	if (KielHyreQuest < 28) {
		mes "^3355FFÉ só uma parede.^000000";
		mes "^3355FFNão está particularmente^000000";
		mes "^3355FFatrapalhando seu caminho.^000000";
		close;
	}

	if (KielHyreQuest >= 28) {
		mes "^3355FFA parede está agora^000000";
		mes "^3355FFaberta, revelando^000000";
		mes "^3355FFum caminho secreto.^000000";
		next;

		switch(select("Entrar","Cancelar")) {

		case 1:
			warp "kh_vila",17,177;
			end;

		case 2:
			close;
		}

	}

OnOpenDoor:
	misceffect EF_READYPORTAL2;
	end;
}

//----------------------------------------------------------------------------
// Store room interior; books
//----------------------------------------------------------------------------
kh_vila,184,20,0	script	Livro#1::BookKHQ1	111,{
	if ((KielHyreQuest < 26) || (KielHyreQuest > 26)) {
		mes "^3355FFEssa estante está^000000";
		mes "^3355FFestufada com tantos^000000";
		mes "^3355FFlivros largos e de capa dura^000000";
		close;
	}
	else if (KielHyreQuest == 26) {
		if (rand(1,10) == 8) {
			mes "^3355FFSem pensar, você^000000";
			mes "^3355FFapanha um livro da^000000";
			mes "^3355FFestante. Assim que você^000000";
			mes "^3355FFo puxa, a^000000";
			mes "^3355FFparede desliza abrindo-se^000000";
			mes "^3355FFrevelando um caminho secreto.^000000";
			donpcevent "Parede::OnOpenDoor";
			set KielHyreQuest,28;
			close;
		}

		else {
			mes "^3355FFEsta estante, está^000000";
			mes "^3355FFestufada com tantos^000000";
			mes "^3355FFlivros largos e de capa dura^000000";
			close;
		}

	}

}

kh_vila,181,20,0	duplicate(BookKHQ1)	Livro#2::BookKHQ2	111

kh_vila,178,20,0	duplicate(BookKHQ1)	Livro#3::BookKHQ3	111

kh_vila,175,19,0	duplicate(BookKHQ1)	Livro#4::BookKHQ4	111

//----------------------------------------------------------------------------
// Store room interior; Letter to Elly on the floor.
//----------------------------------------------------------------------------
kh_vila,179,11,0	script	KH_Letter_Trigger	-1,2,2,{
OnTouch:
	if (KielHyreQuest == 18) {
		if (checkweight(7490,1) == 0) {
			mes "^3355FF- Espere!! -";
			mes "- Você está carregando muitos itens";
			mes "- e está incapaz de aceitar mais algum. -";
			mes "- Por favor libere algum espaço";
			mes "- no seu inventário antes de retornar. -^000000";
			close;
		}
		mes "^3355FFvocê encontrou uma carta^000000";
		mes "^3355FFno chão. Naturalmente,,^000000";
		mes "^3355FFvocê a pegou, apesar^000000";
		mes "^3355FFdo fato de que ela não está^000000";
		mes "^3355FFendereçada à você.^000000";
		getitem 7490,1; //Letter to Elly
		set KielHyreQuest,20;
		close;
	} 
	end; 
}

//----------------------------------------------------------------------------
// Cottage interior, kitchen; Box (Pet Food vending machine)
//----------------------------------------------------------------------------
kh_vila,16,175,0	script	Caixa::BoxKHQ1	111,{
		mes "^FFFFFF##^000000*Saboroso-Nutricional-Delicioso*";
		mes "*Máquina de venda de ração para Bichinhos*";
		mes "A melhor comida para o seu Bichinho de estimação";
		mes "que é superior à ração para bichinho";
		mes "que você pode comprar no mercado!";
		mes "^FFFFFF_^000000";
		mes "Preço: 1,100 zeny (barato!)";
		next;

		switch(select("Comprar!","Cancelar")) {

		case 1:
			mes "^3355FF1,100 zeny parecer ser";
			mes "^3355FFmeio caro para ração de bichinho,";
			mes "^3355FFmas se é melhor que a";
			mes "^3355FFcoisa normal, pode";
			mes "^3355FFvaler a tentativa.";
			next;
			if (zeny < 1100) {
				//Adlibbed dialog. Need weight check, too.
				mes "^3355FFVocê não tem zeny suficiente...^000000";
				close;
			}
			else {
				mes "^3355FFOh não...!^000000";
				mes "^3355FFNão tem nada de^000000";
				mes "^3355FFespecial nisso^000000";
				mes "^3355FFpor fim! É só uma^000000";
				mes "^3355FFração normal!^000000";
				set zeny,zeny-1100;
				getitem 537,1;	//Pet_Food
				close;
			}

		case 2:
			mes "^3355FFEssa máquina de vender^000000";
			mes "^3355FFparece realmente duvidosa e^000000";
			mes "^3355FFsuspeita por alguma razão^000000";
			close;
		}

}

//----------------------------------------------------------------------------
// Cottage interior, kitchen; Apple Box (Useless?)
//----------------------------------------------------------------------------
kh_vila,30,184,0	script	Caixa de Maçã	111,{
	mes "^3355FFYou find a box filled with^000000";
	mes "^3355FFripe, delicious apples.^000000";
	next;

	switch(select("Take the box","Leave it")) {

	case 1:
		mes "^3355FFNão...! Espere!^000000";
		mes "^3355FFAlgo está errado!^000000";
		mes "^3355FFO que quer que faça,^000000";
		mes "^3355FFnão pegue essa caixa!^000000";
		next;
		mes "^3355FFE assim, sua voz^000000";
		mes "^3355FFinterior, sua sombra^000000";
		mes "^3355FFJungiana lhe previne,^000000";
		mes "^3355FFde pegar aquela^000000";
		mes "^3355FFcaixa.^000000";
		close;

	case 2: 
		mes "^3355FFAlgo está errado^000000";
		mes "^3355FFcom essa caixa de maçãs.^000000";
		close;

	}

}

//----------------------------------------------------------------------------
// Cottage interior, dining room; Map
//----------------------------------------------------------------------------
kh_vila,44,126,0	script	Mapa	111,{
	if ((KHCottagePoem1 < 2) && (KielHyreQuest < 30)) {
		mes "^3355FFUm magnífico mapa mundial,^000000";
		mes "^3355FFdetalhando o reino de^000000";
		mes "^3355FFRune Midgard, República Schwaltzvalt,^000000";
		mes "^3355FFassim como um outro pais ao^000000";
		mes "^3355FFoeste, cujo nome não é familiar^000000";
		mes "^3355FFpara você, está colado na parede.^000000";
		next;
		mes "^3355FFAssim que você examina o^000000";
		mes "^3355FFmapa mundial mais de perto,^000000";
		mes "^3355FFvocê descobre que algo foi^000000";
		mes "^3355FFescondido debaixo dele.^000000";
		next;

		switch(select("Ignorar","Examinar")) {

		case 1:
			mes "^3355FFO que quer que possa estar^000000";
			mes "^3355FFescondido debaixo desse^000000";
			mes "^3355FFmapa provavelmente não é^000000";
			mes "^3355FFimportante o suficiente para^000000";
			mes "^3355FFvocê investigar.^000000";
			close;

		case 2:
			mes "^3355FFInfelizmente, você não pode^000000";
			mes "^3355FFver o que está sob o mapa^000000";
			mes "^3355FFjá que está colado na parede.^000000";
			mes "^3355FFVocê precisará encontrar alguma^000000";
			mes "^3355FFforma de soltar a cola^000000";
			mes "^3355FFsem danificar o mapa.^000000";
			set KHCottagePoem1,1;
			close;

		}

	}

	else  if ((KHCottagePoem1 == 2) && (KielHyreQuest < 30)) {
		mes "^3355FFVocê leva o pote de^000000";
		mes "^3355FFum líquido fumegante^000000";
		mes "^3355FFpróximo do mapa do mundo.^000000";
		mes "^3355FFAssim que a cola na parede ^000000";
		mes "^3355FFamolece, o mapa lentamente^000000";
		mes "^3355FFcomeça a se soltar.^000000";
		next;
		mes "^3355FFO mapa solto revelou^000000";
		mes "^3355FFum pedaço de papel dobrado^000000";
		mes "^3355FFoculto sob ele. você^000000";
		mes "^3355FFpega o papel, e alisa^000000";
		mes "^3355FFo mapa para colá-lo na^000000";
		mes "^3355FFparede novamente. Uma mensagen está^000000";
		mes "^3355FFescrita no pedaço de papel.^000000";
		next;
		mes "^808080Ela morrerá em um lugar^000000";
		mes "^808080tão frio quanto os polos.^000000";
		mes "^808080Quando o poço está seco^000000";
		mes "^808080e o chão está rachado,^000000";
		mes "^808080o caminho para o coração dela, um^000000";
		mes "^808080coração tão transparente quanto^000000";
		mes "^808080cristal, se abrirá.^000000";
		next;
		mes "^808080Terei de lutar com quatro^000000";
		mes "^808080serpentes com quatro espadas^000000";
		mes "^808080para encontrá-la. A primeira espada^000000";
		mes "^808080é o amor. A segunda espada^000000";
		mes "^808080é o desespero. A terceira espada^000000";
		mes "^808080é a fúria. A quarta espada é^000000";
		mes "^808080a esperança. De encontrá-la, de salvá-la.^000000";		
		next;
		mes "^3355FF......................^000000";
		mes "^3355FFO significado profundo^000000";
		mes "^3355FFdesse poema, é que mesmo^000000";
		mes "^3355FFa existência, lhe engana.^000000";
		set KHCottagePoem1,3;
		close;
	}

	else  if ((KHCottagePoem1 > 2) || (KielHyreQuest >= 30)) {
		mes "^3355FFAqui é onde você encontrou^000000";
		mes "^3355FFo papel no qual o^000000";
		mes "^3355FFpoema estava escrito. Talvez^000000";
		mes "^3355FFseja uma boa idéia^000000";
		mes "^3355FFrefrescar sua memória e^000000";
		mes "^3355FFler aquele poema novamente.^000000";
		next;

		switch(select("Ler","Cancelar")) {

		case 1:
			mes "^808080Ela morrerá em um lugar^000000";
		 	mes "^808080tão frio quanto os pólos.^000000";
			mes "^808080Quando o poço está seco^000000";
			mes "^808080e o chão está rachado,^000000";
			mes "^808080o caminho para o coração dela, um^000000";
			mes "^808080coração tão transparente quanto^000000";
			mes "^808080cristal, se abrirá.^000000";
			next;
			mes "^808080Terei de lutar com quatro^000000";
			mes "^808080serpentes com quatro espadas^000000";
			mes "^808080para encontrá-la. A primeira espada^000000";
			mes "^808080é o amor. A segunda espada^000000";
			mes "^808080é o desespero. A terceira espada^000000";
			mes "^808080é a fúria. A quarta espada é^000000";
			mes "^808080a esperança. De encontrá-la, de salvá-la.^000000";
			next;
			mes "^3355FF......................^000000";
			mes "^3355FFO significado profundo^000000";
			mes "^3355FFdesse poema, é que mesmo^000000";
			mes "^3355FFa existência, lhe engana.^000000";
			close;

		case 2:
			mes "^3355FFNão há necessidade para^000000";
			mes "^3355FFvocê reler esse poema.^000000";
			mes "^3355FFVocê é um grande gênio!^000000";
			close;

		}

	}

}

//----------------------------------------------------------------------------
// Cottage interior, kitchen; Pot
//----------------------------------------------------------------------------
kh_vila,33,184,0	script	Pote	111,{
	if (KHCottagePoem1 < 1) {
		mes "^3355FFVocê encontrou um pote^000000";
		mes "^3355FFcheio de liquido^000000";
		mes "^3355FFfervente esfumaçante.^000000";
		close;
	}

	else if (KHCottagePoem1 == 1) {
		mes "^3355FFVocê encontrou um pote^000000";
		mes "^3355FFcheio de liquido^000000";
		mes "^3355FFfervente esfumaçante.^000000";
		mes "^3355FFVapor... Que você poderia^000000";
		mes "^3355FFusar para soltar a cola no^000000";
		mes "^3355FFmapa... Você é um gênio!^000000";
		next;

		switch(select("Tentar.","Aquilo? Aquilo não funciona!")) {

		case 1:
			mes "^3355FFVocê pegou o^000000";
			mes "^3355FFpote fervente, mas^000000";
			mes "^3355FFqueimou levemente suas^000000";
			mes "^3355FFmãos acidentalmente.^000000";
			set KHCottagePoem1,2;
			close;

		case 2:
			mes "^3355FFNão, não...^000000";
			mes "^3355FFMelhor tentarmos^000000";
			mes "^3355FFoutra coisa.^000000";
			close;

		}

	}

	else if ((KHCottagePoem1 > 1) || (KielHyreQuest >= 30)){
		mes "^3355FFAqui é onde você^000000";
		mes "^3355FFpegou o pote cheio^000000";
		mes "^3355FFde líquido fervente.^000000";
		close;
	}

}

//----------------------------------------------------------------------------
// Cottage interior, fire place; Calabash
//----------------------------------------------------------------------------
kh_vila,14,55,0	script	Cabaça	111,{
	if ((countitem(7329) < 1) && (countitem(7516) < 1) && (countitem(7491) < 1) && (KielHyreQuest < 38)) {
		if (checkweight(7329,1) == 0) {
			mes "^3355FFAquilo é uma bela";
			mes "cabaça. Você pode até";
			mes "achar algo nela...";
			mes "Mas antes é melhor";
			mes "se livrar de todo seu peso extra.";
			mes "E por peso, quero dizer itens.^000000";
			close;
		}

		mes "^3355FFParece ser uma cabaça^000000";
		mes "^3355FFmuito cara--^000000";
		mes "^3355FFEm palavras menos^000000";
		mes "^3355FFenfeitadas, uma abóbora.'^000000";
		mes "^3355FFO que você vai fazer?^000000";
		next;

		switch(select("Quebrar a cabaça","Olhar dentro da cabaça","ignorar")) {

		case 1:
			mes "^3355FFVocê não pode quebrar^000000";
			mes "^3355FFabra aquela cabaça...^000000";
			mes "^3355FFVocê é um herói, não um vândalo.^000000";
			mes "^3355FFAgora se esse ato de vandalismo^000000";
			mes "^3355FFpuder ser considerado um ato de^000000";
			mes "^3355FFheroismo, então tudo bem.^000000";
			close;

		case 2:
			mes "^3355FFVocê gentilmente coloca^000000";

			mes "^3355FFSua mão dentro^000000";
			mes "^3355FFcabaça, e gentilmente^000000";
			mes "^3355FFtateia com seus^000000";
			mes "^3355FFdedos até que você recuperar^000000";
			mes "^3355FFuma Velha Chave de Bronze^000000";
			getitem 7329,1; //Old_Bronze_Key
			close;

		case 3:
			mes "^3355FFProvavelmente não há^000000";
			mes "^3355FFnada dentro mesmo^000000";
			close;

		}

	}

	else {
		mes "^3355FFEssa é aparentemente caríssima^000000";
		mes "^3355FFcabaça de onde^000000";
		mes "^3355FFvocê obteve^000000";
		mes "^3355FFa Velha Chave de Bronze.^000000";
		mes "^3355FFÉ inútil para você agora.^000000";
		close;
	}
}

//----------------------------------------------------------------------------
// Cottage interior, garden; Pool
//----------------------------------------------------------------------------
kh_vila,39,41,0	script	Piscina	111,{
	if ((KHCottagePoem1 < 3) && (KielHyreQuest < 30)) {
		mes "^3355FFVocê encontrou uma piscina pomposa^000000";
		mes "^3355FFcheia com água fresca.^000000";
		close;
	}

	else if ((KHCottagePoem1 == 3) && (KielHyreQuest < 30)) {
		mes "^3355FFVocê encontrou uma piscina pomposa^000000";
		mes "^3355FFcheia com água fresca.^000000";
		mes "^3355FFjunto com uma evidente^000000";
		mes "^3355FFestátua de leão com duas alavancas^000000";
		next;

		switch(select("Puxar as alavancas","cancelar")) {

		case 1:
			mes "Qual alavanca você gostaria^000000";
			mes "de puxar primeiro?^000000";
			next;

			switch(select("Alavanca da Direita","Alavanca da Esquerda")) {

			case 1:
				mes "^3355FFVocê puxou a alavanca da^000000";
				mes "^3355FFdireita, fazendo com que a água^000000";
				mes "^3355FFjorrasse da boca do leão^000000";
				mes "^3355FFÉ bem legal~^000000";
				close;
				
			case 2:
				mes "^3355FFAssim que você puxa a^000000";
				mes "^3355FFalavanca da esquerda, a água^000000";
				mes "^3355FFda piscina é drenada. Com a^000000";
				mes "^3355FFpiscina vazia, você pode^000000";
				mes "^3355FFver uma escada de musgo verde^000000";
				mes "^3355FFcobrindo o fundo da piscina.^000000";
				next;

				switch(select("Ignorar","Investigar")) {

				case 1:
					mes "^3355FFVocê decide que^000000";
					mes "^3355FFé um pouco mais que^000000";
					mes "^3355FFum buraco sem^000000";
					mes "^3355FFágua alguma para enchê-la.^000000";
					close;

				case 2:
					mes "^3355FFAssim que você olha através^000000";
					mes "^3355FFdo musgo molhado no^000000";
					mes "^3355FFfundo da piscina,^000000";
					mes "^3355FFvocê esbarra em um^000000";
					mes "^3355FFpequeno botão peculiar.^000000";
					next;

					switch(select("Pressionar o Botão","Não Pressionar o Botão")) {

					case 1:
						mes "^3355FFVocê pressionou o botão^000000";
						mes "^3355FFo que parece acionar^000000";
						mes "^3355FFum som estranho vindo^000000";
						mes "^3355FFdas escadas no corredor.^000000";
						set KHCottagePoem1,4;
						close;

					case 2:
						mes "^3355FFÉ melhor você não apertar^000000";
						mes "^3355FFesse botão. Seus inimigos^000000";
						mes "^3355FFdeve estar cudadosamente escondidos^000000";
						mes "^3355FFpara lhe encontrar. Deve ser^000000";
						mes "^3355FFalgum tipo de armadilha maléfica.^000000";
						close;

					}

				}

			}

		case 2:
			mes "^3355FFVocê decidiu não^000000";
			mes "^3355FFpuxar as alavancas.^000000";
			close;

		}

	}

	else if ((KHCottagePoem1 > 3) || (KielHyreQuest >= 30)) {
		mes "^3355FFAqui é onde você pressionou^000000";
		mes "^3355FFo pequeno botão causando^000000";
		mes "^3355FFum estranho barulho que veio^000000";
		mes "^3355FFdas escadas próximas do corredor.^000000";
		close;
	}
}

//----------------------------------------------------------------------------
// Cottage interior, upstairs; Vicious Dog
//----------------------------------------------------------------------------
kh_vila,181,178,4	script	Cão Bravo	81,7,3,{
OnTouch:
	mes "*Grrr~*";
	next;
	mes "^3355FFUm cachorro aparentemente^000000";
	mes "^3355FFextremamente bravo está olhando^000000";
	mes "^3355FFprá você. Será que você^000000";
	mes "^3355FFconsegue passar por essa criatura^000000";
	mes "^3355FFsem se machucar?^000000";
	next;

	switch(select("Seguir em Frente","Fugir")) {

	case 1:
		if (countitem(537) >= 1) {
			mes "^3355FFEspere! Talvez você possa^000000";
			mes "^3355FFusar comida para acalmar a^000000";
			mes "^3355FFbesta selvagem! Por quê você não^000000";
			mes "^3355FFo alimenta com um pouco da sua ração^000000";
			mes "^3355FFde bichinho e vê o que acontece?^000000";
			next;

			switch(select("Dar ração de bichinho","Não vai funcionar!")) {

			case 1:
				mes "^3355FFVocê cuidadosamente arremessa a^000000";
				mes "^3355FFração de bichinho para o cachorro.^000000";
				mes "^3355FFSua cauda balança violentamente enquanto^000000";
				mes "^3355FFele devora a comida, melhor^000000";
				mes "^3355FFpassar por esse cachoro agora^000000";
				mes "^3355FFenquanto você tem chance!^000000";
				delitem 537,1; //Pet_Food
				close2;
				warp "kh_vila",173,182;
				end;

			case 2:
				NoPetFood:
				mes "^3355FFVocê se aproxima lentamente do^000000";
				mes "^3355FFcachorro, mas ele não^000000";
				mes "^3355FFpara de rosnar prá você.^000000";
				mes "^3355FFVocê tenta passar correndo pelo^000000";
				mes "^3355FFcachorro, mas ele bloqueia todos^000000";
				mes "^3355FFseus movimentos. O que fazer?^000000";
				next;
				mes "[Cão Bravo]";
				mes "BOW WOW!";
				mes "BOW WOW!";
				mes "BOW WOW WOW!";
				next;
				mes "^3355FFO cachorro lhe persegue^000000";
				mes "^3355FFescada abaixo, quão^000000";
				mes "^3355FFingênuo você é^000000";
				close2;
				warp "kh_vila",126,70;
				end;

			}
		}

		else {
			goto NoPetFood;
		}

	case 2:
		mes "^3355FFVamos sair daqui!^000000";
		close2;
		warp "kh_vila",126,70;
		end;

	}

}

//----------------------------------------------------------------------------
// Cottage interior, upstairs; Drawer, first room nightstand
//----------------------------------------------------------------------------
kh_vila,115,186,0	script	Gaveta::DrawerKHQ1	111,{
	if (checkweight(7492,1) == 0) {
		mes "^3355FFHá algo dentro";
		mes "dessa gaveta, mas você não pode";
		mes "pegar já que está carregando";
		mes "muitos ítens com você. Talvez";
		mes "você deva visitar o seu";
		mes "confiável armazem da Kafra antes.^000000";
		close;
	}
	if ((countitem(7492) < 1) && (KielHyreQuest < 36)) {
		mes "^3355FFVocê encontrou uma velha gaveta^000000";
		mes "^3355FFque estava fechada.^000000";
		mes "^3355FFSe você a abrir, então você^000000";
		mes "^3355FFpode encontrar alguma coisa^000000";
		mes "^3355FFdentro. Ou pode estar^000000";
		mes "^3355FFvazia. Quem sabe?^000000";
		next;

		switch(select("Abrir a gaveta","Ignorar")) {

		case 1:
			mes "^3355FFVocê obteve o Cartão^000000";
			mes "^3355FFde Acesso Amarelo de dentro da^000000";
			mes "^3355FFgaveta. Abrir aquela gaveta^000000";
			mes "^3355FFtornou-se útil.^000000";
			getitem 7492,1; //Yellow_Keycard
			close;

		case 2:
			mes "^3355FFEsquece de abrir aquela^000000";
			mes "^3355FFgaveta. Digo, poxa,^000000";
			mes "^3355FFque sentido teria?^000000";
			close;
		}
	}

	else {
		mes "^3355FFAqui é onde você^000000";
		mes "^3355FFencontrou o Cartão De Acesso Amarelo.^000000";
		mes "^3355FFEsta gaveta está vazia agora.^000000";
		close;
	}
}

//----------------------------------------------------------------------------
// Cottage interior, upstairs; Box
//----------------------------------------------------------------------------
kh_vila,107,126,0	script	Caixa::BoxKHQ2	111,{
	if ((countitem(7329) < 1) && (countitem(7516) < 1) && (countitem(7491) < 1) && (KielHyreQuest < 38)) {
		mes "^3355FFUma caixa sólida está jogada^000000";
		mes "^3355FFno chão onde se encontra^000000";
		mes "^3355FFuma pequena caixa trancada^000000";
		mes "^3355FFque foi colocada dentro.^000000";
		close;
	}

	else if ((countitem(7329) >= 1) && (countitem(7516) < 1) && (countitem(7491) < 1) && (KielHyreQuest < 38)) {
		mes "^3355FFUma caixa sólida está jogada^000000";
		mes "^3355FFno chão onde se encontra^000000";
		mes "^3355FFuma pequena caixa trancada^000000";
		mes "^3355FFque foi colocada dentro.^000000";
		mes "^3355FFTalvez você possa usar sua^000000";
		mes "^3355FFVelha Chave de Bronze para destrancá-la.^000000";
		next;

		switch(select("Usar a Velha Chave de Bronze","Não, nunca vai funcionar.")) {

		case 1:
			mes "^3355FFSeu palpite valeu a pena!^000000";
			mes "^3355FFA velha chave de bronze realmente^000000";
			mes "^3355FFdestrancou aquela caixa! Você^000000";
			mes "^3355FFabre a caixa interior e^000000";
			mes "^3355FFobtem o Cartão de Acesso Verde^000000";
			mes "^3355FFque estava trancado dentro.^000000";
			getitem 7516,1;	//Green_Keycard
			delitem 7329,1;	//Old_Bronze_Key
			close;


		case 2:
			mes "^3355FFO quê...?^000000";
			mes "^3355FFO quê? Usando uma chave^000000";
			mes "^3355FFpara destrancar uma fechadura?^000000";
			mes "^3355FFQualé, isso é^000000";
			mes "^3355FFtotalmente loucura total.^000000";
			close;

		}

	}

	else {
		mes "^3355FFEssa é a caixa de^000000";
		mes "^3355FFonde você obteve^000000";
		mes "^3355FFo Cartão de Acesso Verde.^000000";
		close;
	}

}

//----------------------------------------------------------------------------
// Cottage interior, upstairs; Bookshelf.
//----------------------------------------------------------------------------
//----------------------------------------------------------------------------
// Cottage interior, upstairs; Bookshelf.
//----------------------------------------------------------------------------
kh_vila,181,138,0	script	Estante::BookshelfKHQ1	111,{
	if (checkweight(7492,1) == 0) {
		mes "^3355FFVocê encontrou uma";
		mes "estante que está";
		mes "estufada com livros.^000000";
		close;
	}

	if ((countitem(7491) < 1) && (countitem(7329) >= 1) || (countitem(7516) >= 1)) {
		mes "^3355FFUm dos livros nessa^000000";
		mes "^3355FFestante estufada^000000";
		mes "^3355FFestá intitulado com o bilhete,^000000";
		mes "^3355FFpara Elly. Deve ter^000000";
		mes "^3355FFsido deixado prá trás pelo avô dela^000000";
		next;
		switch(select("Examinar o Livro","Ignorar")) {

		case 1:
			mes "^3355FFVocê espia pelas^000000";
			mes "^3355FFpáginas do livro e não^000000";
			mes "^3355FFencontra nada particularmente^000000";
			mes "^3355FFinteressante. No entanto, você^000000";
			mes "^3355FFpercebe uma superfície de aço atrás^000000";
			mes "^3355FFda estante quando você devolve o livro.^000000";
			next;

			switch(select("Examinar a superfície de Aço","Ignorar")) {

			case 1:
				mes "^3355FFVocê remove mais dos^000000";
				mes "^3355FFlivros da estante, revelando^000000";
				mes "^3355FFque a superfície de aço é^000000";
				mes "^3355FFparte de um cofre escondido atrás^000000";
				mes "^3355FFda estante. Há duas^000000";
				mes "^3355FFfechaduras no cofre de aço.^000000";
				next;

				switch(select("Tentar todas suas chaves","Cancelar")) {

				case 1:
					mes "^3355FFQual chave você irá^000000";
					mes "^3355FFinserir na primeira^000000";
					mes "^3355FFfechadura?^000000";
					next;

					if (countitem(7329) >= 1) {
						switch(select("Velha Chave de Bronze","Chave da Cabana")) {

						case 1:
							break;

						case 2:
							break;

						}

						mes "^3355FFQual chave você irá^000000";
						mes "^3355FFinserir na segunda^000000";
						mes "^3355FFfechadura?^000000";
						next;

						switch(select("Velha Chave de Bronze","Chave da Cabana")) {

						case 1:
							break;

						case 2:
							break;

						}

					}


					else if (countitem(7516) >= 1) {

						switch(select("Cartão de Acesso Verde","Chave da Cabana")) {

						case 1:
							set @KHFirstKeyhole,1;
							break;

						case 2:
							set @KHFirstKeyhole,2;
							break;

						}

						mes "^3355FFQual chave você irá^000000";
						mes "^3355FFinserir na segunda^000000";
						mes "^3355FFfechadura?^000000";;
						next;

						switch(select("Cartão de Acesso Verde","Chave da Cabana")) {

						case 1:
							set @KHSecondKeyhole,1;
							break;

						case 2:
							set @KHSecondKeyhole,2;
							break;

						}

						if (@KHFirstKeyhole == 2) && (@KHSecondKeyhole == 1) {
							mes "^3355FFO cofre abre com^000000";
							mes "^3355FFum estalido e você vê^000000";
							mes "^3355FFuma Caixa Cinza dentro.^000000";
							mes "^3355FFVocê leva a Caixa Cinza^000000";
							mes "^3355FFcom você, esperando que^000000";
							mes "^3355FFse torne útil mais tarde.^000000";
							delitem 7489,1; //Cottage Key
							delitem 7516,1; //Green_Keycard
							getitem 7491,1; //Iron_Box
							close;
						}

					}

					mes "^3355FFO cofre não abre.^000000";
					close;


				case 2:
					mes "^3355FFProvavelmente é uma idéia^000000";
					mes "^3355FFmelhor investigar a^000000";
					mes "^3355FFcabana por chaves que^000000";
					mes "^3355FFpossam abrir esse cofre...^000000";
					close;

				}

			case 2:
				mes "^3355FFVocê colocou os livros^000000";
				mes "^3355FFde volta na estante.^000000";
				close;

			}
	
		case 2:
			mes "^3355FFvocê pode provavelmente^000000";
			mes "^3355FFencontrar melhores pistas^000000";
			mes "^3355FFem algum outro lugar^000000";
			mes "^3355FFpor aqui.^000000";
			close;

		}
	}

	else {
		mes "^3355FFvocê encontrou uma";
		mes "estante que está";
		mes "estufada com livros.^000000";
		close;
	}

}

//----------------------------------------------------------------------------
// Cottage interior, upstairs; Desk
//----------------------------------------------------------------------------
kh_vila,118,143,0	script	Mesa::DeskKHQ1	111,{
	if (KHCottagePoem2 < 1) {
		mes "^3355FFHá pilhas de papel^000000";
		mes "^3355FFe livros amontoados sobre^000000";
		mes "^3355FFa mesa cobrindo assuntos^000000";
		mes "^3355FFcomo poder artificial, pesquisa^000000";
		mes "^3355FFdo sábio Varmundt, robotização^000000";
		mes "^3355FFda fábrica, e pergaminhos mágicos...^000000";
		next;
		mes "^3355FFEnquanto explorando no meio^000000";
		mes "^3355FFdos livros e papéis, você^000000";
		mes "^3355FFencontra um pedaço de papel com^000000";
		mes "^3355FFo selo oficial da Fundação ^000000";
		mes "^3355FFKiel Hyre. Você decide que^000000";
		mes "^3355FFpode ser útil algum dia.^000000";
		next;
		mes "^3355FFVocê obteve^000000";
		mes "^3355FFum pedaço em branco de^000000";
		mes "^3355FFpapel com o selo da Fundação^000000";
		mes "^3355FFde Kiel Hyre.^000000";
		set KHCottagePoem2,1;
		close;
	}

	else if (KHCottagePoem2 >= 1) {
		mes "^3355FFHá várias pilhas de papel^000000";
		mes "^3355FFe livros, cobrindo vários^000000";
		mes "^3355FFassuntos científicos e mágica,^000000";
		mes "^3355FFempilhados sobre essa mesa.^000000";
		close;
	}
}

//----------------------------------------------------------------------------
// Cottage interior, upstairs; Medicine Chest
//----------------------------------------------------------------------------
kh_vila,123,170,0	script	Baú de Poções	111,{
	if ((KHCottagePoem2 < 1) && (KielHyreQuest < 30)) {
		mes "^3355FFEssa cabine médica^000000";
		mes "^3355FFestá cheia de garrafas de^000000";
		mes "^3355FFvárias cores. Que tipo de^000000";
		mes "^3355FFpoções pode ser encontrado aqui?^000000";
		close;
	}

	else if ((KHCottagePoem2 == 1) && (KielHyreQuest < 30)) {
		mes "^3355FFEssa cabine médica^000000";
		mes "^3355FFestá cheia de garrafas de^000000";
		mes "^3355FFvárias cores. Que tipo de^000000";
		mes "^3355FFpoções pode ser encontrado aqui?^000000";
		next;
		mes "^3355FFEspere, você tem um pedaço de papel^000000";
		mes "^3355FFem branco com o selo da fundação de^000000";
		mes "^3355FFKiel Hyre! É estranho^000000";
		mes "^3355FFque o selo foi colocado num pedaço^000000";
		mes "^3355FFde papel em branco. Talvez algo^000000";
		mes "^3355FFfoi escrito nele com tinta especial?^000000";
		next;
		mes "^3355FFÉ um palpite doido, mas^000000";
		mes "^3355FFtalvez, só talvez, você possa^000000";
		mes "^3355FFusar algo de dentro dessa^000000";
		mes "^3355FFcabine médica que possa^000000";
		mes "^3355FFrevelar alguma tinta invisível^000000";
		mes "^3355FFescrita nesse documento!^000000";
		next;

		switch(select("O quê? Isso é loucura!","Claro! Vamos tentar!")) {

		case 1:
			mes "^3355FFDesculpe.^000000";
			mes "^3355FFPensei que^000000";
			mes "^3355FFfosse uma boa idéia...^000000";
			close;

		case 2:
			switch(select("Tentar Líquido Vermelho","Tentar Líquido Azul","Tentar Líquido Amarelo","Tentar Líquido Verde","Cancelar")) {

			case 1:
				set @KHPotionColor$,"Vermelho";
				break;

			case 2:
				mes "^3355FFFunciona!^000000";
				mes "^3355FFO líquido azul está^000000";
				mes "^3355FFrevelando um pequeno^000000";
				mes "^3355FFtexto escrito no papel.^000000";
				mes "^3355FFParece algum^000000";
				mes "^3355FFtipo de poema longo...^000000";
				next;
				mes "[Poema]";
				mes "A primeira serpente é feita de";
				mes "aço, mas eu usei minha fúria";
				mes "para destruí-la. A segunda";
				mes "serpente é feita de mágica,";
				mes "mas meu amor perfurou seu coração.";
				next;
				mes "[Poema]";
				mes "A terceira serpente é carne";
				mes "e sangue, mas minha esperança";
				mes "a derrotou no final.";
				mes "Ainda assim, a quarta e";
				mes "derradeira serpente é sem forma, e";
				mes "ninguém sabe sua aparência.";
				next;
				mes "[Poema]";
				mes "Eu joguei meu desespero para o ar,";
				mes "mas ninguém sabe se isso matou";
				mes "a serpente. Eu meramente um ^3355FFpequeno";
				mes "demônio perdido^000000 com quatro espadas e";
				mes "quatro serpentes, em busca daquela";
				mes "garota nas trevas.";
				next;
				mes "^3355FFEsse é um poema^000000";
				mes "^3355FFmuito estranho. O quê^000000";
				mes "^3355FFpoderia possivelmente significar?^000000";
				set KHCottagePoem2,2;
				close;

			case 3:
				set @KHPotionColor$,"Amarelo";
				break;

			case 4:
				set @KHPotionColor$,"Verde";
				break;

			case 5:
				mes "^3355FFEsquece.^000000";
				mes "^3355FFEssa idéia parece^000000";
				mes "^3355FFmuito doida prá funcionar...^000000";
				mes "^3355FFComo levar o homem^000000";
				mes "^3355FFna Lua, Você acredita^000000";
				mes "^3355FFnessa asneira?^000000";
				close;
			}

			mes "^3355FFVocê tentou borrifar^000000";
			mes "^3355FFo líquido "+@KHPotionColor$+" do^000000";
			mes "^3355FFcabinete médico no^000000";
			mes "^3355FFpapel em branco com o^000000";
			mes "^3355FFselo da Fundação Kiel Hyre.^000000";
			mes "^3355FFMesmo assim, nada aconteceu...^000000";
			close;

		}
	}

	else if ((KHCottagePoem2 >= 2) || (KielHyreQuest >= 30)) {
		mes "^3355FFAqui é onde você derramou^000000";
		mes "^3355FFalgum líquido azul para ler^000000";
		mes "^3355FFum poema escrito com tinta^000000";
		mes "^3355FFinvisível num pedaço de papel em branco^000000";
		mes "^3355FFcom o selo da Fundação Kiel Hyre^000000";
		mes "^3355FFVocê gostaria de lê-lo?^000000";
		next;
		switch(select("Sem Tempo!","Ler")) {
		case 1:
			mes "^3355FFSeu tempo está acabando!^000000";
			mes "^3355FFPor enquanto seria^000000";
			mes "^3355FFmelhor você procurar^000000";
			mes "^3355FFcada canto da cabana.^000000";
			close;
		case 2:
				mes "[Poema]";
				mes "A primeira serpente é feita de";
				mes "aço, mas eu usei minha fúria";
				mes "para destruí-la. A segunda";
				mes "serpente é feita de mágica,";
				mes "mas meu amor perfurou seu coração.";
				next;
				mes "[Poema]";
				mes "A terceira serpente é carne";
				mes "e sangue, mas minha esperança";
				mes "a derrotou no final.";
				mes "Ainda assim, a quarta e";
				mes "derradeira serpente é sem forma, e";
				mes "ninguém sabe sua aparência.";
				next;
				mes "[Poema]";
				mes "Eu joguei meu desespero para o ar,";
				mes "mas ninguém sabe se isso matou";
				mes "a serpente. Eu meramente um ^3355FFpequeno";
				mes "demônio perdido^000000 com quatro espadas e";
				mes "quatro serpentes, em busca daquela";
				mes "garota nas trevas.";
			close;
		}
	}
}

//----------------------------------------------------------------------------
// Cottage interior, stair case; Sword hilt
//----------------------------------------------------------------------------
kh_vila,136,68,0	script	Punho da Espada	111,{
	if ((KHCottagePoem1 < 3) || (KHCottagePoem2 < 2) && (KielHyreQuest < 30)) {
		mes "^3355FFHá quatro bem elaboradas^000000";
		mes "^3355FFespadas posicionads^000000";
		mes "^3355FFpróximas à quatro assustadoras^000000";
		mes "^3355FFesculturas de serpentes.^000000";
		close;
	}

	else if ((KHCottagePoem1 <= 4) || (KHCottagePoem2 <= 2) && (KielHyreQuest < 30)) {
		mes "^3355FFHá quatro bem elaboradas^000000";
		mes "^3355FFespadas posicionadas^000000";
		mes "^3355FFpróximas à quatro assustadoras^000000";;
		mes "^3355FFesculturas de serpentes. Espere!^000000";
		mes "^3355FFTalvez estejam relacionadas ao^000000";
		mes "^3355FFpoema que você leu antes...^000000";
		next;

		switch(select("Nada haver!","Claro!")) {

		case 1:
			mes "^3355FFImpossível...^000000";
			mes "^3355FFDeve ser algum tipo^000000";
			mes "^3355FFde coincidência...^000000";
			close;

		case 2:
			mes "^3355FFClaro! E veja!^000000";
			mes "^3355FFHá um buraco no topo^000000";
			mes "^3355FFda cabeça de cada escultura^000000";
			mes "^3355FFde serpente. Esses buracos parecem^000000";
			mes "^3355FFbastante grandes para inserir cada^000000";
			mes "^3355FFuma das espadas ornamentais próximas...^000000";
			next;

			switch(select("Ignorar","Inserir Espadas Ornamentais")) {

			case 1:
				mes "^3355FFImpossível...^000000";
				mes "^3355FFDeve ser algum^000000";
				mes "^3355FFtipo de coincidência...^000000";
				close;

			case 2:
				if (KHCottagePoem1 != 4) {
					mes "^3355FFNão pode... Puxar...^000000";
					mes "^3355FFa espada! Deve estar^000000";
					mes "^3355FFpresa no lugar^000000";
					mes "^3355FFde alguma forma ou selada^000000";
					mes "^3355FFpor alguma força estranha!^000000";
					close;
				}

				else {
					mes "^3355FFVocê provavelmente deveria^000000";
					mes "^3355FFtentar inserir cada espada^000000";
					mes "^3355FFna serpente correta.^000000";
					mes "^3355FFPrimeiro por favor selecione a^000000";
					mes "^3355FFserpente que você irá^000000";
					mes "^3355FFinserir a primeira espada.^000000";
					next;

					switch(select("Primeira Serpente","Segunda Serpente","Terceira Serpente","Quarta Serpente")) {

					case 1:
						set @KHfirstSword,1;
						break;

					case 2:
						set @KHfirstSword,2;
						break;

					case 3:
						set @KHfirstSword,3;
						break;

					case 4:
						set @KHfirstSword,4;
						break;

					}

					next;
					mes "^3355FFAgora, por favor escolha^000000";
					mes "^3355FFa serpente que você^000000";
					mes "^3355FFirá inserir a segunda espada.^000000";
					next;

					switch(select("Primeira Serpente","Segunda Serpente","Terceira Serpente","Quarta Serpente")) {

					case 1:
						set @KHSecondSword,1;
						break;

					case 2:
						set @KHSecondSword,2;
						break;

					case 3:
						set @KHSecondSword,3;
						break;

					case 4:
						set @KHSecondSword,4;
						break;

					}

					next;

					mes "^3355FFAgora, por favor selecione^000000";
					mes "^3355FFa serpente que você^000000";
					mes "^3355FFirá inserir a terceira espada.^000000";
					next;

					switch(select("Primeira Serpente","Segunda Serpente","Terceira Serpente","Quarta Serpente")) {

					case 1:
						set @KHThirdSword,1;
						break;


					case 2:
						set @KHThirdSword,2;
						break;

					case 3:
						set @KHThirdSword,3;
						break;

					case 4:
						set @KHThirdSword,4;
						break;

					}

					next;
					mes "^3355FFFinalmente, por favor selecione^000000";
					mes "^3355FFa serpente na qual você^000000";
					mes "^3355FFirá inserir a quarta espada.^000000";
					next;

					switch(select("Primeira Serpente","Segunda Serpente","Terceira Serpente","Quarta Serpente")) {

					case 1:
						set @KHFouthSword,1;
						break;

					case 2:
						set @KHFouthSword,2;
						break;

					case 3:
						set @KHFouthSword,3;
						break;

					case 4:
						set @KHFouthSword,4;
						break;

					}

					if ((@KHFirstSword == 2) && (@KHSecondSword == 4) && (@KHThirdSword == 1) && (@KHFouthSword == 3)) {
						mes "^3355FFSeus ouvidos são repentinamente^000000";
						mes "^3355FFpreenchidos com um baixo zumbido^000000";
						mes "^3355FFe sua mente e^000000";
						mes "^3355FFcorpo parecem que estão^000000";
						mes "^3355FFsendo levados^000000";
						set KHCottagePoem1,5;
						set KHCottagePoem2,3;
						close2;
						warp "kh_vila",178,72;
						end;
					}

					else {
						mes "^3355FFNada aconteceu...^000000";
						mes "^3355FFVocê provavelmente não^000000";
						mes "^3355FFinseriu as espadas nas^000000";
						mes "^3355FFserpentes corretas. Por enquanto,^000000";
						mes "^3355FFvocê deveria retornar as espadas,^000000";
						mes "^3355FFe então tentar novamente mais tarde.^000000";
						close;
					}
				}
			}
		}
	}

	else if ((KHCottagePoem1 == 5) && (KHCottagePoem2 == 3) || (KielHyreQuest >= 30)) {
		mes "^3355FFAqui tem um caminho^000000";
		mes "^3355FFoculto que leva à^000000";
		mes "^3355FFum laboratório secreto.^000000";
		next;

		switch(select("Entrar","Cancelar")) {

		case 1:
			warp "kh_vila",178,72;
			end;

		case 2:
			close;

		}
	}

}

//----------------------------------------------------------------------------
// Cottage interior, Secret Room; left test tube
//----------------------------------------------------------------------------
kh_vila,179,68,0	script	Tubo de Testes::TestTubeKHQ1	111,{
	mes "^3355FFEsse tubo de testes tem^000000";
	mes "^3355FFum jovem rapaz vestido um^000000";
	mes "^3355FFuniforme da Academia Kiel^000000";
	mes "^3355FFHyre. De alguma forma, você^000000";
	mes "^3355FFtem a sensação que já^000000";
	mes "^3355FFo viu antes em algum lugar.^000000";
	close;
}


//----------------------------------------------------------------------------
// Cottage interior, Secret Room; Right test tube
//----------------------------------------------------------------------------
kh_vila,185,68,0	script	Tubo de Testes::TestTubeKHQ2	111,{
	if (KielHyreQuest == 28) {
		mes "^3355FFUma estranha,^000000";
		mes "^3355FFsábia senhora está^000000";
		mes "^3355FFpresa nesse tubo de testes.^000000";
		mes "^3355FFHá um pequeno botão vermelho^000000";
		mes "^3355FFbem embaixo no tubo de testes.^000000";
		next;

		switch(select("Pressionar o Botão","Investigar Mais")) {

		case 1:

			mes "[???]";
			mes "O-Olá...? V-Você pode";
			mes "me ouvir? Eu não lhe reconheço...";
			mes "Mas... Talvez eu tenha esquecido?";
			mes "Espere, espere. Se você é meu amigo,";
			mes "então você sabe do que me chamar,";
			mes "certo? Você sabe o que eu sou?";
			next;

			input @KHInput$;

			if (@KHInput$ == "Um pequeno demônio perdido") {
				mes "[???]";
				mes "Heh... Heh heh...";
				mes "Ele sabe... Hey, você";
				mes "tem de lembrar desses";
				mes "números, okay? N-não";
				mes "esqueça, eles serão importantes...";
				mes "^FF00004^000000, ^FF00007^000000, ^FF00002^000000, ^FF00009^000000, ^FF00006^000000, ^FF00001^000000. Isso é tudo...";
				next;
				mes "^3355FF4772961^000000";
				mes "^3355FFO que poderiam^000000";
				mes "^3355FFesses números^000000";
				mes "^3355FFpossivelmente significar?^000000";
				//KHCottagePoem1 and KHCottagePoem2 no longer needed-- deleting
				set KHCottagePoem1,0;
				set KHCottagePoem2,0;
				set KielHyreQuest,30;
				close;
			}

			else {
				mes "[???]";
				mes "Não... Não...";
				mes "Isso não está certo.";
				mes "Não acho que nós";
				mes "éramos amigos. Não...";
				close;
			}

		case 2:
			mes "^3355FFVamos investigar^000000";
			mes "^3355FFessa área um pouquinho^000000";
			mes "^3355FFmais antes.^000000";
			close;

		}

	}

	else if (KielHyreQuest >= 30) {
		mes "^3355FFO que poderia o^000000";
		mes "^3355FFnúmero 4772961^000000";
		mes "^3355FFsignificar? Por enquanto, você^000000";
		mes "^3355FFencontrou tudo que^000000";
		mes "^3355FFprcisa desse lugar,^000000";
		mes "^3355FFentão você deve voltar para Elly.^000000";
		close;
	}
	end;
}

//============================================================================

//============================================================================
// Robot Factory NPCs
//============================================================================

//----------------------------------------------------------------------------
// Robotic's Factory; Heavy Door
//----------------------------------------------------------------------------
kh_dun01,235,48,0	script	Porta Pesada::HeavyDoorKHQ1	111,{
	if ((KielHyreQuest >= 38) && (KielHyreQuest < 46)) {
		mes "^3355FFHá uma larga e pesada^000000";
		mes "^3355FFporta à sua frente^000000";
		next;

		switch(select("Abrir a Porta","Cancelar")) {

		case 1:
			input @KHInput$;
			if (@KHInput$ == "Cartão de Acesso Azul") {
				mes "^3355FFVocê abri com sucesso^000000";
				mes "^3355FFa porta.^000000";
				close2;
				warp "kh_school",119,144;
				end;
			}

			else {
				mes "^3355FFVocê tenta empurrar a^000000";
				mes "^3355FFporta para abrir com toda^000000";
				mes "^3355FFsua força, mas falha^000000";
				mes "^3355FFem fazê-la se mexer.^000000";
				close;
			}

		case 2:
			mes "^3355FFVocê decidiu deixar^000000";
			mes "^3355FFessa porta quieta, até^000000";
			mes "^3355FFque descubra como^000000";
			mes "^3355FFconseguirá abrí-la^000000";
			close;

		}

	}

	else {
		mes "^3355FFTHá uma larga e pesada^000000";
		mes "^3355FFporta à sua frente^000000";
		close;
	}
}

//----------------------------------------------------------------------------
// Robotic's Factory; Heavy Door (These doors don't seem to serve any purpose)
//----------------------------------------------------------------------------
kh_dun01,76,233,0	script	Porta Pesada::HeavyDoorKHQ2	111,{
	if ((KielHyreQuest >= 38) && (KielHyreQuest < 46)) {
		mes "^3355FFTHá uma larga e pesada^000000";
		mes "^3355FFporta à sua frente^000000";
		next;

		switch(select("Open Door","Cancel")) {

		case 1:
			input @KHInput$;
			 	mes "^3355FFVocê tenta empurrar a^000000";
				mes "^3355FFporta para abrir com toda^000000";
				mes "^3355FFsua força, mas falha^000000";
				mes "^3355FFem fazê-la se mexer.^000000";
			close;

		case 2:
			mes "^3355FFVocê decidiu deixar^000000";
			mes "^3355FFessa porta quieta, até^000000";
			mes "^3355FFque descubra como^000000";
			mes "^3355FFconseguirá abrí-la^000000";
			close;

		}

	}

	else {
		mes "^3355FFTHá uma larga e pesada^000000";
		mes "^3355FFporta à sua frente^000000";
		close;
	}

}

kh_dun01,106,233,0	duplicate(HeavyDoorKHQ2)	Porta Pesada::HeavyDoorKHQ3	111
kh_dun01,6,164,0	duplicate(HeavyDoorKHQ2)	Porta Pesada::HeavyDoorKHQ4	111
kh_dun01,6,133,0	duplicate(HeavyDoorKHQ2)	Porta Pesada::HeavyDoorKHQ5	111
kh_dun01,6,60,0	duplicate(HeavyDoorKHQ2)	Porta Pesada::HeavyDoorKHQ6	111
kh_dun01,6,30,0	duplicate(HeavyDoorKHQ2)	Porta Pesada::HeavyDoorKHQ7	111
kh_dun01,6,18,0	duplicate(HeavyDoorKHQ2)	Porta Pesada::HeavyDoorKHQ8	111
kh_dun01,235,70,0	duplicate(HeavyDoorKHQ2)	Porta Pesada::HeavyDoorKHQ9	111
kh_dun01,235,92,0	duplicate(HeavyDoorKHQ2)	Porta Pesada::HeavyDoorKHQ10	111
kh_dun01,235,114,0	duplicate(HeavyDoorKHQ2)	Porta Pesada::HeavyDoorKHQ11	111

//----------------------------------------------------------------------------
// Beautiful Lady and Beautiful Lady copies.
//----------------------------------------------------------------------------
kh_school,119,149,4	script	Bela Dama::BeatifulLadyKHQ1	894,{
	cutin "kh_ellisia",2;
	if (KielHyreQuest < 40) {
		mes "[Allysia]";
		mes "Hm? Não acho que";
		mes "eu lhe conheça. Kiel Hyre";
		mes "só tem amigos de Elly autorizados,";
		mes "e confiáveis que podem";
		mes "estar ajudando ela, para";
		mes "ser aceito nessa área.";
		next;
		mes "[Allysia]";
		mes "Eu não encontro ^FF0000Elly^000000";
		mes "Ela foi atacada também?";
		mes "Você é ^FF0000Amigo de Elly^000000?";
		next;
		mes "[Allysia]";
		mes "Eu não acho Elly em lugar algum";
		mes "por aqui. Só posso lhe deixar";
		mes "entrar se você puder se identificar";
		mes "como amigo de Elly.";
		mes "Há alguma coisa que você";
		mes "possa me apresentar como prova?";
		next;

		switch(select("Cartão de Acesso Amarelo","Cartão de Acesso Azul","Chave Dourada","Broche Luxuoso","...?")) {

		case 1:
			break;

		case 2:
			break;

		case 3:
			mes "Ah, essa não é a";
			mes "chave que Kiel Hyre deu";
			mes "a Elly? Sim, estou convencida";
			mes "que você a tem ajudado.";
			mes "Estive esperando por você, então";
			mes "deixe-me levá-lo ao meu quarto.";
			close2;
			cutin "",255;
			warp "kh_school",120,180;
			end;

		case 4:
			mes "[Allysia]";
			mes "A-Aquele é o inferno de";
			mes "Kiel! ele lhe enviou";
			mes "aqui para me pegar?! Eu";
			mes "não estou me arriscando!";
			close2;
			cutin "",255;
			monster "kh_school",117,144,"Constant",1745,1;
			monster "kh_school",117,144,"Constant",1745,1;
			monster "kh_school",117,144,"Constant",1745,1;
			monster "kh_school",117,144,"Constant",1745,1;
			end;

		case 5:
			mes "[Allysia]";
			mes "......";
			mes "........";
			mes "...........";
			close2;
			cutin "",255;
			end;

		}

		mes "[Allysia]";
		mes "Hm? Isso não prova";
		mes "que Elly realmente confia em você...";
		close2;
		cutin "",255;
		end;
	}

	else if (KielHyreQuest >= 40) {
		mes "[Allysia]";
		mes "Por favor me siga.";
		close2;
		cutin "",255;
		warp "kh_school",120,180;
		end;
	}
}


kh_school,117,149,4	script	Bela Dama::BeatifulLadyKHQ2	894,{
	end;
}

kh_school,118,149,4	duplicate(BeatifulLadyKHQ2)	Bela Dama::BeatifulLadyKHQ3	894

kh_school,120,149,4	duplicate(BeatifulLadyKHQ2)	Beautiful lady::BeatifulLadyKHQ4	894

kh_school,121,149,4	duplicate(BeatifulLadyKHQ1)	Beautiful lady::BeatifulLadyKHQ5	894

//----------------------------------------------------------------------------
// Beautiful Lady "Allysia"
//----------------------------------------------------------------------------
kh_school,122,186,4	script	Bela Dama	894,{
	if (checkweight(7496,1) == 0) {
		mes "^3355FF- Espere!! -";
		mes "- Você está carregando muitos itens";
		mes "- e não será capaz de aceitar mais. -";
		mes "- Por favor arrume algum espaço";
		mes "- no seu inventário antes de retornar. -^000000";
		close;
	}

	cutin "kh_ellisia",2;
	if (KielHyreQuest <= 38) {
		mes "[Allysia]";
		mes "Amigo(a) do protótipo Elly,";
		mes "lhe dou as boas vindas. Como você";
		mes "deve ter percebido, preciso de sua";
		mes "ajuda. Kiel Hyre está ajudando";
		mes "em algum lugar dentro dessa fábrica.";
		next;
		mes "[Allysia]";
		mes "É imperativo que";
		mes "você procure por Kiel Hyre";
		mes "e o resgate o mais rápido";
		mes "que você possa!";
		next;

		switch(select("O que é essa fábrica?","O quê aconteceu a ^FF0000Kiel Hyre^000000?")) {

		case 1:
			mes "[Allysia]";
			mes "Essa fábrica é parte dos";
			mes "negócios secretos da";
			mes "Fundação Kiel Hyre, onde robôs";
			mes "humanóides são fabricados. Eu mesma,";
			mes "e todos os estudantes da academia";
			mes "somos na verdade robôs, não humanos.";
			next;
			mes "[Allysia]";
			mes "O objetivo final da Fundação";
			mes "Kiel Hyre é desenvolver";
			mes "robôs superiores que ajudarão";
			mes "a sociedade humana. Como robôs, nós";
			mes "podemos fazer tarefas que são muito";
			mes "perigosas ou difíceis para humanos.";
			break;

		case 2:
			mes "[Allysia]";
			mes "^3355FFKiehl^000000 estava para";
			mes "fazer modificações anormais";
			mes "aos robôs humanóides. Isso";
			mes "foi reportado à Kiel Hyre,";
			mes "que foi parar Kiehl.";
			mes "No entanto, Hyre não retornou.";
			next;
			mes "[Allysia]";
			mes "Temendo que Kiehl pudesse";
			mes "me quebrar, Kiel Hyre trouxe";
			mes "uma cópia de mim no lugar. Ainda posso";
			mes "detectar os batimentos cardíacos de Kiel Hyre,";
			mes "enão ele deve estar bem, mas seu";
			mes "próprio filho pode machucá-lo breve.";
			next;
			mes "[Allysia]";
			mes "Pegue esse esse cartão";
			mes "que vai lhe permitir";
			mes "entrar em áreas secretas";
			mes "dentro dessa fábrica. Se você";
			mes "encontrar Kiel Hyre, por favor";
			mes "me avise imediatamente.";
			getitem 7496,1; //Red_Keycard
			set KielHyreQuest,40;
			break;

		}

		close2;
		cutin "",255;
		end;

	}

	else if (KielHyreQuest == 40) {
		mes "[Allysia]";
		mes "Ainda posso detectar";
		mes "os batimentos cardíacos de Kiel Hyre,";
		mes "mas seu filho Kiehl pode";
		mes "fazer algo desesperado contra";
		mes "ele logo. Por favor, localize Kiel";
		mes "Hyre antes que isso aconteça!";
		close2;
		cutin "",255;
		warp "kh_dun01",22,216;
		end;
	}

	else if (KielHyreQuest == 42) {
		mes "[Allysia]";
		mes "Você já";
		mes "localizou Kiel Hyre?";
		next;
		mes "^3355FFVocê conta a Allysia onde^000000";
		mes "^3355FFKiel Hyre estava trancado^000000";
		mes "^3355FFe lhe entrega o fragmento^000000";
		mes "^3355FFde metal que Kiel Hyre lhe^000000";
		mes "^3355FFdeu. Ela pega o fragmento^000000";
		mes "^3355FFe coloca no pulso dela.^000000";
		next;
		mes "[Allysia]";
		mes "...Código secreto de Kiel Hyre";
		mes "confirmado. área B_2_3.";
		mes "Sinais vitais estão normais.";
		mes "Envelope recebido. Enviando";
		mes "desenhos de Bonecos Modificados...";
		next;
		mes "[Allysia]";
		mes "Certo, Recebi as ordens";
		mes "de Kiel Hyre, e";
		mes "devo cumpri-las...";
		set KielHyreQuest,44;
		delitem 7497,1; //Metal_Fragment
		close2;
		cutin "",255;
		end;
	}

	else if (KielHyreQuest == 44) {
		mes "[Allysia]";
		mes "Certo, Tenho uma missão";
		mes "à cumprir para Kiel Hyre,";
		mes "e não tenho muito tempo.";
		mes "Deixe-me lhe dar algumas instruções";
		mes "específicas rapidamente.";
		next;
		mes "[Allysia]";
		mes "Primeiramente, preciso pegar seus";
		mes "cartões por razões de segurança.";
		mes "Segundamente, me encontre na mansão";
		mes "de Kiel Hyre em Lighthalzen.";
		mes "Mostre a Chave Dourada para";
		mes "ser admitido nas áreas";
		delitem 7492,1; //Yellow_Keycard
		delitem 7495,1; //Blue_Keycard
		delitem 7496,1; //Red_Keycard
		set KielHyreQuest,46;
		next;
		mes "[Allysia]";
		mes "Eu entendo que isso";
		mes "é repentino, e não estou";
		mes "lhe dando uma explicação direta";
		mes "mas algo horrível";
		mes "vai acontecer se eu não";
		mes "me apressar o mais rápido possível.";
		close2;
		warp "yuno_fild08",73,172;
		cutin "",255;
		end;
	}
	
	else if (KielHyreQuest >= 44) {
		mes "[Allysia]";
		mes "Eu entendo que isso";
		mes "é repentino, e não estou";
		mes "lhe dando uma explicação direta";
		mes "mas algo horrível";
		mes "vai acontecer se eu não";
		mes "me apressar o mais rápido possível.";
		close2;
		warp "yuno_fild08",73,172;
		cutin "",255;
		end;
	}
	
}

//----------------------------------------------------------------------------
// Signboard (another useless NPC?)
//----------------------------------------------------------------------------
kh_dun01,163,223,4	script	Tabuleta	857,{
	mes "[Noticia]";
	mes "Bichinhos de estimação são proibidos";
	mes "nessa área. (Bichinhos que";
	mes "provêm assistência especial";
	mes "para deficientes visuais estão";
	mes "exclusos dessa regra.)";
	close;
}

//----------------------------------------------------------------------------
// Mechanical Devices for accessing restricted area
//----------------------------------------------------------------------------
kh_dun01,166,223,0	script	Dispositivo de Acesso::KHKeyardReader	111,{
	if ((KielHyreQuest <= 38) || (KielHyreQuest >= 44)) {
		mes "^3355FFVocê encontrou^000000";
		mes "^3355FFum dispositivo mecânico.^000000";
		mes "^3355FFParece que pode ser^000000";
		mes "^3355FFoperado inserindo o^000000";
		mes "^3355FFcartão correto no slot.^000000";
		close;
	}

	else if ((KielHyreQuest == 40) && (countitem(7496) >= 1)) {
		mes "^3355FFVocê encontrou^000000";
		mes "^3355FFum dispositivo mecânico.^000000";
		mes "^3355FFParece que pode ser^000000";
		mes "^3355FFoperado inserindo o^000000";
		mes "^3355FFcartão correto no slot.^000000";
		next;


		input @KHInput$;
		if (@KHInput$ == "Cartão de Acesso Vermelho") {
			mes "^3355FFA porta abre assim que^000000";
			mes "^3355FFvocê insere o Cartão de Acesso Vermelho..^000000";
			close2;
			warp "kh_dun01",170,227;
			end;
		}
		else {
			mes "^3355FFNada aconteceu.^000000";
			close;
		}

	}

}

kh_dun01,162,206,0	duplicate(KHKeyardReader)	Mechanical Device	111

//----------------------------------------------------------------------------
// Keep monsters out of the quest area.
// Silly really sinc ehte rest of it's a dungeon
//----------------------------------------------------------------------------
//kh_dun01,180,220,0	script	Warp de Monstro#kh1::KHMobWarp	-1,5,20,{
//OnTouchNPC:
//	warp "kh_dun01",178,138;
//	end;
//}

//kh_dun01,190,220,0	duplicate(KHMobWarp)	Monster Warp#kh2	-1,5,20
//kh_dun01,200,250,0	duplicate(KHMobWarp)	Monster Warp#kh3	-1,5,20
//kh_dun01,210,220,0	duplicate(KHMobWarp)	Monster Warp#kh4	-1,5,20
//kh_dun01,220,220,0	duplicate(KHMobWarp)	Monster Warp#kh5	-1,5,10

//----------------------------------------------------------------------------
// Kiel Hyre - OnTouch
//----------------------------------------------------------------------------
kh_dun01,224,233,0	script	Porta_Kiel_Hyre	-1,5,5,{
OnTouch:
	if (KielHyreQuest == 40) {
		if (checkweight(7497,1) == 0) {
			mes "^3355FF- Wait!! -";
			mes "- Você está carregando muitos ítens";
			mes "- e não será capaz de aceitar mais. -";
			mes "- Por favor abra algum espaço";
			mes "- no seu inventario antes de retornar. -^000000";
			close;
		}

		mes "^3355FFVocê pode ouvir fracamente^000000";
		mes "^3355FFuma voz do outro lado^000000";
		mes "^3355FFdessa porta.^000000";
		next;
		mes "[????]";
		mes "...Kiehl...";
		mes "...Como se atreve...!";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "Senhor Kiel Hyre?";
		mes "É você aí dentro?";
		next;
		mes "[Kiel Hyre]";
		mes "Q-Quem está aí?";
		mes "Identifique-se!";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "Sou... Sou...";
		next;
		mes "você explica sua história^000000";
		mes "para a voz atrás da^000000";
		mes "porta, e lhe diz o que^000000";
		mes "aconteceu à Elly e Allysia.^000000";
		next;
		mes "[Kiel Hyre]";
		mes "...Sim... Sou eu.";
		mes "Sou Kiel Hyre, aprisionado";
		mes "aqui. Ele foi tão longe";
		mes "como modificar Elly, eh?";
		mes "..................";
		next;
		mes "[Kiel Hyre]";
		mes "Rápido, leve esse";
		mes "módulo para Allysia!";
		mes "Ela saberá o que fazer";
		mes "com ele. Se você está realmente";
		mes "nos ajudando, então ela terá";
		mes "algumas instruções para você também.";
		next;
		mes "^3355FFKiel Hyre passa^000000";
		mes "^3355FFum estranho fragmento^000000";
		mes "^3355FFde metal pela^000000";
		mes "^3355FFfresta entre a^000000";
		mes "^3355FFporta e o chão.^000000";
		getitem 7497,1; //Metal_Fragment
		set KielHyreQuest,42;
		close;
	}


	else if (KielHyreQuest >= 42) {
		mes "[Kiel Hyre]";
		mes "......";
		close;
	}

}

//----------------------------------------------------------------------------
// Robot Factory Second Floor Entrances
//----------------------------------------------------------------------------
kh_dun01,44,203,0	script	Dispositivo de Acesso#1::KHAccess	111,{
	if (countitem(7509) < 1) {
		mes "^3355FFVocê encontrou";
		mes "um dispositivo mecânico.";
		mes "Parece que pode ser";
		mes "operado inserindo-se o";
		mes "cartão correto no slot.^000000";
		close;
	}

	else {
		mes "^3355FFVocê encontrou";
		mes "um dispositivo mecânico.";
		mes "Parece que pode ser";
		mes "operado inserindo-se o";
		mes "cartão correto no slot.^000000";
		next;

		input @KHInput$;
		if (@KHInput$ == "Cartão de Acesso Exuberante") {
			mes "^3355FFAssim que você insere o";
			mes "Cartão de Acesso Exuberante";
			mes "no slot de cartão,";
			mes "a porta se escancara";
			mes "revelando um longo lance";
			mes "de escadas para baixo.^000000";
			next;

			switch(select("Descer as Escadas","Cancelar")) {

			case 1:
				warp "kh_dun02",41,198;
				end;

			case 2:
				mes "^3355FFParece que essa porta";
				mes "se fechou automaticamente";
				mes "depois de um tempo limite";
				mes "pré programado que passou.^000000";
				close;

			}

		}

		else {
			mes "^3355FFvocê tenta empurrar a";
			mes "porta com toda a sua";
			mes "força, mas falha em";
			mes "fazê-la se mover.^000000";
			close;
		}

	}

}

kh_dun01,36,195,0	duplicate(KHAccess)	Dispositivo de Acesso#2	111

//============================================================================

//============================================================================
// Kiel Hyre Mansion NPCs, and Kiehl's Room NPCs
//============================================================================

//----------------------------------------------------------------------------
// Kiel's Steward
//----------------------------------------------------------------------------
kh_mansion,78,55,5	script	Mordomo::StewardKHQ1	109,{
	if (KielHyreQuest < 46) {
		mes "[Mordomo]";
		mes "Isso é uma residência privada,";
		mes "por favor saia.";
		close2;
		warp "lighthalzen",188,201;
		end;
	}

	if ((KielHyreQuest >= 46) && (KielHyreQuest < 50)) {
		mes "[Mordomo]";
		mes "Saudações.";
		mes "você foi convidado";
		mes "pelo mestre";
		mes "dessa mansão?";
		next;

		switch(select("Mostrar a Chave Dourada","????")) {

		case 1:
			mes "[Mordomo]";
			mes "Ah, Mestre "+strcharinfo(0)+".";
			mes "Estava aguardando a sua";
			mes "chegada. Por favor, por aqui.";
			close2;
			warp "kh_mansion",21,14;
			end;

		case 2:
			mes "[Mordomo]";
			mes "Se você não foi";
			mes "convidado pelo mestre";
			mes "dessa mansão, então eu";
			mes "temo que tenha de insistir em";
			mes "sua partida imediata!";
			close2;
			warp "lightalzen",188,201;
			end;

		}

	}

	if ((KielHyreQuest >= 50) && (KielHyreQuest < 64)) {
		L_SeeKielHyre:
		mes "[Mordomo]";
		mes "Ah, Mestre "+strcharinfo(0)+".";
		mes "É um prazer em";
		mes "receber sua compania";
		mes "novamente. Você";
		mes "gostaria de ver meu mestre?";
		next;

		switch(select("Sim","Não")) {

		case 1:
			mes "[Mordomo]";
			mes "Muito bem.";
			mes "Por aqui~";
			close2;
			warp "kh_mansion",21,14;
			end;

		case 2:
			mes "[Mordomo]";
			mes "Muito bem.";
			mes "Por favor, sinta-se";
			mes "em casa.";
			close;

		}

	}

	if ((KielHyreQuest == 52) || (KielHyreQuest == 54) || (KielHyreQuest >= 64) && (KielHyreQuest <= 70)) {
		mes "[Mordomo]";
		mes "Ah, Mestre "+strcharinfo(0)+".";
		mes "É um prazer em";
		mes "receber sua compania";
		mes "novamente. Você";
		mes "gostaria de ver meu mestre, ou...?";
		next;

		switch(select("^FF0000Kiel Hyre^000000","^3355FFMitchell^000000")) {

		case 1:
			mes "[Mordomo]";
			mes "Muito bem.";
			mes "Por aqui~";
			close2;
			warp "kh_mansion",21,14;
			end;

		case 2:
			mes "[Mordomo]";
			mes "Oh...? Você deve";
			mes "estar aqui para trazer";
			mes "boas novas. Com licença...";
			next;
			mes "^3355FFO Mordomo furtivamente^000000";
			mes "^3355FFolhou em volta pra checar^000000";
			mes "^3355FFse alguém o estava observando.^000000";
			next;
			mes "[Mordomo]";
			mes "Acredito que seja";
			mes "seguro o bastante em deixar";
			mes "você vê-lo agora...";
			mes "Por favor, rápido por aqui.";
			close2;
			warp "kh_mansion",20,87;
			end;

		}

	}

	if (KielHyreQuest >= 70) {
		goto L_SeeKielHyre;
	}

}

//----------------------------------------------------------------------------
// Kiel Hyre
//----------------------------------------------------------------------------
kh_mansion,22,28,4	script	Kiel Hyre	903,{
	set @now_weight,MaxWeight-Weight;
	if (@now_weight < 2000) {
		mes "^3355FFSó um segundo...";
		mes "Você está carregando";
		mes "muitos itens com você";
		mes "agora, então você vai";
		mes "precisar liberar mais";
		mes "espaço no seu inventario antes...^000000";
		close;
	}

	cutin "kh_kyel02",2;
	if (KielHyreQuest < 46) {
		mes "[Kiel Hyre]";
		mes ".........";
		close2;
		cutin "",255;
		end;
	}

	else if (KielHyreQuest == 46) {
		cutin "kh_kyel01",2;
		mes "[Kiel Hyre]";
		mes "Ah, você deve ser "+strcharinfo(0)+".";
		mes "Gostaria de lhe agradecer por salvar";
		mes "minha vida. Você deve ter muitas";
		mes "perguntas a me fazer, então eu";
		mes "farei o melhor para lhe dar respostas.";
		next;

		L_Menu:

		switch(select("Robôs?","^3355FFKiehl^000000?","Broche de ^FF0000Elly^000000?")) {

		case 1:
			mes "[Kiel Hyre]";
			mes "Andei pesquisando";
			mes "robótica por trinta e dois";
			mes "anos agora. Tenho orgulho de";
			mes "dizer que tive sucesso";
			mes "Onde o grande Sábio";
			mes "Varmundt não teve.";
			next;
			mes "[Kiel Hyre]";
			mes "Era meu sonho em";
			mes "desenvolver robôs humanóides";
			mes "de humanos. Aqueles Guardiões";
			mes "poderiam ser robôs também, mas eles";
			mes "não operam usando vontade própria.";
			next;
			mes "[Kiel Hyre]";
			mes "Se você quiser saber mais";
			mes "especificamente sobre";
			mes "robótica, por quê você não fala";
			mes "com ^3355FFAllysia^000000? Ela pode explicar";
			mes "tudo muito mais suscintamente";
			mes "que eu. Eu tendo a errar...";
			if (@KHQ1Read < 1) { set @KHQ1Read,1; }
			break;

		case 2:
			mes "[Kiel Hyre]";
			mes "^3355FFKiehl^000000 é meu único filho,";
			mes "mas o amor da minha vida";
			mes "morreu assim que deu à luz a";
			mes "ele. Eu admito que ele é";
			mes "um gênio em design";
			mes "mecânico e desenvolvimento.";
			next;
			mes "[Kiel Hyre]";
			mes "Ele é altamente responsável";
			mes "pela criação da Terceira";
			mes "Geração de robôs como Elly.";
			mes "Infelizmente, ele está tentando";
			mes "modificar suas criações para";
			mes "algum propósito sinistro.";
			next;
			mes "[Kiel Hyre]";
			mes "Eu tentei pará-lo,";
			mes "mas acabei ficando";
			mes "trancado dentro da fábrica.";
			mes "Não sei porque ele quer";
			mes "fazer isso. Ainda não tenho";
			mes "absolutamente nenhuma pista...";
			if (@KHQ2Read < 1) { set @KHQ2Read,1; }
			break;

		case 3:
			mes "[Kiel Hyre]";
			mes "Aquele broche que Elly estava";
			mes "segurando tem o ^3355FFemblema de Kiehl^000000";
			mes "entalhado nele. Ah e aquele";
			mes "homem de preto ameaçando os";
			mes "estudantes? Aquele era provavelmente";
			mes "^3355FFKaiser^000000, o guarda-costas de Kiehl.";
			next;
			mes "[Kiel Hyre]";
			mes "Kaiser...";
			mes "Eu não sei";
			mes "nada sobre ele.";
			mes "Nunca nem olhei seu";
			mes "rosto! Kiehl simplesmente o contratou";
			mes "sem que eu soubesse...";
			if (@KHQ3Read < 1) { set @KHQ3Read,1; }
			break;

		}

		if ((@KHQ1Read == 1) && (@KHQ2Read == 1) && (@KHQ3Read == 1)) {
			mes "[Kiel Hyre]";
			mes "Se você não tiver";
			mes "mais perguntas para mim,";
			mes "então você por favor";
			mes "me deixe descansar?? Ainda não";
			mes "estou me sentido bem do tempo";
			mes "que fiquei trancado na fábrica.";
			delitem 7493,1; //Golden_Key
			delitem 7494,1; //Exquisite_Button
			set KielHyreQuest,48;
		}

		else { 
			next;
			goto L_Menu; 
		}

	}

	else if (KielHyreQuest == 48) {
		mes "Ah, Quase esqueci.";
		mes "Por favor, peque isso como";
		mes "uma pequena recompensa por";
		mes "ter salvo minha vida.";
		set KielHyreQuest,50;
		getitem 12105,1; //Taming_Gift_Set
		getexp 700000,0;
	}

	else if ((KielHyreQuest >= 50) && (KielHyreQuest < 64)) {
		mes "Se você não tiver";
		mes "mais perguntas para mim,";
		mes "então você por favor";
		mes "me deixe descansar?? Ainda não";
		mes "estou me sentido bem do tempo";
		mes "que fique trancado na fábrica.";
	}

	else if (KielHyreQuest == 64) {
		cutin "kh_kyel01",2;
		mes "[Kiel Hyre]";
		mes "Hm? Há algo ";
		mes "que você";
		mes "gostaria de";
		mes "me perguntar?";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "Eu não tenho evidências";
		mes "concretas suficientes ainda,";
		mes "mas eu devo ter algumas";
		mes "perguntas em breve.";
	}

	else if (KielHyreQuest == 68) {
		cutin "kh_kyel02",2;
		mes "[Kiel Hyre]";
		mes "Ah, "+strcharinfo(0)+".";
		mes "É você. Então como posso";
		mes "lhe ajudar hoje?";
		next;

		switch(select("Sobre ^3355FFAllysia^000000...")) {

		case 1:
			mes "["+strcharinfo(0)+"]";
			mes "Sabe, eu estava olhando";
			mes "nessa casa deserta";
			mes "em Yuno, e descobri";
			mes "um velho porta retratos de uma mulher";
			mes "que se parece muito com Allysia.";
			next;
			cutin "kh_kyel02",2;
			mes "[Kiel Hyre]";
			mes "Oh...";
			mes "Isso é tudo?";
			mes "Pensei que você tinha";
			mes "uma pergunta sobre robótica.";
			next;
			cutin "kh_Kyel03",2;
			mes "[Kiel Hyre]";
			mes "De qualquer forma, é uma";
			mes "estranha coincidência.";
			mes "Bem, suporto que não é";
			mes "tão estranho encontrar";
			mes "pessoas parecidas com outras...";
			next;
			mes "["+strcharinfo(0)+"]";
			mes "Eu não acho que seja só";
			mes "uma coincidência. A mulher";
			mes "naquele pequeno retrato de trinta anos";
			mes "também era chamada Allysia, e ela";
			mes "ela trabalhava na rua Orsimier";
			mes "em Yuno. Isso lhe diz algo?";
			next;
			cutin "kh_kyel02",2;
			mes "[Kiel Hyre]";
			mes "......";
			mes ".........";
			mes "............";
			next;
			cutin "kh_kyel01",2;
			mes "["+strcharinfo(0)+"]";
			mes "Então pensei que essa";
			mes "Allysia deve ter sido a";
			mes "mulher que você amou, e";
			mes "que você baseou a aparência dos";
			mes "seus robôs nela.";
			next;
			cutin "kh_kyel02",2;
			mes "[Kiel Hyre]";
			mes "............";
			next;
			cutin "kh_kyel01",2;
			mes "["+strcharinfo(0)+"]";
			mes "Acho que foi isso que aconteceu:";
			mes "quando você era um jovem, pobre";
			mes "você se apaixonou por";
			mes "Allysia. Entretanto, ela estava";
			mes "apaixonada por Rosimier, que";
			mes "era rico e poderoso.";
			next;
			mes "["+strcharinfo(0)+"]";
			mes "Entretanto, Rosimier estava";
			mes "noivo de uma outra";
			mes "mulher, e ele acabou por";
			mes "casar-se com sua noiva, assim";
			mes "partindo o coração de Allysia.";
			next;
			mes "["+strcharinfo(0)+"]";
			mes "Sentindo-se traída, seu";
			mes "coração partido, Allysia pulou";
			mes "em um rio. Então você decidiu";
			mes "se vingar de Rosimier, então";
			mes "acabou por se juntar com a";
			mes "Corporação Rekenber!";
			next;
			cutin "kh_Kyel03",2;
			mes "[Kiel Hyre]";
			mes "Hahahahahahaha!";
			mes "Oh, Que imaginação~";
			mes "Isso é muito ridículo...";
			mes "Ainda assim, eu admito, talvez";
			mes "eu tenha feito o modelo Allysia depois";
			mes "de ver aquela mulher há muito tempo.";
			next;
			mes "[Kiel Hyre]";
			mes "Eu quase esqueci";
			mes "dela! Acho que nós";
			mes "eramos amigos... Ainda assim,";
			mes "de onde você teve a idéia";
			mes "de que eu pudesse";
			mes "estar apaixonado por ela?";
			next;

			switch(select("Revelar o retrato de Kiel da Cabana")) {

			case 1:
				cutin "kh_kyel02",2;
				mes "[Kiel Hyre]";
				mes "O-O quê...";
				mes "Como...";
				mes "Onde você...?";
				next;
				mes "["+strcharinfo(0)+"]";
				mes "Kiel Hyre, eu encontrei esse";
				mes "retrato seu quando jovem";
				mes "na casa do";
				mes "homem que comprou o anel de Allysia.";
				mes "Eu até falei com o pescador";
				mes "que descobriu o corpo de Allysia.";
				next;
				mes "["+strcharinfo(0)+"]";
				mes "Você pagou uma quantia absurda";
				mes "de dinheiro para comprar o anel de";
				mes "Allysia. Como você pode me dizer";
				mes "que você não a amava?";
				next;
				cutin "kh_Kyel03",2;
				mes "[Kiel Hyre]";
				mes "*Droga...*";
				mes "Você me pegou, você me pegou.";
				mes "Eu não queria que você descobrisse";
				mes "a verdade. Você está certo.";
				mes "Eu amei Allysia, e desenvolvi";
				mes "meu robô para se parecer com ela.";
				next;
				mes "[Kiel Hyre]";
				mes "Eu nunca poderia a esquecer.";
				mes "Nunca. Mas nunca faria";
				mes "nada para ferir o";
				mes "Rosimiers! Sou um cientista!";
				mes "Eu o odiei quando eu era jovem,";
				mes "mas as coisas são diferentes agora!";
				next;
				mes "[Kiel Hyre]";
				mes "Eu não derramei lágrimas quando o";
				mes "Rosimiers caiu, mas eu não fui o";
				mes "responsável. Além do mais eu não";
				mes "tinha os recursos ou a";
				mes "capacidade de causar...";
				next;
				cutin "kh_kyel02",2;
				mes "["+strcharinfo(0)+"]";
				mes "Infelizmente acho que as";
				mes "evidências mostram o contrário.";
				next;

				switch(select("Mostrar o retrato de Rosimiers")) {

				case 1:
					mes "["+strcharinfo(0)+"]";
					mes "Dê uma boa olhada";
					mes "nesse retrato que";
					mes "encontrei na antiga casa de";
					mes "Rosimiers. Percebe";
					mes "algo... incriminador?";
					next;
					cutin "kh_Kyel03",2;
					mes "[Kiel Hyre]";
					mes "Com excessão daquele";
					mes "James Rosimier, você quer";
					mes "dizer? Não! Não vejo";
					mes "nada errado com";
					mes "essa imagem ao todo.";
					next;
					mes "["+strcharinfo(0)+"]";
					mes "Dê uma boa olhada";
					mes "no relógio de bolso";
					mes "no retrato. Aquele é";
					mes "o relógio de bolso que você";
					mes "usa hoje, não é?";
					next;
					cutin "kh_kyel02",2;
					mes "[Kiel Hyre]";
					mes "...!!!";
					next;
					mes "["+strcharinfo(0)+"]";
					mes "Você pode não ter causado";
					mes "a queda de Rosimiers";
					mes "por si só, mas com a ajuda da";
					mes "Corporação Rekenber eu";
					mes "diria que era inteiramente possível!";
					next;
					cutin "kh_Kyel03",2; 
					mes "[Kiel Hyre]";
					mes "Bem jogado, aventureiro.";
					mes "Bem jogado. Eu não me arrependo";
					mes "do que fiz: eles mataram minha";
					mes "Allysia! Se  James não a tivese";
					mes "traído, se ele não a tivesse feito";
					mes "cometer suicídio...";
					next;
					mes "["+strcharinfo(0)+"]";
					mes "Aí é que você está errado!";
					mes "Allysia foi assassinada, ela não";
					mes "cometeu suicídio. Dê uma boa";
					mes "olhada nesse bilhete aqui!";
					next;
					mes "[Kiel Hyre]";
					mes "O quê?!";
					next;

					switch(select("Mostrar o bilhete de James")) {

					case 1:
						mes "[Kiel Hyre]";
						mes "O que isso prova?";
						mes "Isso não mostra que";
						mes "James não traiu Allysia.";
						mes "Como isso muda tudo?";
						mes "Ela está morta, nada que eu faça";
						mes "trará ela de volta prá mim!";
						next;
						mes "["+strcharinfo(0)+"]";
						mes "Eu nunca disse que James não";
						mes "a traiu. Olhe na data";
						mes "no bilhete. James fez planos";
						mes "de fugir com ela em 20 de Agosto";
						mes "Entretanto, o corpo dela foi";
						mes "encontrado no mesmo dia.";
						next;
						mes "["+strcharinfo(0)+"]";
						mes "Portanto, Allysia deve ter";
						mes "morrido em 19 de Agosto. Se ela";
						mes "estava planejando em fugir com";
						mes "seu amor no dia seguinte, então";
						mes "ela não tinha razão para se matar!";
						next;
						mes "[Kiel Hyre]";
						mes "Não, isso não está certo!";
						mes "Ela provavelmente não podia";
						mes "confiar em mim. Ela deve ter";
						mes "percebido que ela não era nada";
						mes "além de um brinquedo para ele!";
						next;
						mes "["+strcharinfo(0)+"]";
						mes "Ah sim? Digo que ela pulou";
						mes "no rio por que você";
						mes "encontrou-se com ela naquele dia.";
						mes "Agora, dê uma boa olhada nisso!";
						next;

						switch(select("Mostrar o bilhete de K.H.")) {

						case 1:
							mes "["+strcharinfo(0)+"]";
							mes "Esse bilhete foi escrito por";
							mes "um home com suas iniciais,";
							mes "K.H. Essas iniciais estavam também";
							mes "escritas no retrato dela. Você";
							mes "deve ter escrito esse bilhete:";
							mes "há muitas coincidências!";
							next;
							mes "["+strcharinfo(0)+"]";
							mes "De acordo com esse bilhete,";
							mes "você disse a Allysia que você";
							mes "queria vê-la novamente";
							mes "no lugar onde se encontraram antes.";
							mes "Acho que você a viu novamente...";
							mes "em 19 de Agosto, o dia que ela morreu!";
							next;
							mes "["+strcharinfo(0)+"]";
							mes "Estou presumindo que o lugar que vocês";
							mes "se encontraram primeiro foi próximo ao";
							mes "rio. Chega de suas mentiras:";
							mes "Me conte o que realmente aconteceu!";
							next;
							cutin "kh_kyel02",2;
							mes "[Kiel Hyre]";
							mes "............";
							mes ".........";
							mes "......";
							next;
							cutin "kh_Kyel03",2;
							mes "[Kiel Hyre]";
							mes "Hah... Ha ha ha...";
							mes "Sim... Está certo...";
							mes "Aquela noite horrível.";
							mes "Eu lembro muito bem...";
							mes ".....................";
							next;
							cutin "kh_kyel02",2;
							mes "[Kiel Hyre]";
							mes "Aquela noite, quando ela veio";
							mes "ao rio, para me encontrar como";
							mes "eu havia pedido, eu implorei a ela para";
							mes "fugir comigo, ao invés";
							mes "de esperar por aquele James.";
							next;
							mes "[Kiel Hyre]";
							mes "Ela insistiu que James";
							mes "nunca a trairia, e ele";
							mes "prometeu a levar";
							mes "com ele no dia seguinte. você";
							mes "pode imaginar como aquilo me fez";
							mes "sentir? Eu não era nada prá ela.";
							next;
							mes "[Kiel Hyre]";
							mes "Meus sentimentos não importavam para";
							mes "ela. Ela ficou irritada";
							mes "com aquele anel... Eu perdi o controle";
							mes "e tentei tirar aquela coisa maldita";
							mes "dela e jogar";
							mes "dentro do rio...";
							next;
							mes "[Kiel Hyre]";
							mes "Mas sabe de uma coisa?";
							mes "Ela se debateu, ela realmente";
							mes "lutou comigo! Era apenas uma pequena";
							mes "briga, mas então antes que eu percebesse";
							mes "o chão debaixo de nós";
							mes "cedeu e... as chuvas...";
							next;

							switch(select(".........")) {

							case 1:
								mes "[Kiel Hyre]";
								mes "Não estou certo o que";
								mes "foi. A chuva enfraqueceu";
								mes "o chão, algo estava";
								mes "errado... e ela simplesmente...";
								mes "simplesmente... O rio a engoliu...";
								mes "Me senti vazio. Ela se foi. ";
								set KielHyreQuest,70;
								delitem 7498,1; //Losimier's_House_Key
								delitem 7499,1; //Portrait_of_a_Family
								delitem 7500,1; //Portrait_of_a_Lady
								delitem 7501,1; //K.H's_Letter
								delitem 7502,1; //James's_Memo
								delitem 7503,1; //Portrait_of_a_Guy
								close;

							}

						}

					}

				}

			}

		}

	}

	else if (KielHyreQuest == 70) {
		cutin "kh_kyel01",2;
		mes "[Kiel Hyre]";
		mes "Você já sabe que";
		mes "ela foi encontrada morta no";
		mes "dia seguinte. Mas o que realmente";
		mes "partiu meu coração foi que";
		mes "ela segurou aquele anel tão firmemente";
		mes "em sua mão, mesmo na morte...";
		next;
		cutin "kh_kyel03",2;
		mes "[Kiel Hyre]";
		mes "A família dele tinha tudo";
		mes "enquanto eu não tinha nada. E";
		mes "ele teve a audácia de tirar";
		mes "Allysia de mim?!";
		mes "Como isso poderia estar certo?";
		next;
		mes "[Kiel Hyre]";
		mes "Ainda que ela tenha falecido";
		mes "eu ainda queria provar";
		mes "para Allysia que tipo de pessoa";
		mes "horrível James era realmente.";
		mes "E então foi quando me juntei à";
		mes "Corporação Rekenber.";
		next;
		mes "[Kiel Hyre]";
		mes "Desenvolvi a primeiríssima";
		mes "Geração de Robôs, a qual";
		mes "eu chamei Allysia, e vendi os";
		mes "esquemas para Rekenber. Eu lhes dei";
		mes "robôs, e eles me deram dinheiro,";
		mes "poder, subordinados obedientes.";
		next;
		mes "[Kiel Hyre]";
		mes "Claro eu sabia que usariam";
		mes "meus robôs para espionar e matar!";
		mes "Mas sabe de uma coisa? Eu não";
		mes "me importava desde que eles me dessem";
		mes "os meios para minha vingança. Era";
		mes "a parceria perfeita, realmente.";
		next;
		mes "[Kiel Hyre]";
		mes "Você me pegou";
		mes "bem onde você queria.";
		mes "Para quem você está trabalhando";
		mes "e exatamente o que";
		mes "você quer? Meus esquemários?";
		mes "Minha morte? Tudo...?";
		next;
		cutin "kh_kyel01",2;
		mes "["+strcharinfo(0)+"]";
		mes "Na verdade, eu só quero";
		mes "perguntar sobre a natureza";
		mes "da sua relação profissional com";
		mes "a Corporação Rekenber";
		mes "e sobre Kiehl.";
		next;
		mes "[Kiel Hyre]";
		mes "Kiehl, ne? Depois de ouvir";
		mes "minha história doida, acho";
		mes "que você já suspeita da";
		mes "verdade sobre ele... Ele também é";
		mes "um robô, especificamente o primeiro";
		mes "da segunda geração de modelos.";
		next;
		mes "[Kiel Hyre]";
		mes "Sua mente foi desenvolvida usando.";
		mes "uma forma experimental e instável,";
		mes "de Pergaminhos de Mágica Condensada";
		mes "Ele foi o único robô";
		mes "da Segunda Geração que";
		mes "foi permitido existir.";
		next;
		mes "[Kiel Hyre]";
		mes "Eu fiquei muito apegado";
		mes "a Kiehl. Não é de se surpreender,";
		mes "vendo que robótica se";
		mes "tornou minha vida. Eu até o criei";
		mes "como meu próprio filho, e ensinei-lhe";
		mes "tudo sobre robótica";
		next;
		mes "[Kiel Hyre]";
		mes "Kiehl agora é um gênio,";
		mes "e até desenvolveu a";
		mes "Terceira Geração de Robôs.";
		mes "Infelizmente eu falhei em";
		mes "educá-lo propriamente com";
		mes "moral e ética humana.";
		next;

		switch(select("......")) {

		case 1:
			mes "[Kiel Hyre]";
			mes "Ele está transformando";
			mes "a Terceira Geração de robôs";
			mes "em máquinas de matar. Por isso";
			mes "eu tentei colocá-los todos";
			mes "na academia, então eles poderiam";
			mes "aprender o comportamento humano.";
			next;
			mes "[Kiel Hyre]";
			mes "Mesmo que a academia";
			mes "tenha atrasado os planos de Kiehl,";
			mes "ele foi bem sucedido em";
			mes "converter todos os robôs";
			mes "em incontroláveis máquinas";
			mes "de destruição em massa.";
			next;
			mes "[Kiel Hyre]";
			mes "Sim, ele estava trabalhando";
			mes "juntamente com Rekenber.";
			mes "Seu verdadeiro objetivo é";
			mes "criar máquinas mortíferas";
			mes "para uso de Rekenber.";
			next;
			mes "[Kiel Hyre]";
			mes "Você sabe todos os segredos";
			mes "do meu passado agora. Não estou";
			mes "aborrecido com você ou nada,";
			mes "mas eu tenho algo";
			mes "que gostaria de lhe pedir.";
			next;
			mes "[Kiel Hyre]";
			mes "Por favor, pare Kiehl!";
			mes "Eu não quero que essa loucura";
			mes "destrua mais robôs!";
			mes "Vejo cada um e todos";
			mes "eles como se fossem meus filhos!";
			next;
			mes "[Kiel Hyre]";
			mes "Sei que devo tomar";
			mes "total responsabilidade por tudo";
			mes "que aconteceu. Eu prometo";
			mes "que vou pagar por";
			mes "meus atos, assim que tudo";
			mes "estiver resolvido.";

			next;

			select("Aceitar","Okay","Aham");

			mes "[Kiel Hyre]";
			mes "Muitíssimo obrigado!";
			mes "Você pode encontrar Kiehl";
			mes "no nível subterrâneo";
			mes "dessa mansão.";
			set KielHyreQuest,72;

		}

	}

	else if (KielHyreQuest == 72) {
		cutin "kh_kyel01",2;
		//I believe this text goes here o_o
		mes "[Kiel Hyre]";
		mes "Ele fica em um quarto velho";
		mes "onde ele foi criado, mas";
		mes "ele reconstruiu como um tipo";
		mes "de caverna para manter todos";
		mes "fora. Incluindo eu. Sim, ele";
		mes "não confia em ninguém mais...";
		next;
		mes "[Kiel Hyre]";
		mes "Quando você o encontrar, quero";
		mes "que você tire o anel de Allysia";
		mes "do coração dele. Se você";
		mes "o remover, vai impedir";
		mes "dele se tornar selvagem.";
		next;

		switch(select("Anel de Allysia?")) {

		case 1:
			mes "[Kiel Hyre]";
			mes "Sim... Seu anel é o";
			mes "começo de tudo. Eu coloquei";
			mes "aquilo no coração dele para";
			mes "que eu nunca esquecesse o que";
			mes "o Rosimiers fez para mim.";
			next;
			mes "[Kiel Hyre]";
			mes "Acho que o crescimento de Kiehl";
			mes "é tão mais poderoso que o que armas";
			mes "normais podem não funcionar nele";
			mes "mais. Use esse";
			mes "dispositivo que fará com que seu";
			mes "suprimento de energia flutue.";
			getitem 7504,1; //Power_Source
			next;
			cutin "kh_kyel03",2;
			mes "[Kiel Hyre]";
			mes "Se você conseguir ligar isso";
			mes "no corpo de Kiehl, então";
			mes "ele não poderá usar o corpo";
			mes "dele com poder total. Enquanto ele";
			mes "estiver enfraquecido, abra o seu peito";
			mes "e tire o anel do seu coração.";
			next;
			mes "[Kiel Hyre]";
			mes "Me avise assim";
			mes "Que você estiver pronto, Então eu o";
			mes "guiarei ao quarto de Kiehl.";
			set KielHyreQuest,74;
			break;

		}

	}

	else if ((KielHyreQuest >= 74) && (KielHyreQuest <= 104)) {
		mes "[Kiel Hyre]";
		mes "Você está pronto";
		mes "para confrontar";
		mes "Kiehl agora?";
		next;

		switch(select("Sim","Não")) {

		case 1:
			mes "[Kiel Hyre]";
			mes "Há... uma passagem";
			mes "secreta que está aberta agora.";
			mes "Apenas vá para a minha direita";
			mes "mas tenha cuidado. Kiehl";
			mes "é extremamente perigoso.";
			enablenpc "Kiehl_Room_Warp";
			donpcevent "Kiehl_Room_Warp::OnEnable";
			break;

		case 2:
			mes "[Kiel Hyre]";
			mes "Por favor leve o";
			mes "tempo que precisar. Eu imagino";
			mes "que não será fácil.";
			break;

		}

	}

	else if ((KielHyreQuest >= 74) && (KielHyreQuest <= 106)) {
		cutin "kh_kyel01",2;
		mes "[Kiel Hyre]";
		mes "Você retornou...!";
		mes "Então você conseguiu";
		mes "recuperar o Anel de Allysia";
		mes "do coração de Kiehl?";
		next;
		if (countitem(7508) < 1) {
			mes "[Kiel Hyre]";
			mes "Quer dizer... Você não o tem?";
			mes "Por favor, recupere o Anel de Allysia";
			mes "do coração de Kiehl!";
			next;
			enablenpc "Kiehl_Room_Warp";
			donpcevent "Kiehl_Room_Warp::OnEnable";
			close2;
			cutin "",255;
		}
		mes "[Kiel Hyre]";
		mes "O-O quê aconteceu...?";
		mes "Kiehl desenvolveu um novo";
		mes "corpo para ele? I-Isso";
		mes "o faz a Quarta Geração";
		mes "de robôs. Eu não tinha";
		mes "idéia que ele era tão esperto.";
		next;
		mes "[Kiel Hyre]";
		mes "Espere, agora pensando melhor";
		mes "eu vi corpos de robôs que";
		mes "pareciam com Kiehl quando eu estava";
		mes "trancado na fábrica. Então ele";
		mes "estava usando aquelas cópias para";
		mes "desenvolver atualizações pessoais.";
		next;
		mes "[Kiel Hyre]";
		mes "Aqui, por favor pegue esse";
		mes "cartão que deixará você";
		mes "entrar e investigar os";
		mes "níveis mais profundos da fábrica.";
		mes "Eu investigarei o quarto de Kiehl.";
		getitem 7509,1; //Gorgeous_Keycard
		set KielHyreQuest,108;
		next;
		if (sex == 0) {
			if (getpartnerid() == 0) set @KHTitle$,"Miss";
			else set @KHSTitle$,"Srta";
		}
		else set @KHTitle$,"Sr.";
		mes "[Kiel Hyre]";
		mes "Kiehl é minha responsabilidade...";
		mes "Não importa qual o custo";
		mes "eu tenho de pará-lo! Oh,";
		mes "e aqui, por favor pegue isso";
		mes "com toda minha gratidão por";
		mes "sua ajuda, "+@KHTitle+". "+strcharinfo(0)+".";
		getitem 616,1;  //Old card Album
		delitem 7508,1; //Elysia_Ring
		getexp 1000000,0;
	}
	else if (KielHyreQuest >= 108) {
		mes "[Kiel Hyre]";
		mes "......";
		mes ".........";
		mes "............";
	}
	close2;
	cutin "",255;
	end;
}


//----------------------------------------------------------------------------
// Allysia
//----------------------------------------------------------------------------
kh_mansion,18,30,4	script	Allysia	894,{
	cutin "kh_ellisia",2;
	if (KielHyreQuest <= 68) {
		mes "[Allysia]";
		mes "Quem é você?";
		mes "Como chegou aqui?";
		mes "Vá embora";
		close;
	}

	else if (KielHyreQuest < 70) {
		mes "[Allysia]";
		mes "você deve estar surpreso";
		mes "por tudo que tem";
		mes "acontecido. Talvez tudo";
		mes "fosse mais fácil de entender";
		mes "se eu explicasse sobre robôs?";
		next;

		switch(select("Sim","Não")) {

		case 1:
			mes "[Allysia]";
			mes "Os robôs que você tem";
			mes "encontrado são bonecos mecânicos";
			mes "automatizados que podem";
			mes "pensar e operar independentemente.";
			mes "Muitos sábios tentaram desenvolver";
			mes "seus próprios robôs, mas falharam.";
			next;
			mes "[Allysia]";
			mes "Meu mestre, Kiel Hyre, esteve";
			mes "estudando robótica desde que";
			mes "tinha vinte anos e";
			mes "desenvolveu três diferentes";
			mes "gerações de robôs, a primeira,";
			mes "segunda e terceira gerações.";
			next;

			switch(select("Primeira Geração","Segunda Geração","Terceira Geração")) {

			case 1:
				mes "[Allysia]";
				mes "Eu sou um bom exemplo da";
				mes "Primeira Geração de Robôs de";
				mes "Kiel. Fui construída usando";
				mes "um esqueleto mecânico pesado,";
				mes "um coração robótico e pele";
				mes "quimicamente sintetizada.";
				next;
				mes "[Allysia]";
				mes "Minha unidade de processamento central,";
				mes "equivalente à seu cérebro, é";
				mes "essencialmente um Pergaminho de Memória";
				mes "baseado no esboço de Pergaminhos";
				mes "Mágicos que vocês";
				mes "aventureiros usam em batalha.";
				next;
				mes "[Allysia]";
				mes "Sou o mais velho tipo de";
				mes "robô humanóide, então eu peso";
				mes "muito, e minha mente pode somente";
				mes "processar uma quantidade limitada de";
				mes "dados. Então, eu não posso expressar";
				mes "emoções similarmente à um humano.";
				break;

			case 2:
				mes "[Allysia]";
				mes "A Primeira Geração de robôs";
				mes "foram desenvolvidas na maioria de";
				mes "partes mecânicas, mas a";
				mes "Segunda Geração de Robôs";
				mes "incorporaram a ciência e tecnologia";
				mes "dos Homunculus.";
				next;
				mes "[Allysia]";
				mes "A Segunda Geração de robôs";
				mes "parecem ter mais fida, já que";
				mes "têm pele artificial e carne";
				mes "criadas, ainda assim são";
				mes "construídos de um pesado";
				mes "esqueleto mecânico.";
				next;
				mes "[Allysia]";
				mes "A tecnologia elemental de";
				mes "pergaminhos dos Sábios também usada";
				mes "para desenvolver o Pergaminho de";
				mes "memória condensada, uma unidade de";
				mes "processamento central superior à";
				mes "usada na Primeira Geração de robôs.";
				next;
				mes "[Allysia]";
				mes "Então os Pergaminhos de Memória";
				mes "Condensados eram 100,000 vezes";
				mes "mais poderosos que os Pergaminhos";
				mes "de Memória comuns, eles eram";
				mes "problemáticos e tendiam";
				mes "à muitos erros e problemas";
				next;
				mes "[Allysia]";
				mes "A Segunda Geração de Robôs";
				mes "eram capazes de expressar";
				mes "emoções humanas, mas sua";
				mes "produção foi interrompida após seis";
				mes "anos pois foram considerados";
				mes "defeituosos.";
				break;

			case 3:
				mes "[Allysia]";
				mes "A Terceira Geração de robôs";
				mes "foram desenvolvidas na sua maioria";
				mes "pelo filho de Kiel Hyre, Kiehl,";
				mes "e não usam esqueletos";
				mes "mecânicos: Todo o corpo";
				mes "é basicamente um homunculus.";
				next;
				mes "[Allysia]";
				mes "Com seus corpos orgânicos";
				mes "e corações artificiais avançados";
				mes "feitos da imitação de Pedados do Coração";
				mes "de Ymir , eles podem experimentar";
				mes "fenômenos psicológicos";
				mes "como simples humanos.";
				next;
				mes "[Allysia]";
				mes "Kiehl conseguiu desenvolver";
				mes "uma forma mais estável do";
				mes "Pergaminho de Memória Condensada";
				mes "que não sofre dos";
				mes "erros críticos, e pode ser";
				mes "produzido em massa a baixo custo.";
				next;
				mes "[Allysia]";
				mes "Elly é atualmente um protótipo";
				mes "da Terceira Geração. Uma vez";
				mes "que melhoramos os protótipos,";
				mes "começamos a produção em massa.";
				mes "De fato, a academia é nosso";
				mes "campo de testes de protótipos.";
				next;
				mes "[Allysia]";
				mes "O fto de que um protótipo de";
				mes "robôs podem interagir assim como";
				mes "humanos reais, é prova de nosso";
				mes "sucesso em robótica.";
				break;

			}
		case 2:
			mes "[Allysia]";
			mes "Por favor me avise se";
			mes "quiser aprender mais sobre";
			mes "os robôs de Kiel Hyre.";
			break;

		}

	}

	else if (KielHyreQuest >= 70) {
		mes "[Allysia]";
		mes "......";
		mes ".........";
		mes "............";
	}

	close2;
	cutin "",255;
	end;
}

//----------------------------------------------------------------------------
// Abduction triggering NPC
//----------------------------------------------------------------------------
lighthalzen,188,200,0	script	Abduction_trigger	-1,3,1,{
OnTouch:
	if (KielHyreQuest == 50) {
		mes "^3355FFConforme você sai^000000";
		mes "^3355FFda mansão, algo^000000";
		mes "^3355FFbate sobre sua cabeça^000000";
		mes "^3355FFe você instantaneamente^000000";
		mes "^3355FFperde a consciência...^000000";
		close2;
		percentheal -99,0;
		warp "kh_mansion",30,75;
	}
	end;
}

//----------------------------------------------------------------------------
// Mysterious Woman "Mitchell Layla"
//----------------------------------------------------------------------------
kh_mansion,25,79,4	script	Mulher Misteriosa	727,3,3,{
L_StartDialog:
	if (KielHyreQuest == 50) {
		mes "^3355FFVocê acordou com sua^000000";
		mes "^3355FFcabeça latejando de dor,^000000";
		mes "^3355FFe uma mulher misteriosa^000000";
		mes "^3355FFparada em sua frente.^000000";
		next;
		mes "[??????]";
		mes "Hm? Oh, você acordou";
		mes "antes do que eu pensava.";
		mes "Você deve se sentir confuso,";
		mes "mas ouça atentamente. Se não";
		mes "então não posso garantir";
		mes "sua segurança, okay? Certo.";
		next;
		mes "[??????]";
		mes "Tudo o que você precisa saber é";
		mes "que sou um agente secreto da";
		mes "República de Schwaltzvalt";
		mes "Estamos investigando a";
		mes "atividade anormal entre Kiel";
		mes "Hyre e a Corporação Rekenber.";
		next;
		mes "[??????]";
		mes "Vimos você entrar na";
		mes "mansão e conversar com";
		mes "Kiel Hyre, então basicamente";
		mes "você está aqui para interrogatório.";
		mes "Agora me diga a verdade. Como";
		mes "você conheceu Kiel Hyre?";
		next;

		switch(select("Eu vou contar tudo!","Não sei de nada!")) {

		case 2:
			mes "[??????]";
			mes "Não...sabe...de nada?";
			mes "Tem certeza disso? Somente";
			mes "poucos selecionados podem falar";
			mes "com Kiel Hyre pessoalmente. Você";
			mes "deve ter alguma conexão";
			mes "com ele. Estou certo, não estou?";
			next;
			mes "["+strcharinfo(0)+"]";
			mes "......";
			mes ".........";
			mes "............";
			next;
			mes "[??????]";
			mes "você está tentando o proteger?";
			mes "Acho que você não deve estar";
			mes "entendendo o tipo de";
			mes "pessoa que você realmente está tratando";
			mes "aqui. vou lhe dizer o que";
			mes "descobri sobre ele...";
			next;
			mes "[??????]";
			mes "Kiel Hyre. Diretor executivo da";
			mes "fundação Kiel Hyre,";
			mes "fabricante de vários";
			mes "equipamentos. Sua companhia começou";
			mes "como uma pequena loja em Einbroch";
			mes "cuja tecnologia lentamente ficou famosa.";
			next;
			mes "[??????]";
			mes "A Corporação Rekenber ofereceu";
			mes "uma fusão com a Fundação Kiel Hyre";
			mes "Ainda não estamos certos";
			mes "por que eles queriam Kiel";
			mes "Hyre em particular par consertar";
			mes "e desenvolver seus Guardiões...";
			next;
			mes "[??????]";
			mes "Também não temos certeza por que";
			mes "eles queriam repentinamente";
			mes "se focar mais no desenvolvimento de";
			mes "Guardiões. Então repentinamente";
			mes "o filho de Kiel Hyre";
			mes "aparece do nada.";
			next;
			mes "[??????]";
			mes "É muito suspeito.";
			mes "Não há registros de seu";
			mes "nascimento ou nada. Ainda assim, talvez";
			mes "Kiel Hyre realmente deve ter tido ele";
			mes "com sua secretária, Allysia.";
			mes "Bem, ninguém tem certeza.";
			next;
			mes "[??????]";
			mes "De qualquer forma, o filho e herdeiro";
			mes "de Kiel Hyre, Kiehl, ajudou";
			mes "seu pai a estabelecer essa";
			mes "academia especial como sua";
			mes "forma de repagar a sociedade.";
			next;
			mes "[??????]";
			mes "Quase todas as corporações e";
			mes "organizações tentaram colocar seus";
			mes "espiões dentro dessa academia,";
			mes "mas todos eles foram rejeitados.";
			mes "É estranho, pelo menos um";
			mes "deles deveria ter conseguido.";
			next;
			mes "[??????]";
			mes "E recentemente, Kiehl Hyre";
			mes "teve um encontro secreto com";
			mes "executivos de Rekenber para anunciar";
			mes "seu novo projeto. Ele pretende";
			mes "criar avançados robôs humanóides";
			mes "que substituirão os guardiões!";
			next;
			mes "[??????]";
			mes "Nossos espiões reportaram que";
			mes "Kiel Hyre não foi encontrado";
			mes "para aquela reunião,";
			mes "assim como sua secretária";
			mes "de confiança, Allysia. Ele...";
			mes "Ele simplesmente desapareceu!";
			next;
			mes "[??????]";
			mes "Então, Kiel Hyre aparece";
			mes "em sua mansão depois de todo";
			mes "esse tempo como se nada tivesse";
			mes "acontecido! Ao mesmo tempo,";
			mes "Kiehl desaparece, com a";
			mes "desculpa de conduzir pesquisas.";
			next;
			mes "[??????]";
			mes "Rekenber está patrocinando";
			mes "ambos Kiehl e Kiel, mas";
			mes "há algum conflito";
			mes "acontecendo entre pai e";
			mes "filho, eu simplesmente sei! Agora me";
			mes "diga, o que está havendo?";
			next;
			mes "[??????]";
			mes "Não tenho certeza o quão bem você";
			mes "conhece esse país, mas o";
			mes "fato que Rekenber está envolvida";
			mes "deve lhe dizer que essas não são";
			mes "boas pessoas. Conte-me o que";
			mes "você sabe sobre eles!";
			next;
		case 1:
			mes "^3355FFVocê conta à mulher^000000";
			mes "^3355FFtudo o que sabe^000000";
			mes "^3355FFsobre Kiel Hyre. Sua^000000";
			mes "^3355FFvoz treme de tristeza^000000";
			mes "^3355FFtoda vez que menciona Elly.^000000";
			next;
			mes "[??????]";
			mes "Entendo, entendo...";
			mes "Aquela pobre menina... Tão...";
			mes "Seu envolvimento nisso";
			mes "é uma coincidência? Nesse";
			mes "caso, quero sua ajuda";
			mes "na nossa investigação.";
			next;

			switch(select("OKay","......")) {

			case 1:
				L_Help:
				mes "[??????]";
				mes "Ótimo.";
				mes "Sou a agente Mitchell Layla.";
				mes "Daqui para frente, você está trabalhando";
				mes "para a República Schwaltzvalt!";
				set KielHyreQuest,52;
				close;

			case 2:
				mes "[??????]";
				mes "Se você não cooperar,";
				mes "então não posso garantir";
				mes "sua segurança, aventureiro";
				next;
				mes "["+strcharinfo(0)+"]";
				mes "Huh? O quê...?";
				mes "O que isso quer dizer?";
				mes "você está me ameaçando?";
				next;
				menu "Apenas faça o que ela diz.",L_Help;
			}

		}

	}

	else if (KielHyreQuest == 52) {
		mes "[Mitchell]";
		mes "Tenho algumas informações";
		mes "novas para você.";
		mes "Há uma velha senhora em";
		mes "Yuno que conheceu uma mulher";
		mes "chamada Allysia 30 anos atrás.";
		next;
		mes "[Mitchell]";
		mes "A história é que essa";
		mes "Allysia de 30 anos atrás";
		mes "cometeu suicídio e é";
		mes "idêntica à secretária de";
		mes "Kiel Hyre, que também";
		mes "se chama Allysia.";
		next;
		mes "[Mitchell]";
		mes "Isso é muita";
		mes "coincidência. Quero que você";
		mes "vá a Yuno e investigue.";
		mes "Quando terminar, fale com";
		mes "o gerente de Kiel Hyre, e";
		mes "ele vai lhe trazer até mim.";
		next;
		mes "[Mitchell]";
		mes "Sim, eu sei.";
		mes "Aquele cara na verdade";
		mes "trabalha para mim. De qualquer forma,";
		mes "quando estiver pronto para ir";
		mes "para Yuno, me avise, e você";
		mes "poderá embarcar no avião federal.";
		set KielHyreQuest,54;
		close;
	}

	else if (KielHyreQuest == 54) {
		mes "[Mitchell]";
		mes "Está pronto?";
		mes "Vou deixá-lo embarcar";
		mes "no avião federal, para que";
		mes "você chegue a Yuno, e";
		mes "termine sua missão rapidamente.";
		next;

		switch(select("Sim","Não")) {

		case 1:
			mes "[Mitchell]";
			mes "Boa sorte. Uma vez";
			mes "completada sua missão,";
			mes "assegure-se de reportar-se";
			mes "ao gerente de Kiel Hyre para";
			mes "que ele lhe traga a mim.";
			close2;
			warp "yuno",54,209;
			end;
		case 2:
			mes "[Mitchell]";
			mes "A vontade...";
			mes "Mas tenha em mente que";
			mes "não sou uma mulher paciente!";
			close;

		}

	}

	else if (KielHyreQuest == 64) {
		mes "[Mitchell]";
		mes "Ah, você está de volta.";
		mes "O que você tem";
		mes "para reportar da sua";
		mes "investigação?";
		next;
		mes "[Mitchell]";
		mes ".....................";
		mes "Ah, entendo. Bom trabalho.";
		mes "Por que você não fala com Kiel";
		mes "Hyle e o confronta com";
		mes "o que você descobriu sobre";
		mes "seu passado? Sim, tosta ele.";
		next;
		mes "[Mitchell]";
		mes "Use esse microfone oculto,";
		mes "assim poderemos lhe ajudar se";
		mes "estiver em perigo. Quero";
		mes "que você descubra quem Kiel";
		mes "é realmente, e qual sua";
		mes "relação com Rekenber.";
		set KielHyreQuest,68;
		next;
		warp "kh_mansion",83,50;
		end;
	}


	else if (KielHyreQuest >= 68) {
		mes "[Mitchell]";
		mes "Você não deveria";
		mes "estar partindo agora?";
		next;
		warp "kh_mansion",83,50;
		end;
	}

OnTouch:
	if (KielHyreQuest <= 50) {
		goto L_StartDialog;
	}
	end;
}

//----------------------------------------------------------------------------
// Warp portal into Kiehl's 'Room'
// - Anyone can enter
// - After 30-40 seonds this NPC should be disabled.
//----------------------------------------------------------------------------
kh_mansion,29,27,0	script	Kiehl_Room_Warp	45,2,2,{
OnTouch:
	warp "kh_kiehl01",10,31;
	end;

OnEnable:
	initnpctimer;
	misceffect EF_SUMMONSLAVE;
	end;

OnTimer30000:
	stopnpctimer;
	misceffect EF_SUMMONSLAVE;
	disablenpc "Kiehl_Room_Warp";
	end;

OnInit:
	disablenpc "Kiehl_Room_Warp";
	end;
}

//============================================================================

//============================================================================
// Rosimier NPCs and other Related NPCs
//============================================================================

//----------------------------------------------------------------------------
// Odd Grandma
//----------------------------------------------------------------------------
yuno,256,141,4	script	Vovó Estranha	846,{
	if (KielHyreQuest < 54) {
		mes "[Vovó]";
		mes "Aonde você vai,";
		mes "meu querido? Onde";
		mes "está você, meu queridinho?";
		close;
	}

	else if (KielHyreQuest == 54) {
		mes "[Vovó]";
		mes "Canção de ninar...";
		mes "Diz boa noite...";
		mes "Acalma nenenzinho...";
		mes "Vá dormiiiirrrr~";
		next;

		switch(select("O que está fazendo?","Um, eu não vejo um bebê...")) {

		case 1:
			mes "[Vovó]";
			mes "Oh? meu bebê não para de";
			mes "chorar e não parece";
			mes "dormir. Ela precisa";
			mes "descansar para que eu possa trabalhar.";
			mes "A casa está tão bagunçada,";
			mes "e o chefe tão descontente...";
			set KielHyreQuest,56;
			next;

			switch(select("Um, eu não vejo um bebê...")) {

			case 1:
				mes "[Vovó]";
				//Missing text, needs another run through.
				mes "Allysia...?!";
				mes "Allysia, onde você";
				mes "foi? Era para você";
				mes "voltar para casa";
				mes "há muito tempo atrás!";
				close;

			}

		case 2:
			//Missing text, needs another run through.
			mes "[Vovó]";
			mes "Allysia...?!";
			mes "Allysia, onde você";
			mes "foi? Era para você";
			mes "voltar para casa";
			mes "há muito tempo atrás!";
			close;

		}

	}

	else if ((KielHyreQuest >= 56) && (KielHyreQuest < 60)) {
		mes "Allysia...?!";
		mes "Allysia, onde você";
		mes "foi? Era para você";
		mes "voltar para casa";
		mes "há muito tempo atrás!";

		if (countitem(7500) < 1) { 
			close;
		}

		else {
			next;

			switch(select("Allysia? ela não está...")) {

			case 1:
				cutin "kh_ellisia_port",1;
				mes "^3355FFvocê mostra o retrato";
				mes "de Allysia para a velha senhora.^000000";
				next;
				cutin "",255;
				mes "[Vovó]";
				mes "Oh, você conhece";
				mes "Allysia? Ela está";
				mes "desaparecida! Ela saiu de casa";
				mes "ontem e ainda não";
				mes "voltou! V-Você pode";
				mes "me dizer onde ela está?!";
				close;
			}

		}

	}

	else if (KielHyreQuest >= 60) {
		mes "[Vovó]";
		mes "Não se preocupe, Allysia...";
		mes "Mamãe sempre estará";
		mes "aqui para você. Não precisa";
		mes "ficar triste...";
		close;
	}

}

//----------------------------------------------------------------------------
// Old Lady; gives you the key to the Rosimier Mansion
//----------------------------------------------------------------------------
yuno,250,132,2	script	Velha Senhora	711,{
	if (KielHyreQuest < 56) {
		mes "[Velha Senhora]";
		mes "Oooh, minhas pernas e costas";
		mes "estão tão doídas. Esse velhos";
		mes "ossos doem todos...";
		close;
	}

	else if (KielHyreQuest == 56) {
		if (checkweight(7498,1) == 0) {
			mes "^3355FF- Espere!! -";
			mes "- você está carregando muitos ítens";
			mes "- e não será capaz de aceitar mais. -";
			mes "- Por favor disponibilize algum espaço";
			mes "- no seu inventario antes de retornar. -^000000";
			close;
		}

		mes "[Velha Senhora]";
		mes "Deuses, eu odeio esse";
		mes "tempo! Me lembra";
		mes "como fiquei velha!";
		mes "Resfria meus ossos, isso sim!";
		next;

		switch(select("......","Você conhece aquela Vovó?")) {

		case 1:
			mes "[Velha Senhora]";
			mes "Maldição! Se pelo menos eu não";
			mes "tivesse tido todas aquelas aventuras";
			mes "na minha juventude! Aí talvez";
			mes "eu não sofresse tanto na";
			mes "minha idade avançada!";
			close;

		case 2:
			mes "[Velha Senhora]";
			mes "Oh... Sim. Ela era";
			mes "a mãe da minha melhor";
			mes "amiga, ^3355FFAllysia^000000. Desde que";
			mes "ela cometeu suicídio, as coisas";
			mes "não têm sido as mesmas. Sua";
			mes "mãe perdeu a sanidade...";
			next;

			switch(select("Era ^3355FFAllysia^000000...?")) {

			case 1:
				mes "[Velha Senhora]";
				mes "Oh, Allysia era uma moça";
				mes "tão bonita. Tantos";
				mes "homens quiseram ela, especialmente";
				mes "aquele James Rosimier.";
				mes "Lembro de ter ouvido que eles";
				mes "iriam se casar...";
				next;
				mes "[Velha Senhora]";
				mes "Eu estava tão feliz por ela!";
				mes "Mas então, repentinamente,";
				mes "ela se matou. Bem,";
				mes "isso é o que todos dizem.";
				mes "Mesmo hoje, não tenho tanta";
				mes "certeza do que aconteceu.";
				next;

				switch(select("Espere, quem é James Rosimier?")) {

				case 1:
					mes "[Velha Senhora]";
					mes "Oh, James pertencia a ";
					mes "uma das famílias mais antigas";
					mes "e ricas em Yuno. Tudo";
					mes "estava indo bem para eles, mas";
					mes "algum tempo depois que Allysia morreu,";
					mes "a família foi a falência.";
					next;
					mes "[Velha Senhora]";
					mes "A cidade gerencia a";
					mes "velha residência deles agora. Por";
					mes "alguma razão, eles decidiram";
					mes "me confiar a chave mestra";
					mes "da Mansão Rosimier.";
					next;

					switch(select("Pode me emprestar essa Chave Mestra?")) { 

					case 1:
						mes "[Velha Senhora]";
						mes "Bem, não é para eu realmente";
						mes "entregar ela para simplesmente";
						mes "qualquer um, mas posso dizer que";
						mes "você está trabalhando com Allysia";
						mes "com os melhores interesses no coração.";
						next;
						mes "[Velha Senhora]";
						mes "Entretanto, você tem de";
						mes "assegurar-se de trazê-la de volta";
						mes "para mim antes que o pessoal da";
						mes "prefeitura me pergunte por ela.";
						mes "Muito bem então, espero que você ache";
						mes "o que está procurando.";
						set KielHyreQuest,58;
						getitem 7498,1; //Losimier's_House_Key
						close;
					}

				}

			}

		}

	}

	else if ((KielHyreQuest == 58) &&
		(countitem(7499) < 1) || 
		(countitem(7500) < 1) || 
		(countitem(7501) < 1) || 
		(countitem(7502) < 1)) {
		mes "[Velha Senhora]";
		mes "Por favor depressa. Encontre";
		mes "o que quer que esteja procurando";
		mes "na Mansão Rosimier.";
		mes "Posso arrumar problemas se";
		mes "o pessoal da prefeitura";
		mes "vier e me perguntar pela chave...";
		close;
	}

	else if ((KielHyreQuest == 58) &&
		(countitem(7499) == 1) && 
		(countitem(7500) == 1) && 
		(countitem(7501) == 1) && 
		(countitem(7502) == 1)) {
		mes "[Velha Senhora]";
		mes "Oh você acabou sua";
		mes "busca na mansão?";
		mes "Deprimente não é?";
		mes "Os credores basicamente";
		mes "pilharam tudo";
		mes "há muito tempo atrás.";
		next;

		switch(select("Por que ^3355FFAllysia^000000...?")) {

		case 1:
			mes "[Velha Senhora]";
			mes "Bem, eu sabia que aquele James";
			mes "e Allysia estavam apaixonados,";
			mes "e ele prometeu casar com";
			mes "ela. Agora, supostamente sua";
			mes "família já o tinha noivado";
			mes "com outra mulher.";
			next;
			mes "[Velha Senhora]";
			mes "O tempo passou, e ele";
			mes "foi forçado a cassar com sua";
			mes "noiva. Allysia era devastadoramente";
			mes "linda. Acho que talvez";
			mes "por isso ela... você sabe...";
			next;
			mes "[Velha Senhora]";
			mes "Escute, se você quiser saber";
			mes "mais sobre o que aconteceu,";
			mes "então acho que você deveria falar";
			mes "com o ^3355FFpescador que vive^000000";
			mes "^3355FFao sul da Academia Kiel Hyre.^000000";
			next;
			mes "[Velha Senhora]";
			mes "Ele é quem encontrou";
			mes "o corpo de Allysia no rio,";
			mes "em tão ele pode ter uma melhor";
			mes "idéia do que aconteceu.";
			set KielHyreQuest,60;
			delitem 7498,1; //Losimier's_House_Key 
			close;

		}

	}

	else if (KielHyreQuest >= 60) {
		mes "[Velha Senhora]";
		mes "Sim, A chuva está vindo.";
		mes "Posso sentir nos meus ossos.";
		close;
	}

}


//----------------------------------------------------------------------------
// Warp portal into Rosimier Mansion
//----------------------------------------------------------------------------
yuno,273,141,0	script	Rosimmir_Entrance	45,2,2,{
OnTouch:
	if (countitem(7498) < 1)
		warp "yuno",270,141;
	else 
		warp "kh_rossi",20,92;
	end;
}

//----------------------------------------------------------------------------
// Rosimier Mansion, first floor; Table
//----------------------------------------------------------------------------
kh_rossi,23,23,0	script	Mesa	111,{
	if (countitem(7499) < 1) {
		if (checkweight(7499,1) == 0) {
			mes "^3355FF- Espere!! -";
			mes "- Você está carregando muitos ítens";
			mes "- e não será capaz de aceitar mais. -";
			mes "- Por favor disponibiliza algum espaço";
			mes "- no seu inventario antes de retornar. -^000000";
			close;
		}

		cutin "kh_family_port",1;
		mes "^3355FFvocê examina a mesa,^000000";
		mes "^3355FFe encontra um porta retratos^000000";
		mes "^3355FFdentro da gaveta aberta.^000000";
		getitem 7499,1; //Portrait_of_a_Family
	}

	else {
		mes "^3355FFA gaveta aberta dessa^000000";
		mes "^3355FFmesa está vazia agora.^000000";
	}

	close2;
	cutin "",255;
	end;
}

//----------------------------------------------------------------------------
// Rosimier Mansion, first floor; Shelf
//----------------------------------------------------------------------------
kh_rossi,92,40,0	script	Estante::ShelfKHQ1	111,{
	if (countitem(7500) < 1) {
		if (checkweight(7500,1) == 0) {
			mes "^3355FF- Espere!! -";
			mes "- Você está carregando muitos ítens";
			mes "- e não será capaz de aceitar mais. -";
			mes "- Por favor disponibiliza algum espaço";
			mes "- no seu inventario antes de retornar. -^000000";
			close;
		}

		mes "^3355FFHá caixas trancadas^000000";
		mes "^3355FFnessas prateleiras..^000000";
		mes "^3355FFTalvez se você usar essa^000000";
		mes "^3355FFchave mestra da mansão, você^000000";
		mes "^3355FFpode conseguir abrí-las.^000000";
		next;

		switch(select("Usar Chave","Passar")) {

		case 1:
			mes "^3355FFQual caixa você^000000";
			mes "^3355FFquer tentar abrir?^000000";
			next;

			switch(select("Primeira caixa","Segunda Caixa")) {

			case 1:
				mes "^3355FFvocê usa a chave Mestra para^000000";
				mes "^3355FFdestrancar a caixa, e obtem^000000";
				mes "^3355FFum retrato de uma mulher que^000000";
				mes "^3355FFse parece com a assistente de^000000";
				mes "^3355FFKiel Hyre, Allysia.^000000";
				next;
				cutin "kh_ellisia_port",2;
				mes "^3355FFA mensagem, ''Para meu amor,^000000";
				mes "^3355FFAllysia. De James.'' está^000000";
				mes "^3355FFescrita nas costas.^000000";
				getitem 7500,1; //Portrait_of_a_Lady
				close2;
				cutin "",255;
				end;

			case 2:
				mes "^3355FFEssa caixa está vazia.^000000";
				close;

			}

		case 2:
			mes "^3355FFEssa caixa está vazia.^000000";
			close;

		}

	}

	else {
		mes "^3355FFVocê encontrou um retrato^000000";
		mes "^3355FFde uma mulher em uma das^000000";
		mes "^3355FFcaixas nessa prateleira.^000000";
		close;
	}

}


//----------------------------------------------------------------------------
// Rosimier Mansion, top floor; Desk
//----------------------------------------------------------------------------
kh_rossi,144,287,0	script	Mesa::DeskKHQ2	111,{
	if (checkweight(7501,1) == 0) {
		mes "^3355FF- Espere!! -";
		mes "- Você está carregando muitos itens";
		mes "- e não será capaz de aceitar mais. -";
		mes "- Por favor disponibiliza algum espaço";
		mes "- no seu inventario antes de retornar. -^000000";
		close;
	}

	mes "^3355FFA mesa tem^000000";
	mes "^3355FFtrês gavetas^000000";
	next;

	switch(select("Primeira Gaveta","Segunda Gaveta","Terceira Gaveta","Cancelar;")) {

	case 1:
		mes "^3355FFA primeira gaveta está trancada.^000000";
		close;

	case 2:
		if (countitem(7501) < 1) {
			mes "^3355FFHá uma carta dentro^000000";
			mes "^3355FFdessa segunda gaveta. Foi^000000";
			mes "^3355FFenviada por uma pessoa^000000";
			mes "^3355FFcom as iniciais, K.H.,^000000";
			mes "^3355FFe endereçada à Allysia.^000000";
			getitem 7501,1; //K.H's_Letter
			close;
		}

		else {
			mes "^3355FFEssa gaveta está vazia.^000000";
			close;

		}

	case 3:
		mes "^3355FFHá um pequeno bilhete^000000";
		mes "^3355FFdentro dessa terceira gaveta.^000000";
		mes "^3355FFFoi escrito por James, e^000000";
		mes "^3355FFmenciona que ele quer se^000000";
		mes "^3355FFcasar com Allysia, e ela^000000";
		mes "^3355FFrecebeu um anel de noivado.^000000";
		close;

	case 4:
		mes "......";
		mes ".........";
		mes "............";
		close;

	}

}

//----------------------------------------------------------------------------
// Rosimier Mansion, top floor; Bookshelf
//----------------------------------------------------------------------------
kh_rossi,149,288,0	script	Estante::BookshelfKHQ2	111,{
	if (countitem(7502) < 1) {
		if (checkweight(7502,1) == 0) {
			mes "^3355FF- Espere!! -";
			mes "- Você está carregando muitos itens";
			mes "- e não será capaz de aceitar mais. -";
			mes "- Por favor disponibiliza algum espaço";
			mes "- no seu inventario antes de retornar. -^000000";
			close;
		}

		mes "^3355FFVocYe encontra uma estante^000000";
		mes "^3355FFempoeirada cheia de^000000";
		mes "^3355FFvários livros. Você^000000";
		mes "^3355FFencontra um bilhete dobrado entre^000000";
		mes "^3355FFos livros enquanto os examina.^000000";
		getitem 7502,1; //James's_Memo
		close;
	}

	else {
		mes "^3355FFvocê encontrou uma estante^000000";
		mes "^3355FFempoeirada cheia de^000000";
		mes "^3355FFvários livros.^000000";
		close;
	}

}

//----------------------------------------------------------------------------
// Fisherman
//----------------------------------------------------------------------------
yuno_fild12,232,222,0	script	Velho Pescador#1	709,{
	if (KielHyreQuest < 60) {
		mes "[Pescador]";
		mes "Esses dias, é tão mais";
		mes "difícil caçar e pescar.";
		mes "Desde que eles construíram";
		mes "essa fábrica, os peixes";
		mes "começaram a mudar,";
		mes "e parecem diferentes também...";
		close;
	}

	else if (KielHyreQuest == 60) {
		mes "[Pescador]";
		mes "Eh? Você quer algo?";
		mes "Heh, jovens! Eu sei";
		mes "o quanto vocês adoram esmolas,";
		mes "mas você não vai ter nenhuma.";
		mes "Agora me traga algum";
		mes "peixe cru, e eu serei mais amigável~";

		if (countitem(544) >= 10)  {
			next;
			mes "[Pescador]";
			mes "Oh, todos esses peixes";
			mes "para mim? Heh, que";
			mes "generosidade a sua. Se você vai";
			mes "ser tão generoso, então";
			mes "eu suponho que eu deva lhe pagar";
			mes "o favor. Pergunte-me qualquer coisa~";
			next;

			switch(select("30 anos atrás, uma mulher se matou...")) {

			case 1:
				mes "[Pescador]";
				mes "Oh? Ohh. Oh sim.";
				mes "Eu me lembro disso. Sim.";
				mes "Foi em 20 de Agosto, no";
				mes "aniversário da minha esposa. Aquele dia,";
				mes "ao invés de pegar peixes,";
				mes "eu peguei uma mulher morta.";
				next;
				mes "[Pescador]";
				mes "Claro, eu reportei à";
				mes "polícia de Yuno. Eles me disseram";
				mes "que ela se matou já que";
				mes "tinha sido traída por seu amante,";
				mes "que por acaso era também seu";
				mes "empregador. Coisa realmente trágica.";
				next;
				mes "[Pescador]";
				mes "Ainda assim, quanto estávamos";
				mes "retirando o seu corpo do";
				mes "rio, sua mão deixou cair";
				mes "um anel. Eu peguei,";
				mes "esperando vendê-lo mais tarde por";
				mes "algum zeny. Eu sei, eu sei...";
				next;
				mes "[Pescador]";
				mes "Tive muita sorte que a";
				mes "policia não me viu pegá-lo";
				mes "Mais tarde naquele dia, um cara";
				mes "veio e me ofereceu";
				mes "uma bolada por ele.";
				mes "Acho que foi meu dia de sorte!";
				next;
				mes "[Pescador]";
				mes "Descobri mais tarde que ele era";
				mes "algum tipo de engenheiro mecânico--";
				mes "ou algo assim. ele vendeu tudo";
				mes "para comprar aquele anel, então acho";
				mes "que o queria desesperadamente.";
				mes "Então ele simplesmente desapareceu.";
				next;
				mes "[Pescador]";
				mes "O nome dele...?";
				mes "Era algo parecido com...";
				mes "Heil? Hyre? De qualquer forma, foi";
				mes "há muito tempo atrás. Oh,";
				mes "sua velha casa ainda está por aí.";
				next;
				mes "[Pescador]";
				mes "Se você for bem";
				mes "curioso, você pode até";
				mes "dar uma checada também.";
				mes "Vejamos, ele viveu em";
				mes "uma cabana próximo ao acampamento";
				mes "noroeste da guarda florestal.";
				delitem 544,10; //Fish_Slice
				set KielHyreQuest,62;
				close;
			}

		}

		else {
			close;
		}

	}

	else if (KielHyreQuest >= 62) {
		mes "[Pescador]";
		mes "Você não se lembra";
		mes "o que eu lhe disse? Aquele";
		mes "cara vivia numa cabana próximo";
		mes "ao acampamento noroeste";
		mes "da guarda florestal, Por que";
		mes "você não dá uma checada lá?";
		close;
	}

}

//----------------------------------------------------------------------------
// Kiel Hyre's hut; Wooden Board
//----------------------------------------------------------------------------
yuno_fild09,158,217,0	script	Placa de Madeira#1	111,{
	if ((KielHyreQuest < 62) || (KielHyreQuest >= 64)) {
		mes "^3355FFÉ uma inútil^000000";
		mes "^3355FFplaca de madeira^000000";
		mes "^3355FFnos arbustos.^000000";
		close;
	}

	else if (KielHyreQuest == 62) {
		if (checkweight(7503,1) == 0) {
			mes "^3355FF- Espere!! -";
			mes "- Você está carregando muitos itens";
			mes "- e não será capaz de aceitar mais. -";
			mes "- Por favor disponibiliza algum espaço";
			mes "- no seu inventario antes de retornar. -^000000";
			close;
		}

		mes "^000oFFVocê encontrou uma grande^000000";
		mes "^3355FFplaca de madeira encravada^000000";
		mes "^3355FFcom as iniciais, 'K.H.'^000000";
		next;
		cutin "kh_kyel_port",2;
		mes "^3355FFVocê encontrou o retrato de^000000";
		mes "^3355FFum jovem, que se parece^000000";
		mes "^3355FFcom uma versão mais nova^000000";
		mes "^3355FFde Kiel Hyre, em um porta^000000";
		mes "^3355FFretratos quebrado debaixo^000000";
		mes "^3355FFda placa de madeira.^000000";
		set KielHyreQuest,64;
		getitem 7503,1;	//Portrait_of_a_Guy
		next;
		cutin "",255;
		mes "^3355FFVocê tem informação^000000";
		mes "^3355FFsuficiente agora,^000000";
		mes "^3355FFentão você deveria se^000000";
		mes "^3355FFreportar à Mitchell.^000000";
		close;
	}

}

//============================================================================
// Kiehl Hyre's Room and Boss NPCs
//============================================================================
// Beyond here the NPC for the final areas.
// Now, this area is not someplace you wanna slow down so
// you can pick up dialog. I used packet logging to pull
// what I could and for the sake of the two people with me,
// did not bother doing all the proper proper NPC positioning
// or some of the 'error/wrong option' dialogs.
// All the doors are kind of weird.
//============================================================================

//----------------------------------------------------------------------------
// Kiehl's Room; Receiver (Gives black keycards upon killing mobs)
//----------------------------------------------------------------------------
kh_kiehl01,17,39,0	script	Receptor	111,{
	if (.KHKilled < 1) {
		set .KHKilled,.KHKilled+1;
		mes "^333333*BBBZZZ*^000000";
		if (KielHyreQuest == 74) {
			next;
			mes "[????]";
			mes "^333333*Bzzzz...*";
			mes "Eu nunca te vi";
			mes "antes. Foi papai que mandou";
			mes "você para me matar? Veremos";
			mes "sobre isso! Vá em frente,";
			mes "tente me encontrar, aventureiro.^000000.";
			set KielHyreQuest,76;
		}

		close2;
		monster "kh_kiehl01",16,32,"Alicel",1739,1,"Receptor::OnMyMobDead";
		monster "kh_kiehl01",18,31,"Aliot",1740,1,"Receptor::OnMyMobDead";
		end;
	}

	else {
		end;
	}

OnMyMobDead:
	set .KHKilled,.KHKilled+1;
	if (.KHKilled == 3) { 
		makeitem 7506,1,"this",19,36; 
		set .KHKilled,0;
	}
	end;
}

//----------------------------------------------------------------------------
// Kiehl's Room; Flower Vase (Gives...password...for Box)
//----------------------------------------------------------------------------
kh_kiehl01,13,40,0	script	Vaso de Flores	111,{
	if (KielHyreQuest < 74) {
		mes "^3355FFVocê encontrou";
		mes "um vaso de flores.^000000";
		close;
	}

	if (KielHyreQuest >= 74) {
		mes "^3355FFvocê encontrou";
		mes "um vaso de flores.^000000";
		next;

		switch(select("Pegar o Vaso","Quebrar o Vaso","Virar o vaso de ponta cabeça")) {

		case 1:
			mes "^3355FFO vaso está vazio.^000000";
			close;

		case 2:
			mes "^3355FFVocê não pode destruir";
			mes "esse vaso, mesmo";
			mes "batendo com toda a sua";
			mes "força. Deve ter sido";
			mes "especialmente fabricado pela";
			mes "Corporação Rekenber.^000000";
			close;

		case 3:
			mes "^3355FFAs seguintes palavras";
			mes "estão escritas no";
			mes "fundo do vaso.^000000";
			next;
			mes "[Mensagem do Vaso]";
			mes "''O coelho frequentemente";
			mes "observa a porta";
			mes "A noite come a";
			mes "laranja azeda.''";
			close;

		}

	}

}


//----------------------------------------------------------------------------
// Kiehl's Room; Box
//----------------------------------------------------------------------------
kh_kiehl01,19,25,0	script	Baú::BoxKHQ3	111,{
	if (countitem(7505) < 1) {
		if (checkweight(7505,1) == 0) {
			mes "^3355FF- Espere!! -";
			mes "- Você está carregando muitos itens";
			mes "- e não será capaz de aceitar mais. -";
			mes "- Por favor disponibiliza algum espaço";
			mes "- no seu inventario antes de retornar. -^000000";
			close;
		}

		mes "^3355FFVocê encontrou um baú";
		mes "com um botão para cada letra";
		mes "do alfabeto sobre ela.^000000";
		next;
		input @KHInput$;
		if (@KHInput$ == "ABRA A PORTA") {
			mes "^3355FFAssim que você entra";
			mes "a senha, a porta próxima";
			mes "emite um barulho agradável";
			mes "e o baú se abre";
			mes "para revelar uma pequena chave.^000000";
			getitem 7505,1; //Toy_Key
			close;
		}

		else {
			mes "^3355FFNada aconteceu.^000000";
			close;
		}

	}

	else {
		mes "^3355FFAqui é onde você";
		mes "encontrou a chave de brinquedo^000000";
		close;
	}

}

//----------------------------------------------------------------------------
// Kiehl's Room; Big Door, (First)
// - Anyone can pass through this door
// - Consume one Black KeyCard when opened.
// - Only one person actually needs to open it.
//----------------------------------------------------------------------------
kh_kiehl01,44,33,0	script	Grande Porta#BigDoorKHQ1	111,{
	if (.KHDoor1Opened == 0) {
		mes "^3355FFA porta está trancada,";
		mes "mas há um slot estreito";
		mes "perto da maçaneta.^000000";
		next;
		input @KHInput$;
		if (@KHInput$ == "Cartão de Acesso Preto") {
			if (countitem(7506) >= 1) {
				mes "^3355FFVocê insere o";
				mes "Cartão de Acesso Preto no";
				mes "slot, e bem sucedidamente";
				mes "destranca e abre a porta.^000000";
				delitem 7506,1; //Black_Keycard
				donpcevent "Big_Door_1_Warp::OnEnable";
				enablenpc "Big_Door_1_Warp";
				set .KHDoor1Opened,1;
				close;
			}

		}

		mes "^3355FFvocê tenta empurrar a";
		mes "porta com toda a";
		mes "sua força, mas falha";
		mes "em fazê-la se mover.^000000";
		close;
	}

	else {
		mes "^3355FFA porta está aberta.^000000";
		close;
	}

}

kh_kiehl01,43,33,0	script	Big_Door_1_Warp	45,1,1,{
OnEnable:
	initnpctimer;
	misceffect EF_SUMMONSLAVE;
	end;

OnInit:
	disablenpc "Big_Door_1_Warp";
	end;

OnTimer30000:
	stopnpctimer;
	misceffect EF_SUMMONSLAVE;
	disablenpc "Big_Door_1_Warp";
	set getvariableofnpc(.KHDoor1Opened,"Grande Porta#BigDoorKHQ1"),0;
	end;

OnTouch:
	warp "kh_kiehl01",55,33;
	end;
}

//----------------------------------------------------------------------------
// Kiehl's Room; Big Door, (second)
// - Consume Toy Key when opened.
// - Only one person actually needs to open it.
//----------------------------------------------------------------------------
kh_kiehl01,174,40,0	script	Grande Porta#BigDoorKHQ2	111,{
	if (.KHDoor2Opened == 0) {
		mes "^3355FFA porta está trancada,";
		mes "mas há uma pequena";
		mes "fechadura próxima à maçaneta.^000000";
		next;
		input @KHInput$;
		if (@KHInput$ == "Chave de Brinquedo") {
			if (countitem(7505) >= 1) {
				mes "^3355FFVocê insere a chave na";
				mes "fechadura, e a porta";
				mes "se destranca assim que";
				mes "você gira a chave.^000000";
				delitem 7505,1; //Toy_Key
				donpcevent "Big_Door_2_Warp::OnEnable";
				enablenpc "Big_Door_2_Warp";
				set .KHDoor2Opened,1;
				close;
			}

		}

		mes "^3355FFVocê tenta empurrar a";
		mes "porta com toda a sua";
		mes "força mas falha em";
		mes "fazê-la se mover.^000000";
		close;
	}


	else {
		mes "^3355FFA porta está aberta.^000000";
		close;
	}

}

kh_kiehl01,174,39,0	script	Big_Door_2_Warp	45,1,1,{
OnEnable:
	initnpctimer;
	misceffect EF_SUMMONSLAVE;
	end;

OnInit:
	disablenpc "Big_Door_2_Warp";
	end;

OnTimer30000:
	stopnpctimer;
	misceffect EF_SUMMONSLAVE;
	disablenpc "Big_Door_2_Warp";
	set getvariableofnpc(.KHDoor2Opened,"Grande Porta#BigDoorKHQ2"),0;
	end;

OnTouch:
	warp "kh_kiehl01",173,52;
	end;
}

//----------------------------------------------------------------------------
// Kiehl's Room; Big Door, (Third)
// - Consume one Black KeyCard when opened.
// - Only one person actually needs to open it.
//----------------------------------------------------------------------------
kh_kiehl01,77,108,0	script	Grande Porta#BigDoorKHQ3	111,{
	if (.KHDoor3Opened == 0) {
		mes "^3355FFA porta está trancada,";
		mes "mas há um slot estreito";
		mes "próximo à maçaneta.^000000";
		next;
		input @KHInput$;
		if (@KHInput$ == "Cartão de Acesso Preto") {
			if (countitem(7506) >= 1) {
				mes "^3355FFvocê insere o";
				mes "Cartão de Acesso Preto no";
				mes "slot, e bem sucedidamente";
				mes "destranca e abre a porta.^000000";
				delitem 7506,1; //Black_Keycard
				donpcevent "Big_Door_3_Warp::OnEnable";
				enablenpc "Big_Door_3_Warp";
				set .KHDoor3Opened,1;
				close;
			}

		}

		mes "^3355FFVocê tenta empurar a";
		mes "porta com toda a sua";
		mes "força, mas falha em";
		mes "fazê-la se mover.^000000";
		close;
	}

	else {
		mes "^3355FFA porta está aberta.^000000";
		close;
	}

}

kh_kiehl01,78,108,0	script	Big_Door_3_Warp	45,1,1,{
OnEnable:
	initnpctimer;
	misceffect EF_SUMMONSLAVE;
	end;

OnInit:
	disablenpc "Big_Door_3_Warp";
	end;

OnTimer30000:
	stopnpctimer;
	misceffect EF_SUMMONSLAVE;
	disablenpc "Big_Door_3_Warp";
	set getvariableofnpc(.KHDoor3Opened,"Grande Porta#BigDoorKHQ3"),0;
	end;

OnTouch:
	warp "kh_kiehl01",68,108;
	end;
}

//----------------------------------------------------------------------------
// Kiehl's Room; Big Door, (Fourth)
// - Consume TWO Black KeyCard when opened.
// - Only one person actually needs to open it.
//----------------------------------------------------------------------------
kh_kiehl01,42,177,0	script	Grande Porta#BigDoorKHQ4	111,{
	if (.KHDoor4Opened == 0) {
		mes "^3355FFA porta está trancada,";
		mes "mas há um slot estreito";
		mes "próximo à maçaneta.^000000";
		next;
		input @KHInput$;
		if (@KHInput$ == "Cartão de Acesso Preto") {
			if (countitem(7506) >= 2) {
				mes "^3355FFVocê inseriu o";
				mes "Cartão de Acesso Preto no";
				mes "slot, e bem sucedidamente";
				mes "destrancou e abriu a porta.^000000";
				delitem 7506,2; //Black_Keycard
				donpcevent "Big_Door_4_Warp::OnEnable";
				enablenpc "Big_Door_4_Warp";
				set .KHDoor4Opened,1;
				close;
			}
		}

		mes "^3355FFVocê tenta empurar a";
		mes "porta com toda a sua";
		mes "força, mas falha em";
		mes "fazê-la se mover.^000000";
		close;
	}


	else {
		mes "^3355FFA porta está aberta.^000000";
		close;
	}

}

kh_kiehl01,41,177,0	script	Big_Door_4_Warp	45,1,1,{
OnEnable:
	initnpctimer;
	misceffect EF_SUMMONSLAVE;
	end;

OnInit:
	disablenpc "Big_Door_4_Warp";
	end;

OnTimer30000:
	stopnpctimer;
	misceffect EF_SUMMONSLAVE;
	disablenpc "Big_Door_4_Warp";
	set getvariableofnpc(.KHDoor4Opened,"Grande Porta#BigDoorKHQ4"),0;
	end;

OnTouch:
	warp "kh_kiehl01",49,177;
	end;
}

//----------------------------------------------------------------------------
// Kiehl's Room; Robots
//----------------------------------------------------------------------------
kh_kiehl01,15,179,0	script	Robôs#kh1	111,{
	if (.KHKilled < 1) {
		set .KHKilled,.KHKilled+1;
		mes "^3355FFAssim que você";
		mes "toca o tubo de testes,";
		mes "um monte de robôs";
		mes "repentinamente aparecem.^000000.";
		close2;
		monster "kh_kiehl01",18,181,"Aliot",1740,1,"Robôs#kh1::OnMyMobDead";
		monster "kh_kiehl01",18,180,"Alicel",1739,1,"Robôs#kh1::OnMyMobDead";
		monster "kh_kiehl01",18,179,"Aliot",1740,1,"Robôs#kh1::OnMyMobDead";
		monster "kh_kiehl01",18,178,"Alicel",1739,1,"Robôs#kh1::OnMyMobDead";
		end;
	}

	else  {
		end;
	}

OnMyMobDead:
	set .KHKilled,.KHKilled+1;
	if (.KHKilled == 4) { 
		makeitem 7506,1,"this",18,180;
		set .KHKilled,0;
	}
	end;
}

//----------------------------------------------------------------------------
// Kiehl's Room; Dummy Robots
//----------------------------------------------------------------------------
kh_kiehl01,15,177,0	script	Robôs#kh2::RobotsKHQ	111,{
	end;
}
kh_kiehl01,15,180,0	duplicate(RobotsKHQ)	Robots#kh3	111
kh_kiehl01,15,182,0	duplicate(RobotsKHQ)	Robots#kh4	111
kh_kiehl01,35,187,0	duplicate(RobotsKHQ)	Robots#kh1	111
kh_kiehl01,37,187,0	duplicate(RobotsKHQ)	Robots#kh2	111
kh_kiehl01,39,187,0	duplicate(RobotsKHQ)	Robots#kh5	111
kh_kiehl01,41,187,0	duplicate(RobotsKHQ)	Robots#kh6	111

//----------------------------------------------------------------------------
// Kiehl's Room; Big Door, (Fifth, and final)
// - Anyone can pass through this door
// - Consumes 4 Solid Iron Pieces
//----------------------------------------------------------------------------
kh_kiehl01,166,187,0	script	Grande Porta#BigDoorKHQ5	111,{
	if (($@KHQuestBusy == 0) && (KielHyreQuest >= 74) && (KielHyreQuest <= 106)) {
		if (KielHyreQuest < 86) {
			mes "^3355FFEssa porta larga..";
			mes "está só encostada.";
			mes "Se você ouvir atentamente,";
			mes "poderá ouvir a porta";
			mes "ranger bem baixinho.^000000";
			next;

			switch(select("Empurrar a Porta","Chutar a Porta","Balançar a Porta","Puxar a Porta","Levantar a Porta")) {

			case 1:
				break;

			case 2:
				break;

			case 3:
				break;

			case 4:
				break;

			case 5:
				break;

			}

			mes "^3355FFUm grupo de monstros";
			mes "aparecem repentinamente assim";
			mes "que você aplicou";
			mes "pressão na porta.";
			mes "Isso deve ser algum";
			mes "tipo de dispositivo de segurança.^000000";
			close2;
			set @KHDoorPushAttempt,@KHDoorPushAttempt+1;
			monster "kh_kiehl01",163,183,"Alicel",1739,1;
			monster "kh_kiehl01",163,179,"Aliot",1740,1;
			monster "kh_kiehl01",169,183,"Alicel",1739,1;
			monster "kh_kiehl01",169,179,"Aliot",1740,1;
			if (@KHDoorPushAttempt >= 3) { 
				set KielHyreQuest,86; 
			}
			end;
		}

		else if ((KielHyreQuest > 84) && (KielHyreQuest < 94)) {
			mes "^3355FFVocê aplica alguma";
			mes "pressão sobre a porta,";
			mes "e descobre que você pode";
			mes "movê-la lentamente, mas";
			mes "não pode abrí-la totalmente.^000000";
			next;
			mes "^3355FFSe você segurasse algo";
			mes "na fresta entre a porta";
			mes "e o batente, e";
			mes "conseguisse alavancar, então você";
			mes "pode ser capaz de abrí-la.^000000";
			next;

			switch(select("Aço","Ferro Enferrujado","Pedaço de Ferro Sólido","Pedaço de Ferro","Parafuso","Cancelar")) {

			case 1:
				set @KHPryingItem$,"Aço";
				break;

			case 2:
				set @KHPryingItem$,"Ferro Enferrujado";
				break;

			case 3:
				if (countitem(7507) >= 1) {
					if (KielHyreQuest < 92) {
						mes "^3355FFvocê insere uma ponta de";
						mes "um pedaço de ferro sólido na";
						mes "fresta da porta num resistente";
						mes "esforço de fazer com que a porta abra";
						mes "A fresta aumenta um pouco mais,";
						mes "no entanto você quebra um de seus";
						mes "Pedaços de Ferro Sólido.^000000";
						set KielHyreQuest,KielHyreQuest+2;
						delitem 7507,1; //Hard_Piece_of_Steel
						close;
					}

					else if (KielHyreQuest == 92) {
						mes "^3355FFCom um empurrão forte,";
						mes "você coloca um Pedaço de Ferro";
						mes "Sólido no batente da porta,";
						mes "fazendo com que a porta se abra";
						mes "Incapaz de resistir à";
						mes "extrema força, esse Pedaço";
						mes "de Ferro Sólido fica em farelos.^000000";
						set KielHyreQuest,94;
						delitem 7507,1; //Hard_Piece_of_Steel
						close;
					}

				}

				else {
					mes "^3355FFSe ao menos você tivesse um Pedaço";
					mes "de Ferro Sólido você poderia usar para";
					mes "tentar abrir essa porta.^000000";
					close;
				}

			case 4:
				set @KHPryingItem$,"Pedaço de Ferro";
				break;

			case 5:
				set @KHPryingItem$,"Parafuso";
				break;

			case 6:
				mes "^3355FFVamos procurar por algo";
				mes "pesado que possamos usar para";
				mes "abrir essa porta.^000000";
				close;

			}

			mes "^3355FFEsse "+@KHPryingItem$+" é muito";
			mes "fraco para o que você está usando";
			mes "e se quebra.^000000";
			close;

		}

		else if ((KielHyreQuest >= 94) && (KielHyreQuest <= 104)) {
			if (.KHDoor5Opened == 0) {
				mes "^3355FFA porta larga";
				mes "está totalmente aberta, e.";
				mes "você pode entrar agora.^000000";
				next;

				switch(select("Sim","Não")) {

				case 1:
					close2;
					donpcevent "Big_Door_5_Warp::OnEnable";
					enablenpc "Big_Door_5_Warp";
					set .KHDoor5Opened,1;
					end;

				case 2:
					mes "^3355FFQuem sabe o que tem";
					mes "do outro lado dessa porta. Vamos";
					mes "pensar sobre isso antes de ir entrando..^000000";
					close;

				}
			}

			else {
				mes "^3355FFA porta está aberta.^000000";
				close;
			}

		}

		else {
			mes "^3355FFEsta porta larga..";
			mes "está encostada.";
			mes "Se você ouvir atentamente,";
			mes "você pode ouvir a porta";
			mes "ranger bem baixinho.^000000";
			close;
		}

	}

	else {
		mes "^3355FFEsta porta larga..";
		mes "está encostada.";
		mes "Se você ouvir atentamente,";
		mes "você pode ouvir a porta";
		mes "ranger bem baixinho.^000000";
		close;
	}

}

kh_kiehl01,166,186,0	script	Big_Door_5_Warp	45,1,1,{
	end;

OnEnable:
	initnpctimer;
	misceffect EF_SUMMONSLAVE;
	end;

OnTimer30000:
	stopnpctimer;
	misceffect EF_SUMMONSLAVE;
	disablenpc "Big_Door_5_Warp";
	set getvariableofnpc(.KHDoor5Opened,"Grande Porta#BigDoorKHQ5"),0;
	end;

OnInit:
	disablenpc "Big_Door_5_Warp";
	end;

OnTouch:

	if (KielHyreQuest >= 46)
		warp "kh_kiehl02",50,6;
	else
		warp "kh_kiehl01",166,183;
	end;
}

//----------------------------------------------------------------------------
// Kiehl's Room; Kiehl_Room_Trap (Entry way trap)
//----------------------------------------------------------------------------
kh_kiehl02,49,10,0	script	Kiehl_Room_Trap	-1,5,3,{
	end;

OnTouch:
	if (.KHTrapSprung < 1) {
		set .KHTrapSprung,1;
		set $@KHQuestBusy,1;
		initnpctimer;
		monster "kh_kiehl02",47,13,"Aliot",1740,1;
		monster "kh_kiehl02",54,13,"Alicel",1739,1;
		monster "kh_kiehl02",49,13,"Constant",1745,1;
		monster "kh_kiehl02",51,13,"Aliot",1740,1;
		monster "kh_kiehl02",53,13,"Alicel",1739,1;
		monster "kh_kiehl02",49,13,"Constant",1745,1;
	}
	end;


OnTimer300000:
OnTimer600000:
OnTimer900000:
	if (getmapusers("kh_kiehl02") == 0) {
		donpcevent "KiehlRoom::OnReset";
		stopnpctimer;
	}
	end;

OnTimer1200000:
	donpcevent "KiehlRoom::OnReset";
	stopnpctimer;
	end;

OnGlobalTimerOff:
	stopnpctimer;
	end;
}

//----------------------------------------------------------------------------
// Kiehl's Room; Kiehl
// - Timer will drop to 3 minutes once Kiehl is defeated.
//----------------------------------------------------------------------------
kh_kiehl02,50,52,4	script	Kiehl#Original	902,{
	set @now_weight,MaxWeight-Weight;
	if (@now_weight < 2000) {
		mes "^3355FF- Espere!! -";
		mes "- Você está carregando muitos ítens";
		mes "- e não será capaz de aceitar mais. -";
		mes "- Por favor libere algum espaço";
		mes "- no seu inventario antes de retornar. -^000000";
		close;
	}

	cutin "kh_kiel01",2;
	if ((KielHyreQuest < 94) || (KielHyreQuest >= 106)) {
		mes "[Kiehl]";
		mes ".........";
		close;
	}

	if ((KielHyreQuest == 94) && (getvariableofnpc(.KHKilled,"KiehlRoom") < 5)) {
		mes "[Kiehl]";
		mes "Estou surpreso que tenha chegado";
		mes "tão longe, aventureiro~";
		mes "Lhe ofereço as boas vindas ao meu";
		mes "humilde quarto. Acredito que";
		mes "tenha vindo pelo Pergaminho de";
		mes "Memória Condensada... minha mente.";
		next;
		mes "[Kiehl]";
		mes "Você pode entender";
		mes "porque não posso deixá-lo o ter,";
		mes "então se você realmente quer o";
		mes "Pergaminho de Memória Condensada,";
		mes "mostre-me do que é capaz!";
		close2;
		cutin "",255;
		set getvariableofnpc(.KHKilled,"KiehlRoom"),0;
		monster "kh_kiehl02",49,48,"Aliot",1740,1,"KiehlRoom::OnKiehlMobDead";
		monster "kh_kiehl02",46,50,"Alicel",1739,1,"KiehlRoom::OnKiehlMobDead";
		monster "kh_kiehl02",49,50,"Constant",1745,1,"KiehlRoom::OnKiehlMobDead";
		monster "kh_kiehl02",53,53,"Aliot",1740,1,"KiehlRoom::OnKiehlMobDead";
		monster "kh_kiehl02",49,55,"Alicel",1739,1,"KiehlRoom::OnKiehlMobDead";
		monster "kh_kiehl02",49,53,"Constant",1745,1,"KiehlRoom::OnKiehlMobDead";
		monster "kh_kiehl02",46,53,"Aliot",1740,1,"KiehlRoom::OnKiehlMobDead";
		donpcevent "Kiehl#Original::OnChangeState";
		disablenpc "Kiehl#Original";
		end;
	}

	else if ((KielHyreQuest == 94) && (getvariableofnpc(.KHKilled,"KiehlRoom") >= 5)) {
		cutin "kh_kiel03",2;
		mes "[Kiehl]";
		mes "Hmpf! Você é muito bom.";
		mes "Papai deve ter gasto";
		mes "muito dinheiro para lhe contratar";
		mes "Então ele lhe enviou";
		mes "para me matar?";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "Kiel Hyre me enviou para lhe pedir";
		mes "para parar de tornar toda a";
		mes "Terceira Geração de Robôs";
		mes "em máquinas mortíferas! Como";
		mes "pode fazer algo assim";
		mes "a outros robôs como você?";
		next;
		cutin "kh_kiel01",2;
		mes "[Kiehl]";
		mes "Por que não? Foi dito que o homem";
		mes "foi criado à imagem de Deus.";
		mes "Bem, robôs foram feitos à";
		mes "imagem do homem. Vocês humanos matam";
		mes "uns aos outros tanto quanto";
		mes "podem, até onde eu sei.";
		next;
		mes "[Kiehl]";
		mes "Pode não ser ético";
		mes "para eu prover armas";
		mes "para humanos que precisam delas...";
		mes "Mas o que elas são?";
		mes "Armas. É mais humano";
		mes "para robôs lutarem que humanos.";
		next;
		mes "[Kiehl]";
		mes "Robôs não sentem naturalmente";
		mes "dor ou emoções.";
		mes "Não até que são especialmente";
		mes "programados. Desculpe mas não";
		mes "planejo parar o que estou fazendo.";
		next;
		cutin "kh_kiel04",2;
		mes "["+strcharinfo(0)+"]";
		mes "Humanidade pode não ser";
		mes "perfeita, mas pense";
		mes "com quem você está trabalhando!";
		mes "Rekenber é o resumo do";
		mes "mal humano! Como você pode";
		mes "ajudá-los assim?";
		next;
		cutin "kh_kiel02",2;
		mes "[Kiehl]";
		mes "Tive um grande relacionamento";
		mes "com Rekenber. Estou totalmente ciente";
		mes "de suas capacidades. Você";
		mes "lembra do primeiro quarto que";
		mes "passou à caminho daqui, o";
		mes "que tinha todos os brinquedos?";
		next;
		mes "[Kiehl]";
		mes "Aposto que não sabia que lá";
		mes "estava 5 robôs da Segunda";
		mes "Geração. Eu e meus quatro outros";
		mes "irmãos e irmãs. Papai";
		mes "construiu aquele quarto para que todos";
		mes "os cinco pudessem viver juntos.";
		next;
		cutin "kh_kiel03",2;
		mes "[Kiehl]";
		mes "Eu sou o único que";
		mes "sobreviveu. Eu retornei para";
		mes "papai e até consegui um";
		mes "nome. Mas sim, eu sei";
		mes "o quão ruim Rekenber realmente é.";
		next;
		mes "[Kiehl]";
		mes "Eu não... Eu não quero";
		mes "falar sobre isso mais";
		mes "Você me deixou... Apenas saia.";
		mes "Acho que vou deixá-lo viver.";
		next;
		cutin "",255;
		mes "[Mitchell]";
		mes "Parado!";
		mes "Kiehl Hyre, você está";
		mes "preso por criar e";
		mes "negociar armas ilegais!";
		set KielHyreQuest,100;
		donpcevent "::OnKHAgent";
		enablenpc "Mitchell#KiehlRoom";
		enablenpc "Agent#KHAgent1";
		enablenpc "Agent#KHAgent2";
		enablenpc "Agent#KHAgent3";
		enablenpc "Agent#KHAgent4";
		next;
		goto L_Continue;
	}

	else if ((KielHyreQuest == 100) && (getvariableofnpc(.KHKilledBoss,"KiehlRoom") < 1)) {
		L_Continue:
		set getvariableofnpc(.KHKilledBoss,"KiehlRoom"),0;
		cutin "kh_kiel01",2;
		mes "[Kiehl]";
		mes "Ah, agentes da República";
		mes "Schwaltzvalt. Heh. Eu nunca tive";
		mes "tantos convidados antes.";
		mes "Bem, acho que isso significa";
		mes "que teremos de lutar afinal";
		mes "você e eu. *Droga* Pena...";
		next;
		mes "[Kiehl]";
		mes "Primeiro, para ser justo,";
		mes "deixe-me cuidar dessas";
		mes "chateações. Eles são apenas";
		mes "descerebrados fazendo seu";
		mes "trabalho--mais ou menos como robôs--mas";
		mes "não se preocupe, eles não serão feridos.";
		next;
		donpcevent "::OnKHSpiderWeb";
		mes "[Mitchell]";
		mes "Nããooooo!";
		next;
		cutin "kh_kiel03",2;
		mes "[Kiehl]";
		mes "E agora, você e eu podemos";
		mes "ter um duelo adequado, humano";
		mes "estou interessado em ver o quanto";
		mes "você é realmente forte~";
		close2;
		cutin "",255;
		monster "kh_kiehl02",50,52,"Kiehl",1733,1,"KiehlRoom::OnKiehlDead";
		donpcevent "Kiehl#Original::OnChangeState";
		disablenpc "Kiehl#Original";
		end;
	}

	else if ((KielHyreQuest == 100) && (getvariableofnpc(.KHKilledBoss,"KiehlRoom") == 1)) {
		cutin "kh_kiel02",2;
		mes "[Kiehl]";
		mes "M-Maldição...!";
		mes "Bem jogado, aventureiro";
		mes "Bem jogado. Eu deveria";
		mes "saber que papai enviaria";
		mes "o melhor de todos atrás de mim. Ainda assim,";
		mes "você falhou em realmente me derrotar.";
		next;
		mes "[Kiehl]";
		mes "Ainda tenho alguns";
		mes "trunfos sobrando";
		mes "Acho... Eu lhe levarei";
		mes "para o inferno comigo... Bem";
		mes "se robôs puderem ir para lá~";
		announce "*Jeeeezzzgggg~ Geezzz~ Grrrr~ Clank~*",bc_map,0xFF0000;
		next;
		mes "[Mitchell]";
		mes "Não...! Estamos trancados";
		mes "no quarto! Estamos";
		mes "presos aqui!";
		next;
		mes "[Kiehl]";
		mes "Yay~ Vamos queimar";
		mes "tudo abaixo~";
		next;
		mes "[Mitchell]";
		mes "Rápido, "+strcharinfo(0)+",";
		mes "use o dispositivo de força de";
		mes "Kiel Hyre, aquele que era";
		mes "para bagunçar com";
		mes "a fonte de força de Kiehl!";
		mes "Rápido, use-o agora!";
		next;
		delitem 7504,1; //Power_Source
		announce "*Gzzzz~ Gzzzz~*",bc_map,0xFF0000;
		next;
		mes "[Kiehl]";
		mes "O-O quê? Não p-posso";
		mes "me mover! Esse dia está simplesmente";
		mes "cheio de surpresas. Oh, bem.";
		mes "Acho que é hora de eu";
		mes "usar meu outro trunfo.";
		next;
		mes "[Mitchell]";
		mes "O quê...?";
		mes "Quantos trunfos";
		mes "você tem?";
		next;
		mes "[????]";
		mes "Estou tão desapontado...";
		mes "Não posso acreditar que ninguém";
		mes "de vocês pensou nisso...";
		next;
		mes "[Mitchell]";
		mes "Quem é você...?";
		mes "Apareça!";
		next;
		donpcevent "Kiehl#Copy::OnChangeState";
		enablenpc "Kiehl#Copy";
		mes "[????]";
		mes "Por favor.";
		mes "Não me insulte.";
		mes "Você conhece essa voz.";
		mes "Esteve falando com";
		mes "você o tempo todo~";
		next;
		mes "[Mitchell]";
		mes "Impossível!";
		mes "Como pode ter";
		mes "dois de você...?!";
		next;
		cutin "kh_kiel01",0;
		mes "[Kiehl]";
		mes "Hahahahaha!";
		mes "Eu sou um robô!";
		mes "Posso fazer corpos extras";
		mes "trocar de cérebros com eles";
		mes "É extremamente";
		mes "conveniente, se quer saber.";
		next;
		cutin "kh_kiel03",2;
		mes "[Kiehl]";
		mes "De qualquer forma, não quero aparecer";
		mes "mas acho que posso";
		mes "revelar para você meu trunfo final";
		mes "Primeiro de tudo, eu sei tudo";
		mes "sobre você. Sra. Mitchell Layla~";
		next;
		mes "[Mitchell]";
		mes "O quê? Como você";
		mes "sabe meu nome?";
		next;
		mes "[Kiehl]";
		mes "Bem, eu tenho alguns";
		mes "espiões meus...";
		mes "Eu o deixarei explicar.";
		next;
		mes "[Homem Mascarado]";
		mes "Mitchell...";
		mes "Sinto muito que";
		mes "você tenha se envolvido";
		mes "nisso tudo.";
		next;
		mes "[Mitchell]";
		mes "Wolkeus? Wolkeus Kaiser?!";
		mes "Você é o espião? Mas você arriscou";
		mes "sua vida para salvar nosso presidente!";
		mes "Não! Oh, Deus! Como isso pode estar";
		mes "acontecendo?! Tudo é simplesmente...";
		mes "Isso tudo é loucura! Tudo!";
		next;
		mes "[Wolkeus]";
		mes "Isso é apenas o resultado";
		mes "de planos elaborados que";
		mes "fizemos anos atrás. Eu não";
		mes "esperava que você ficasse tão surpresa,";
		mes "Mitchell. É assim que o jogo é";
		mes "jogado. Você sabe disso.";
		next;
		mes "[Mitchell]";
		mes "Senhor Presidente...";
		mes "Eu falhei... Me desculpe...";
		next;
		mes "[Kiehl]";
		mes "Bem, Kaiser, ela se deu";
		mes "muito mal, mas ao menos";
		mes "você está sendo um cavalheiro";
		mes "sobre isso. Bem eu gostaria que";
		mes "todos nós ficássemos bem";
		mes "informados, mas...";
		next;
		cutin "kh_kiel01",2;
		mes "[Kiehl]";
		mes "Melhor fazermos nossas";
		mes "despedidas aqui. Esse";
		mes "lugar vai sumir em";
		mes "cinco minutos. Ah, e";
		mes "Sra. Layla, você vem";
		mes "conosco. Temos perguntas~";
		next;
		mes "[Kiehl]";
		mes "Estou curioso em quais são";
		mes "os planos do Presidente.";
		mes "Senhor Kaiser, poderia";
		mes "escoltar a Sra. Layla, por favor.";
		next;
		mes "[Wolkeus Kaiser]";
		mes "Desculpe, Mitchell.";
		mes "Tenho de fazê-lo...";
		next;
		mes "[Mitchell]";
		mes "Não, afaste-se! Deixe-me ir!";
		mes "Me solta, Wolkeus!";
		donpcevent "::OnKHAgent";
		disablenpc "Mitchell#KiehlRoom";
		disablenpc "Agent#KHAgent1";
		disablenpc "Agent#KHAgent2";
		disablenpc "Agent#KHAgent3";
		disablenpc "Agent#KHAgent4";
		next;
		cutin "kh_kiel02",2;
		mes "[Kiehl]";
		mes "Ótimo, acabamos com";
		mes "aquele negócio feio. Agora,";
		mes "onde eu estava. Ah sim.";
		mes "Sim. Desculpe. Não temos";
		mes "mais tempo para brincar.";
		next;
		mes "[Kiehl]";
		mes "Aqui, aventureiro.";
		mes "Estou ciente que meu pai";
		mes "lhe enviou aqui para pegar isso.";
		mes "Considere meu presente final";
		mes "para ele. Estou surpreso que ele deixou";
		mes "esse anel dentro de mim.";
		next;
		cutin "kh_kiel04",2;
		mes "[Kiehl]";
		mes "Eu imagino que deve";
		mes "ser precioso para ele. Mas";
		mes "fico imaginado porque ele o colocou";
		mes "dentro de mim? Bem, de qualquer forma,";
		mes "tenho uma mensagem que gostaria";
		mes "que você entregasse a ele por mim.";
		next;
		cutin "kh_kiel01",2;
		mes "[Kiehl]";
		mes "Primeiro... Acho que devemos";
		mes "nos livrar dessa";
		mes "coisa velha. Foi um bom";
		mes "corpo, e me serviu";
		mes "bem por 23 anos. Sentirei falta";
		mes "dele. Descanse bem, velho Kiehl.";
		next;
		mes "[Kiehl]";
		mes "Agora, esse era o corpo";
		mes "que meu pai fez.";
		mes "Por favor diga a ele que";
		mes "isso quer dizer que não somos";
		mes "mais parentes";
		mes "um do outro.";
		next;
		mes "[Kiehl]";
		mes "O corpo que estou usando agora?";
		mes "Eu mesmo fiz com a mais";
		mes "avançada tecnologia. Considere-o...";
		mes "a Quarta Geração de corpos de robôs";
		mes "se quiser. Papai vai";
		mes "entender o que quero dizer.";
		next;
		mes "[Kiehl]";
		mes "De qualquer forma, por favor diga a ele";
		mes "isso, e livre-se desse anel velho";
		mes "que estava no meu corpo antigo de robô,";
		mes "e entregue para ele. Por enquanto";
		mes "vamos sair daqui: só";
		mes "temos apenas 3 minutos para evacuar.";
		next;
		mes "[Kiehl]";
		mes "Você é um oponente valoroso,";
		mes "e um humano que eu respeito.";
		mes "Eu não sei se vamos nos encontrar";
		mes "novamente, mas quem sabe?";
		mes "De qualquer forma, abrirei a";
		mes "saída para você. Até mais ver~";
		set KielHyreQuest,104;
		donpcevent "Kiehl_Room_Exit::OnEnable";			
		enablenpc "Kiehl_Room_Exit";
		close2;
		cutin "",255;
		donpcevent "Kiehl#Copy::OnChangeState";
		disablenpc "Kiehl#Copy";
		initnpctimer;
		end;
	}

	if (KielHyreQuest == 104) {
		cutin "kh_kiel02",2;
		mes "^3355FFvocê recuperou o";
		mes "anel do coração do velho corpo";
		mes "robótico de Kiehl.^000000";
		getitem 7508,1; //Elisia's_Ring
		set KielHyreQuest,106;
		enablenpc "Kiehl_Room_Exit";
		close2;
		cutin "",255;
		end;
	}

	else {
		mes"......";
		close2;
		cutin "",255;
		end;
	}

OnTimer180000:
	stopnpctimer;
	mapannounce "kh_kiehl02","Beeeeeeeeeeeeep~",bc_npc,0xFF0000;
	donpcevent "KiehlRoom::OnReset";
	end;

OnTimer179000:
	mapannounce "kh_kiehl02","Faltando 1 segundo para a detonação",bc_npc,0xFF0000;
	end;

OnTimer178000:
	mapannounce "kh_kiehl02","Faltando 2 segundos para a detonação",bc_npc,0xFF0000;
	end;

OnTimer177000:
	mapannounce "kh_kiehl02","Faltando 3 segundos para a detonação",bc_npc,0xFF0000;
	end;

OnTimer176000:
	mapannounce "kh_kiehl02","Faltando 4 segundos para a detonação",bc_npc,0xFF0000;
	end;

OnTimer175000:
	mapannounce "kh_kiehl02","Faltando 5 segundos para a detonação",bc_npc,0xFF0000;
	end;

OnTimer170000:
	mapannounce "kh_kiehl02","Faltando 10 segundos para a detonação",bc_npc,0xFF0000;
	end;

OnTimer160000:
	mapannounce "kh_kiehl02","Faltando 20 segundos para a detonação",bc_npc,0xFF0000;
	end;

OnTimer150000:
	mapannounce "kh_kiehl02","Faltando 30 segundos para a detonação",bc_npc,0xFF0000;
	end;

OnTimer120000:
	mapannounce "kh_kiehl02","Faltando 1 minuto para a detonação.",bc_npc,0xFF0000;
	end;

OnTimer60000:
	mapannounce "kh_kiehl02","Faltando 2 minutos para a detonação.",bc_npc,0xFF0000;
	end;

OnTimer1000:
	mapannounce "kh_kiehl02","Faltando 3 minutos para a detonação.",bc_npc,0xFF0000;
	end;

OnChangeState:
	misceffect EF_SUMMONSLAVE;
	end;

OnInit:
	disablenpc "Mitchell#KiehlRoom";
	disablenpc "Agent#KHAgent1";
	disablenpc "Agent#KHAgent2";
	disablenpc "Agent#KHAgent3";
	disablenpc "Agent#KHAgent4";
	end;
}

//----------------------------------------------------------------------------
// Kiehl's Room; NPC for mob control, timers, and other junk.
//----------------------------------------------------------------------------
kh_kiehl02,1,1,0	script	KiehlRoom	-1,{
	end;

OnKiehlMobDead:
	set .KHKilled,.KHKilled+1;
	if (.KHKilled == 5) { 
		donpcevent "Kiehl#Original::OnChangeState";
		enablenpc "Kiehl#Original"; 
	}
	end;

OnKiehlDead:
	set .KHKilledBoss,1;
	donpcevent "Kiehl#Original::OnChangeState";
	enablenpc "Kiehl#Original";
	end;
	
OnReset:
	donpcevent "Kiehl_Room_Trap::OnGlobalTimerOff";
	if (getmapusers("kh_kiehl02") > 0)
		mapwarp "kh_kiehl02","lighthalzen",192,200;
	killmonsterall "kh_kiehl02";
	disablenpc "Kiehl_Room_Exit";
	disablenpc "Mitchell#KiehlRoom";
	disablenpc "Agent#KHAgent1";
	disablenpc "Agent#KHAgent2";
	disablenpc "Agent#KHAgent3";
	disablenpc "Agent#KHAgent4";
	disablenpc "Kiehl#Copy";
	enablenpc "Kiehl#Original"; 
	set .KHKilledBoss,0;
	set .KHKilled,0;
	set getvariableofnpc(.KHTrapSprung,"Kiehl_Room_Trap"),0;
	set $@KHQuestBusy,0;
	end;
}

//----------------------------------------------------------------------------
// Kiehl's Room; Mitchell and Agents. (Floating NPC + Duplicates)
//----------------------------------------------------------------------------
-	script	Agent#KHAgent1::KHAgent	-1,{
	end;

OnKHAgent:
	misceffect EF_SUMMONSLAVE;
	end;

OnKHSpiderWeb:
	misceffect 404;
	end;
}


kh_kiehl02,49,55,6	duplicate(KHAgent)	Mitchell#KiehlRoom	727

kh_kiehl02,53,52,4	duplicate(KHAgent)	Agent#KHAgent1	880

kh_kiehl02,51,49,1	duplicate(KHAgent)	Agent#KHAgent2	880

kh_kiehl02,47,50,0	duplicate(KHAgent)	Agent#KHAgent3	880

kh_kiehl02,46,53,6	duplicate(KHAgent)	Agent#KHAgent4	880


//----------------------------------------------------------------------------
// Kiehl's Room; Copy of Kiehl.
//----------------------------------------------------------------------------
kh_kiehl02,48,53,6	script	Kiehl#Copy	902,{
	end;

OnChangeState:
	misceffect EF_SUMMONSLAVE;
	end;

OnInit:
	disablenpc "Kiehl#Copy";
	end;
}

//----------------------------------------------------------------------------
// Kiehl's Room; Kiehl_Room_Exit
//----------------------------------------------------------------------------
kh_kiehl02,50,59,0	script	Kiehl_Room_Exit	45,1,1,{
OnTouch:
	if (getmapusers("kh_kiehl02") < 1)
		donpcevent "KiehlRoom::OnReset";
	warp "lighthalzen",193,202;
	end;

OnEnable:
	misceffect EF_SUMMONSLAVE;
	end;

OnInit:
	disablenpc "Kiehl_Room_Exit";
	end;
}
//============================================================================